[{"data":1,"prerenderedAt":1510},["ShallowReactive",2],{"nuxt2_content_code_block_copy_paste":3,"Related_nuxt2_content_code_block_copy_paste":1471},{"title":4,"description":5,"img":6,"readingTime":7,"createdAt":12,"updatedAt":12,"slug":13,"tags":14,"category":20,"body":21},"在Nuxt Content v1中實現程式碼區塊複製貼上功能","用 Nuxt Content 作為部落格的基底讓我最開心的部份，就是 markdown 中的程式碼區塊了，自動上色、格式化、支援的語言非常多，這是很多部落格平台都無法提供的，但若需要程式碼複製貼上功能，就得自己額外處理。","923/YRlYZO.jpg",{"text":8,"minutes":9,"time":10,"words":11},"4 min read",3.32,199200,664,"2023-12-12T05:50:50.000Z","nuxt2_content_code_block_copy_paste",[15,16,17,18,19],"nuxt","nuxt2","nuxt content v1","nuxt content","markdown","frontend",{"type":22,"children":23,"toc":1467},"root",[24,31,45,49,55,84,823,828,906,911,916,919,924,957,1434,1453,1456,1461],{"type":25,"tag":26,"props":27,"children":28},"element","p",{},[29],{"type":30,"value":5},"text",{"type":25,"tag":26,"props":32,"children":33},{},[34,36,43],{"type":30,"value":35},"這篇文章紀錄了自己從查資料最後搞出來的一些過程，最後是透過在",{"type":25,"tag":37,"props":38,"children":40},"code",{"className":39},[],[41],{"type":30,"value":42},"nuxt.config.js",{"type":30,"value":44},"中自訂程式碼區塊處理器來實現。",{"type":25,"tag":46,"props":47,"children":48},"hr",{},[],{"type":25,"tag":50,"props":51,"children":53},"h2",{"id":52},"用元件把程式碼區塊包起來",[54],{"type":30,"value":52},{"type":25,"tag":26,"props":56,"children":57},{},[58,60,66,68,74,76,82],{"type":30,"value":59},"初步的想法是用一個元件在 markdown 中把程式碼區塊包起來，再把",{"type":25,"tag":37,"props":61,"children":63},{"className":62},[],[64],{"type":30,"value":65},"slot",{"type":30,"value":67},"外面那層",{"type":25,"tag":37,"props":69,"children":71},{"className":70},[],[72],{"type":30,"value":73},"div",{"type":30,"value":75},"填上",{"type":25,"tag":37,"props":77,"children":79},{"className":78},[],[80],{"type":30,"value":81},"ref",{"type":30,"value":83},"，這樣就可以去抓裡面的文字內容拿來寫入剪貼簿。自己寫出來大概是長這樣：",{"type":25,"tag":85,"props":86,"children":92},"pre",{"className":87,"code":88,"filename":89,"language":90,"meta":91,"style":91},"language-vue shiki shiki-themes github-dark","\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cdiv>\n      \u003Cbutton @click=\"copyCode\" variant=\"link\">複製程式碼\u003C/button>\n    \u003C/div>\n\n    \u003Cdiv ref=\"code\">\n      \u003C!-- markdown中程式碼嵌入的地方 -->\n      \u003Cslot>\u003C/slot>\n    \u003C/div>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript>\nexport default {\n  methods: {\n    copyCode() {\n      if (this.copied) return\n\n      const { code } = this.$refs\n\n      if (navigator.clipboard?.writeText) {\n        const toCopyCode = code.innerText\n        navigator.clipboard.writeText(toCopyCode)\n      } else {\n        const range = document.createRange()\n        range.selectNode(code)\n\n        const selection = window.getSelection()\n        selection.removeAllRanges()\n        selection.addRange(range)\n\n        document.execCommand('copy')\n        selection.removeAllRanges()\n      }\n    },\n  },\n}\n\u003C/script>\n","article-code.vue","vue","",[93],{"type":25,"tag":37,"props":94,"children":95},{"__ignoreMap":91},[96,119,136,153,225,242,252,282,292,317,333,350,367,375,392,412,421,435,465,473,510,518,531,555,574,592,624,643,651,682,700,718,726,755,771,780,789,798,807],{"type":25,"tag":97,"props":98,"children":101},"span",{"class":99,"line":100},"line",1,[102,108,114],{"type":25,"tag":97,"props":103,"children":105},{"style":104},"--shiki-default:#E1E4E8",[106],{"type":30,"value":107},"\u003C",{"type":25,"tag":97,"props":109,"children":111},{"style":110},"--shiki-default:#85E89D",[112],{"type":30,"value":113},"template",{"type":25,"tag":97,"props":115,"children":116},{"style":104},[117],{"type":30,"value":118},">\n",{"type":25,"tag":97,"props":120,"children":122},{"class":99,"line":121},2,[123,128,132],{"type":25,"tag":97,"props":124,"children":125},{"style":104},[126],{"type":30,"value":127},"  \u003C",{"type":25,"tag":97,"props":129,"children":130},{"style":110},[131],{"type":30,"value":73},{"type":25,"tag":97,"props":133,"children":134},{"style":104},[135],{"type":30,"value":118},{"type":25,"tag":97,"props":137,"children":139},{"class":99,"line":138},3,[140,145,149],{"type":25,"tag":97,"props":141,"children":142},{"style":104},[143],{"type":30,"value":144},"    \u003C",{"type":25,"tag":97,"props":146,"children":147},{"style":110},[148],{"type":30,"value":73},{"type":25,"tag":97,"props":150,"children":151},{"style":104},[152],{"type":30,"value":118},{"type":25,"tag":97,"props":154,"children":156},{"class":99,"line":155},4,[157,162,167,172,178,183,189,194,198,203,207,212,217,221],{"type":25,"tag":97,"props":158,"children":159},{"style":104},[160],{"type":30,"value":161},"      \u003C",{"type":25,"tag":97,"props":163,"children":164},{"style":110},[165],{"type":30,"value":166},"button",{"type":25,"tag":97,"props":168,"children":169},{"style":104},[170],{"type":30,"value":171}," @",{"type":25,"tag":97,"props":173,"children":175},{"style":174},"--shiki-default:#B392F0",[176],{"type":30,"value":177},"click",{"type":25,"tag":97,"props":179,"children":180},{"style":104},[181],{"type":30,"value":182},"=",{"type":25,"tag":97,"props":184,"children":186},{"style":185},"--shiki-default:#9ECBFF",[187],{"type":30,"value":188},"\"",{"type":25,"tag":97,"props":190,"children":191},{"style":104},[192],{"type":30,"value":193},"copyCode",{"type":25,"tag":97,"props":195,"children":196},{"style":185},[197],{"type":30,"value":188},{"type":25,"tag":97,"props":199,"children":200},{"style":174},[201],{"type":30,"value":202}," variant",{"type":25,"tag":97,"props":204,"children":205},{"style":104},[206],{"type":30,"value":182},{"type":25,"tag":97,"props":208,"children":209},{"style":185},[210],{"type":30,"value":211},"\"link\"",{"type":25,"tag":97,"props":213,"children":214},{"style":104},[215],{"type":30,"value":216},">複製程式碼\u003C/",{"type":25,"tag":97,"props":218,"children":219},{"style":110},[220],{"type":30,"value":166},{"type":25,"tag":97,"props":222,"children":223},{"style":104},[224],{"type":30,"value":118},{"type":25,"tag":97,"props":226,"children":228},{"class":99,"line":227},5,[229,234,238],{"type":25,"tag":97,"props":230,"children":231},{"style":104},[232],{"type":30,"value":233},"    \u003C/",{"type":25,"tag":97,"props":235,"children":236},{"style":110},[237],{"type":30,"value":73},{"type":25,"tag":97,"props":239,"children":240},{"style":104},[241],{"type":30,"value":118},{"type":25,"tag":97,"props":243,"children":245},{"class":99,"line":244},6,[246],{"type":25,"tag":97,"props":247,"children":249},{"emptyLinePlaceholder":248},true,[250],{"type":30,"value":251},"\n",{"type":25,"tag":97,"props":253,"children":255},{"class":99,"line":254},7,[256,260,264,269,273,278],{"type":25,"tag":97,"props":257,"children":258},{"style":104},[259],{"type":30,"value":144},{"type":25,"tag":97,"props":261,"children":262},{"style":110},[263],{"type":30,"value":73},{"type":25,"tag":97,"props":265,"children":266},{"style":174},[267],{"type":30,"value":268}," ref",{"type":25,"tag":97,"props":270,"children":271},{"style":104},[272],{"type":30,"value":182},{"type":25,"tag":97,"props":274,"children":275},{"style":185},[276],{"type":30,"value":277},"\"code\"",{"type":25,"tag":97,"props":279,"children":280},{"style":104},[281],{"type":30,"value":118},{"type":25,"tag":97,"props":283,"children":285},{"class":99,"line":284},8,[286],{"type":25,"tag":97,"props":287,"children":289},{"style":288},"--shiki-default:#6A737D",[290],{"type":30,"value":291},"      \u003C!-- markdown中程式碼嵌入的地方 -->\n",{"type":25,"tag":97,"props":293,"children":295},{"class":99,"line":294},9,[296,300,304,309,313],{"type":25,"tag":97,"props":297,"children":298},{"style":104},[299],{"type":30,"value":161},{"type":25,"tag":97,"props":301,"children":302},{"style":110},[303],{"type":30,"value":65},{"type":25,"tag":97,"props":305,"children":306},{"style":104},[307],{"type":30,"value":308},">\u003C/",{"type":25,"tag":97,"props":310,"children":311},{"style":110},[312],{"type":30,"value":65},{"type":25,"tag":97,"props":314,"children":315},{"style":104},[316],{"type":30,"value":118},{"type":25,"tag":97,"props":318,"children":320},{"class":99,"line":319},10,[321,325,329],{"type":25,"tag":97,"props":322,"children":323},{"style":104},[324],{"type":30,"value":233},{"type":25,"tag":97,"props":326,"children":327},{"style":110},[328],{"type":30,"value":73},{"type":25,"tag":97,"props":330,"children":331},{"style":104},[332],{"type":30,"value":118},{"type":25,"tag":97,"props":334,"children":336},{"class":99,"line":335},11,[337,342,346],{"type":25,"tag":97,"props":338,"children":339},{"style":104},[340],{"type":30,"value":341},"  \u003C/",{"type":25,"tag":97,"props":343,"children":344},{"style":110},[345],{"type":30,"value":73},{"type":25,"tag":97,"props":347,"children":348},{"style":104},[349],{"type":30,"value":118},{"type":25,"tag":97,"props":351,"children":353},{"class":99,"line":352},12,[354,359,363],{"type":25,"tag":97,"props":355,"children":356},{"style":104},[357],{"type":30,"value":358},"\u003C/",{"type":25,"tag":97,"props":360,"children":361},{"style":110},[362],{"type":30,"value":113},{"type":25,"tag":97,"props":364,"children":365},{"style":104},[366],{"type":30,"value":118},{"type":25,"tag":97,"props":368,"children":370},{"class":99,"line":369},13,[371],{"type":25,"tag":97,"props":372,"children":373},{"emptyLinePlaceholder":248},[374],{"type":30,"value":251},{"type":25,"tag":97,"props":376,"children":378},{"class":99,"line":377},14,[379,383,388],{"type":25,"tag":97,"props":380,"children":381},{"style":104},[382],{"type":30,"value":107},{"type":25,"tag":97,"props":384,"children":385},{"style":110},[386],{"type":30,"value":387},"script",{"type":25,"tag":97,"props":389,"children":390},{"style":104},[391],{"type":30,"value":118},{"type":25,"tag":97,"props":393,"children":395},{"class":99,"line":394},15,[396,402,407],{"type":25,"tag":97,"props":397,"children":399},{"style":398},"--shiki-default:#F97583",[400],{"type":30,"value":401},"export",{"type":25,"tag":97,"props":403,"children":404},{"style":398},[405],{"type":30,"value":406}," default",{"type":25,"tag":97,"props":408,"children":409},{"style":104},[410],{"type":30,"value":411}," {\n",{"type":25,"tag":97,"props":413,"children":415},{"class":99,"line":414},16,[416],{"type":25,"tag":97,"props":417,"children":418},{"style":104},[419],{"type":30,"value":420},"  methods: {\n",{"type":25,"tag":97,"props":422,"children":424},{"class":99,"line":423},17,[425,430],{"type":25,"tag":97,"props":426,"children":427},{"style":174},[428],{"type":30,"value":429},"    copyCode",{"type":25,"tag":97,"props":431,"children":432},{"style":104},[433],{"type":30,"value":434},"() {\n",{"type":25,"tag":97,"props":436,"children":438},{"class":99,"line":437},18,[439,444,449,455,460],{"type":25,"tag":97,"props":440,"children":441},{"style":398},[442],{"type":30,"value":443},"      if",{"type":25,"tag":97,"props":445,"children":446},{"style":104},[447],{"type":30,"value":448}," (",{"type":25,"tag":97,"props":450,"children":452},{"style":451},"--shiki-default:#79B8FF",[453],{"type":30,"value":454},"this",{"type":25,"tag":97,"props":456,"children":457},{"style":104},[458],{"type":30,"value":459},".copied) ",{"type":25,"tag":97,"props":461,"children":462},{"style":398},[463],{"type":30,"value":464},"return\n",{"type":25,"tag":97,"props":466,"children":468},{"class":99,"line":467},19,[469],{"type":25,"tag":97,"props":470,"children":471},{"emptyLinePlaceholder":248},[472],{"type":30,"value":251},{"type":25,"tag":97,"props":474,"children":476},{"class":99,"line":475},20,[477,482,487,491,496,500,505],{"type":25,"tag":97,"props":478,"children":479},{"style":398},[480],{"type":30,"value":481},"      const",{"type":25,"tag":97,"props":483,"children":484},{"style":104},[485],{"type":30,"value":486}," { ",{"type":25,"tag":97,"props":488,"children":489},{"style":451},[490],{"type":30,"value":37},{"type":25,"tag":97,"props":492,"children":493},{"style":104},[494],{"type":30,"value":495}," } ",{"type":25,"tag":97,"props":497,"children":498},{"style":398},[499],{"type":30,"value":182},{"type":25,"tag":97,"props":501,"children":502},{"style":451},[503],{"type":30,"value":504}," this",{"type":25,"tag":97,"props":506,"children":507},{"style":104},[508],{"type":30,"value":509},".$refs\n",{"type":25,"tag":97,"props":511,"children":513},{"class":99,"line":512},21,[514],{"type":25,"tag":97,"props":515,"children":516},{"emptyLinePlaceholder":248},[517],{"type":30,"value":251},{"type":25,"tag":97,"props":519,"children":521},{"class":99,"line":520},22,[522,526],{"type":25,"tag":97,"props":523,"children":524},{"style":398},[525],{"type":30,"value":443},{"type":25,"tag":97,"props":527,"children":528},{"style":104},[529],{"type":30,"value":530}," (navigator.clipboard?.writeText) {\n",{"type":25,"tag":97,"props":532,"children":534},{"class":99,"line":533},23,[535,540,545,550],{"type":25,"tag":97,"props":536,"children":537},{"style":398},[538],{"type":30,"value":539},"        const",{"type":25,"tag":97,"props":541,"children":542},{"style":451},[543],{"type":30,"value":544}," toCopyCode",{"type":25,"tag":97,"props":546,"children":547},{"style":398},[548],{"type":30,"value":549}," =",{"type":25,"tag":97,"props":551,"children":552},{"style":104},[553],{"type":30,"value":554}," code.innerText\n",{"type":25,"tag":97,"props":556,"children":558},{"class":99,"line":557},24,[559,564,569],{"type":25,"tag":97,"props":560,"children":561},{"style":104},[562],{"type":30,"value":563},"        navigator.clipboard.",{"type":25,"tag":97,"props":565,"children":566},{"style":174},[567],{"type":30,"value":568},"writeText",{"type":25,"tag":97,"props":570,"children":571},{"style":104},[572],{"type":30,"value":573},"(toCopyCode)\n",{"type":25,"tag":97,"props":575,"children":577},{"class":99,"line":576},25,[578,583,588],{"type":25,"tag":97,"props":579,"children":580},{"style":104},[581],{"type":30,"value":582},"      } ",{"type":25,"tag":97,"props":584,"children":585},{"style":398},[586],{"type":30,"value":587},"else",{"type":25,"tag":97,"props":589,"children":590},{"style":104},[591],{"type":30,"value":411},{"type":25,"tag":97,"props":593,"children":595},{"class":99,"line":594},26,[596,600,605,609,614,619],{"type":25,"tag":97,"props":597,"children":598},{"style":398},[599],{"type":30,"value":539},{"type":25,"tag":97,"props":601,"children":602},{"style":451},[603],{"type":30,"value":604}," range",{"type":25,"tag":97,"props":606,"children":607},{"style":398},[608],{"type":30,"value":549},{"type":25,"tag":97,"props":610,"children":611},{"style":104},[612],{"type":30,"value":613}," document.",{"type":25,"tag":97,"props":615,"children":616},{"style":174},[617],{"type":30,"value":618},"createRange",{"type":25,"tag":97,"props":620,"children":621},{"style":104},[622],{"type":30,"value":623},"()\n",{"type":25,"tag":97,"props":625,"children":627},{"class":99,"line":626},27,[628,633,638],{"type":25,"tag":97,"props":629,"children":630},{"style":104},[631],{"type":30,"value":632},"        range.",{"type":25,"tag":97,"props":634,"children":635},{"style":174},[636],{"type":30,"value":637},"selectNode",{"type":25,"tag":97,"props":639,"children":640},{"style":104},[641],{"type":30,"value":642},"(code)\n",{"type":25,"tag":97,"props":644,"children":646},{"class":99,"line":645},28,[647],{"type":25,"tag":97,"props":648,"children":649},{"emptyLinePlaceholder":248},[650],{"type":30,"value":251},{"type":25,"tag":97,"props":652,"children":654},{"class":99,"line":653},29,[655,659,664,668,673,678],{"type":25,"tag":97,"props":656,"children":657},{"style":398},[658],{"type":30,"value":539},{"type":25,"tag":97,"props":660,"children":661},{"style":451},[662],{"type":30,"value":663}," selection",{"type":25,"tag":97,"props":665,"children":666},{"style":398},[667],{"type":30,"value":549},{"type":25,"tag":97,"props":669,"children":670},{"style":104},[671],{"type":30,"value":672}," window.",{"type":25,"tag":97,"props":674,"children":675},{"style":174},[676],{"type":30,"value":677},"getSelection",{"type":25,"tag":97,"props":679,"children":680},{"style":104},[681],{"type":30,"value":623},{"type":25,"tag":97,"props":683,"children":685},{"class":99,"line":684},30,[686,691,696],{"type":25,"tag":97,"props":687,"children":688},{"style":104},[689],{"type":30,"value":690},"        selection.",{"type":25,"tag":97,"props":692,"children":693},{"style":174},[694],{"type":30,"value":695},"removeAllRanges",{"type":25,"tag":97,"props":697,"children":698},{"style":104},[699],{"type":30,"value":623},{"type":25,"tag":97,"props":701,"children":703},{"class":99,"line":702},31,[704,708,713],{"type":25,"tag":97,"props":705,"children":706},{"style":104},[707],{"type":30,"value":690},{"type":25,"tag":97,"props":709,"children":710},{"style":174},[711],{"type":30,"value":712},"addRange",{"type":25,"tag":97,"props":714,"children":715},{"style":104},[716],{"type":30,"value":717},"(range)\n",{"type":25,"tag":97,"props":719,"children":721},{"class":99,"line":720},32,[722],{"type":25,"tag":97,"props":723,"children":724},{"emptyLinePlaceholder":248},[725],{"type":30,"value":251},{"type":25,"tag":97,"props":727,"children":729},{"class":99,"line":728},33,[730,735,740,745,750],{"type":25,"tag":97,"props":731,"children":732},{"style":104},[733],{"type":30,"value":734},"        document.",{"type":25,"tag":97,"props":736,"children":737},{"style":174},[738],{"type":30,"value":739},"execCommand",{"type":25,"tag":97,"props":741,"children":742},{"style":104},[743],{"type":30,"value":744},"(",{"type":25,"tag":97,"props":746,"children":747},{"style":185},[748],{"type":30,"value":749},"'copy'",{"type":25,"tag":97,"props":751,"children":752},{"style":104},[753],{"type":30,"value":754},")\n",{"type":25,"tag":97,"props":756,"children":758},{"class":99,"line":757},34,[759,763,767],{"type":25,"tag":97,"props":760,"children":761},{"style":104},[762],{"type":30,"value":690},{"type":25,"tag":97,"props":764,"children":765},{"style":174},[766],{"type":30,"value":695},{"type":25,"tag":97,"props":768,"children":769},{"style":104},[770],{"type":30,"value":623},{"type":25,"tag":97,"props":772,"children":774},{"class":99,"line":773},35,[775],{"type":25,"tag":97,"props":776,"children":777},{"style":104},[778],{"type":30,"value":779},"      }\n",{"type":25,"tag":97,"props":781,"children":783},{"class":99,"line":782},36,[784],{"type":25,"tag":97,"props":785,"children":786},{"style":104},[787],{"type":30,"value":788},"    },\n",{"type":25,"tag":97,"props":790,"children":792},{"class":99,"line":791},37,[793],{"type":25,"tag":97,"props":794,"children":795},{"style":104},[796],{"type":30,"value":797},"  },\n",{"type":25,"tag":97,"props":799,"children":801},{"class":99,"line":800},38,[802],{"type":25,"tag":97,"props":803,"children":804},{"style":104},[805],{"type":30,"value":806},"}\n",{"type":25,"tag":97,"props":808,"children":810},{"class":99,"line":809},39,[811,815,819],{"type":25,"tag":97,"props":812,"children":813},{"style":104},[814],{"type":30,"value":358},{"type":25,"tag":97,"props":816,"children":817},{"style":110},[818],{"type":30,"value":387},{"type":25,"tag":97,"props":820,"children":821},{"style":104},[822],{"type":30,"value":118},{"type":25,"tag":26,"props":824,"children":825},{},[826],{"type":30,"value":827},"而把元件寫在 markdown 檔案會長這樣：",{"type":25,"tag":85,"props":829,"children":833},{"className":830,"code":831,"filename":832,"language":19,"meta":91,"style":91},"language-markdown shiki shiki-themes github-dark","\u003Carticle-code>\n\n```bash\nsudo dnf update -y\n```\n\n\u003C/article-code>\n","article.md",[834],{"type":25,"tag":37,"props":835,"children":836},{"__ignoreMap":91},[837,853,860,868,876,884,891],{"type":25,"tag":97,"props":838,"children":839},{"class":99,"line":100},[840,844,849],{"type":25,"tag":97,"props":841,"children":842},{"style":104},[843],{"type":30,"value":107},{"type":25,"tag":97,"props":845,"children":846},{"style":110},[847],{"type":30,"value":848},"article-code",{"type":25,"tag":97,"props":850,"children":851},{"style":104},[852],{"type":30,"value":118},{"type":25,"tag":97,"props":854,"children":855},{"class":99,"line":121},[856],{"type":25,"tag":97,"props":857,"children":858},{"emptyLinePlaceholder":248},[859],{"type":30,"value":251},{"type":25,"tag":97,"props":861,"children":862},{"class":99,"line":138},[863],{"type":25,"tag":97,"props":864,"children":865},{"style":104},[866],{"type":30,"value":867},"```bash\n",{"type":25,"tag":97,"props":869,"children":870},{"class":99,"line":155},[871],{"type":25,"tag":97,"props":872,"children":873},{"style":104},[874],{"type":30,"value":875},"sudo dnf update -y\n",{"type":25,"tag":97,"props":877,"children":878},{"class":99,"line":227},[879],{"type":25,"tag":97,"props":880,"children":881},{"style":104},[882],{"type":30,"value":883},"```\n",{"type":25,"tag":97,"props":885,"children":886},{"class":99,"line":244},[887],{"type":25,"tag":97,"props":888,"children":889},{"emptyLinePlaceholder":248},[890],{"type":30,"value":251},{"type":25,"tag":97,"props":892,"children":893},{"class":99,"line":254},[894,898,902],{"type":25,"tag":97,"props":895,"children":896},{"style":104},[897],{"type":30,"value":358},{"type":25,"tag":97,"props":899,"children":900},{"style":110},[901],{"type":30,"value":848},{"type":25,"tag":97,"props":903,"children":904},{"style":104},[905],{"type":30,"value":118},{"type":25,"tag":26,"props":907,"children":908},{},[909],{"type":30,"value":910},"可以看到因為 markdown 解析的關係，元件標籤與程式碼區塊之間上下還要再空一行。",{"type":25,"tag":26,"props":912,"children":913},{},[914],{"type":30,"value":915},"因為每次寫程式碼區塊的時候都要嵌入元件，若文章有大量或是連續的程式碼區塊，閱讀性會降低很多，最後看到頭很痛。後來就找找有沒有辦法在處理程式碼區塊產生 html 時，順便用元件包起來的方法，這樣就不用一直自己額外包起來，後來查到還真的有。",{"type":25,"tag":46,"props":917,"children":918},{},[],{"type":25,"tag":50,"props":920,"children":922},{"id":921},"自訂程式碼處理器",[923],{"type":30,"value":921},{"type":25,"tag":26,"props":925,"children":926},{},[927,929,935,937,946,948,955],{"type":30,"value":928},"在 Nuxt Content v1 中有一個設定值",{"type":25,"tag":37,"props":930,"children":932},{"className":931},[],[933],{"type":30,"value":934},"markdown.highlighter",{"type":30,"value":936},"，可以",{"type":25,"tag":938,"props":939,"children":943},"a",{"href":940,"rel":941},"https://content.nuxt.com/v1/getting-started/configuration#markdownhighlighter",[942],"nofollow",[944],{"type":30,"value":945},"自己決定程式碼被解析後的外層 HTML 結構",{"type":30,"value":947},"，官方",{"type":25,"tag":938,"props":949,"children":952},{"href":950,"rel":951},"https://content.nuxt.com/v1/community/snippets#custom-highlighter",[942],[953],{"type":30,"value":954},"使用了 highlight.js 以及 shiki 作為示範",{"type":30,"value":956},"，看了看之後滿喜歡 shiki 的，所以就使用 shiki。",{"type":25,"tag":85,"props":958,"children":962},{"className":959,"code":960,"filename":42,"language":961,"meta":91,"style":91},"language-js shiki shiki-themes github-dark","import shiki from 'shiki'\n\nexport default {\n  content: {\n    markdown: {\n      async highlighter() {\n        const highlighter = await shiki.getHighlighter({\n          theme: 'nord',\n        })\n\n        return (rawCode, lang, { fileName }, { h, node, u }) => {\n          const highlightedCode = highlighter.codeToHtml(rawCode, lang)\n\n          const children = []\n          children.push(u('raw', highlightedCode))\n\n          return h(\n            node,\n            'article-code',\n            {\n              className: 'nuxt-content-highlight',\n              fileName,\n              lang,\n            },\n            children\n          )\n        }\n      },\n    },\n  },\n}\n","js",[963],{"type":25,"tag":37,"props":964,"children":965},{"__ignoreMap":91},[966,989,996,1011,1019,1027,1044,1079,1097,1105,1112,1192,1224,1231,1252,1287,1294,1312,1320,1332,1340,1357,1365,1373,1381,1389,1397,1405,1413,1420,1427],{"type":25,"tag":97,"props":967,"children":968},{"class":99,"line":100},[969,974,979,984],{"type":25,"tag":97,"props":970,"children":971},{"style":398},[972],{"type":30,"value":973},"import",{"type":25,"tag":97,"props":975,"children":976},{"style":104},[977],{"type":30,"value":978}," shiki ",{"type":25,"tag":97,"props":980,"children":981},{"style":398},[982],{"type":30,"value":983},"from",{"type":25,"tag":97,"props":985,"children":986},{"style":185},[987],{"type":30,"value":988}," 'shiki'\n",{"type":25,"tag":97,"props":990,"children":991},{"class":99,"line":121},[992],{"type":25,"tag":97,"props":993,"children":994},{"emptyLinePlaceholder":248},[995],{"type":30,"value":251},{"type":25,"tag":97,"props":997,"children":998},{"class":99,"line":138},[999,1003,1007],{"type":25,"tag":97,"props":1000,"children":1001},{"style":398},[1002],{"type":30,"value":401},{"type":25,"tag":97,"props":1004,"children":1005},{"style":398},[1006],{"type":30,"value":406},{"type":25,"tag":97,"props":1008,"children":1009},{"style":104},[1010],{"type":30,"value":411},{"type":25,"tag":97,"props":1012,"children":1013},{"class":99,"line":155},[1014],{"type":25,"tag":97,"props":1015,"children":1016},{"style":104},[1017],{"type":30,"value":1018},"  content: {\n",{"type":25,"tag":97,"props":1020,"children":1021},{"class":99,"line":227},[1022],{"type":25,"tag":97,"props":1023,"children":1024},{"style":104},[1025],{"type":30,"value":1026},"    markdown: {\n",{"type":25,"tag":97,"props":1028,"children":1029},{"class":99,"line":244},[1030,1035,1040],{"type":25,"tag":97,"props":1031,"children":1032},{"style":398},[1033],{"type":30,"value":1034},"      async",{"type":25,"tag":97,"props":1036,"children":1037},{"style":174},[1038],{"type":30,"value":1039}," highlighter",{"type":25,"tag":97,"props":1041,"children":1042},{"style":104},[1043],{"type":30,"value":434},{"type":25,"tag":97,"props":1045,"children":1046},{"class":99,"line":254},[1047,1051,1055,1059,1064,1069,1074],{"type":25,"tag":97,"props":1048,"children":1049},{"style":398},[1050],{"type":30,"value":539},{"type":25,"tag":97,"props":1052,"children":1053},{"style":451},[1054],{"type":30,"value":1039},{"type":25,"tag":97,"props":1056,"children":1057},{"style":398},[1058],{"type":30,"value":549},{"type":25,"tag":97,"props":1060,"children":1061},{"style":398},[1062],{"type":30,"value":1063}," await",{"type":25,"tag":97,"props":1065,"children":1066},{"style":104},[1067],{"type":30,"value":1068}," shiki.",{"type":25,"tag":97,"props":1070,"children":1071},{"style":174},[1072],{"type":30,"value":1073},"getHighlighter",{"type":25,"tag":97,"props":1075,"children":1076},{"style":104},[1077],{"type":30,"value":1078},"({\n",{"type":25,"tag":97,"props":1080,"children":1081},{"class":99,"line":284},[1082,1087,1092],{"type":25,"tag":97,"props":1083,"children":1084},{"style":104},[1085],{"type":30,"value":1086},"          theme: ",{"type":25,"tag":97,"props":1088,"children":1089},{"style":185},[1090],{"type":30,"value":1091},"'nord'",{"type":25,"tag":97,"props":1093,"children":1094},{"style":104},[1095],{"type":30,"value":1096},",\n",{"type":25,"tag":97,"props":1098,"children":1099},{"class":99,"line":294},[1100],{"type":25,"tag":97,"props":1101,"children":1102},{"style":104},[1103],{"type":30,"value":1104},"        })\n",{"type":25,"tag":97,"props":1106,"children":1107},{"class":99,"line":319},[1108],{"type":25,"tag":97,"props":1109,"children":1110},{"emptyLinePlaceholder":248},[1111],{"type":30,"value":251},{"type":25,"tag":97,"props":1113,"children":1114},{"class":99,"line":335},[1115,1120,1124,1130,1135,1140,1145,1150,1155,1160,1164,1169,1173,1178,1183,1188],{"type":25,"tag":97,"props":1116,"children":1117},{"style":398},[1118],{"type":30,"value":1119},"        return",{"type":25,"tag":97,"props":1121,"children":1122},{"style":104},[1123],{"type":30,"value":448},{"type":25,"tag":97,"props":1125,"children":1127},{"style":1126},"--shiki-default:#FFAB70",[1128],{"type":30,"value":1129},"rawCode",{"type":25,"tag":97,"props":1131,"children":1132},{"style":104},[1133],{"type":30,"value":1134},", ",{"type":25,"tag":97,"props":1136,"children":1137},{"style":1126},[1138],{"type":30,"value":1139},"lang",{"type":25,"tag":97,"props":1141,"children":1142},{"style":104},[1143],{"type":30,"value":1144},", { ",{"type":25,"tag":97,"props":1146,"children":1147},{"style":1126},[1148],{"type":30,"value":1149},"fileName",{"type":25,"tag":97,"props":1151,"children":1152},{"style":104},[1153],{"type":30,"value":1154}," }, { ",{"type":25,"tag":97,"props":1156,"children":1157},{"style":1126},[1158],{"type":30,"value":1159},"h",{"type":25,"tag":97,"props":1161,"children":1162},{"style":104},[1163],{"type":30,"value":1134},{"type":25,"tag":97,"props":1165,"children":1166},{"style":1126},[1167],{"type":30,"value":1168},"node",{"type":25,"tag":97,"props":1170,"children":1171},{"style":104},[1172],{"type":30,"value":1134},{"type":25,"tag":97,"props":1174,"children":1175},{"style":1126},[1176],{"type":30,"value":1177},"u",{"type":25,"tag":97,"props":1179,"children":1180},{"style":104},[1181],{"type":30,"value":1182}," }) ",{"type":25,"tag":97,"props":1184,"children":1185},{"style":398},[1186],{"type":30,"value":1187},"=>",{"type":25,"tag":97,"props":1189,"children":1190},{"style":104},[1191],{"type":30,"value":411},{"type":25,"tag":97,"props":1193,"children":1194},{"class":99,"line":352},[1195,1200,1205,1209,1214,1219],{"type":25,"tag":97,"props":1196,"children":1197},{"style":398},[1198],{"type":30,"value":1199},"          const",{"type":25,"tag":97,"props":1201,"children":1202},{"style":451},[1203],{"type":30,"value":1204}," highlightedCode",{"type":25,"tag":97,"props":1206,"children":1207},{"style":398},[1208],{"type":30,"value":549},{"type":25,"tag":97,"props":1210,"children":1211},{"style":104},[1212],{"type":30,"value":1213}," highlighter.",{"type":25,"tag":97,"props":1215,"children":1216},{"style":174},[1217],{"type":30,"value":1218},"codeToHtml",{"type":25,"tag":97,"props":1220,"children":1221},{"style":104},[1222],{"type":30,"value":1223},"(rawCode, lang)\n",{"type":25,"tag":97,"props":1225,"children":1226},{"class":99,"line":369},[1227],{"type":25,"tag":97,"props":1228,"children":1229},{"emptyLinePlaceholder":248},[1230],{"type":30,"value":251},{"type":25,"tag":97,"props":1232,"children":1233},{"class":99,"line":377},[1234,1238,1243,1247],{"type":25,"tag":97,"props":1235,"children":1236},{"style":398},[1237],{"type":30,"value":1199},{"type":25,"tag":97,"props":1239,"children":1240},{"style":451},[1241],{"type":30,"value":1242}," children",{"type":25,"tag":97,"props":1244,"children":1245},{"style":398},[1246],{"type":30,"value":549},{"type":25,"tag":97,"props":1248,"children":1249},{"style":104},[1250],{"type":30,"value":1251}," []\n",{"type":25,"tag":97,"props":1253,"children":1254},{"class":99,"line":394},[1255,1260,1265,1269,1273,1277,1282],{"type":25,"tag":97,"props":1256,"children":1257},{"style":104},[1258],{"type":30,"value":1259},"          children.",{"type":25,"tag":97,"props":1261,"children":1262},{"style":174},[1263],{"type":30,"value":1264},"push",{"type":25,"tag":97,"props":1266,"children":1267},{"style":104},[1268],{"type":30,"value":744},{"type":25,"tag":97,"props":1270,"children":1271},{"style":174},[1272],{"type":30,"value":1177},{"type":25,"tag":97,"props":1274,"children":1275},{"style":104},[1276],{"type":30,"value":744},{"type":25,"tag":97,"props":1278,"children":1279},{"style":185},[1280],{"type":30,"value":1281},"'raw'",{"type":25,"tag":97,"props":1283,"children":1284},{"style":104},[1285],{"type":30,"value":1286},", highlightedCode))\n",{"type":25,"tag":97,"props":1288,"children":1289},{"class":99,"line":414},[1290],{"type":25,"tag":97,"props":1291,"children":1292},{"emptyLinePlaceholder":248},[1293],{"type":30,"value":251},{"type":25,"tag":97,"props":1295,"children":1296},{"class":99,"line":423},[1297,1302,1307],{"type":25,"tag":97,"props":1298,"children":1299},{"style":398},[1300],{"type":30,"value":1301},"          return",{"type":25,"tag":97,"props":1303,"children":1304},{"style":174},[1305],{"type":30,"value":1306}," h",{"type":25,"tag":97,"props":1308,"children":1309},{"style":104},[1310],{"type":30,"value":1311},"(\n",{"type":25,"tag":97,"props":1313,"children":1314},{"class":99,"line":437},[1315],{"type":25,"tag":97,"props":1316,"children":1317},{"style":104},[1318],{"type":30,"value":1319},"            node,\n",{"type":25,"tag":97,"props":1321,"children":1322},{"class":99,"line":467},[1323,1328],{"type":25,"tag":97,"props":1324,"children":1325},{"style":185},[1326],{"type":30,"value":1327},"            'article-code'",{"type":25,"tag":97,"props":1329,"children":1330},{"style":104},[1331],{"type":30,"value":1096},{"type":25,"tag":97,"props":1333,"children":1334},{"class":99,"line":475},[1335],{"type":25,"tag":97,"props":1336,"children":1337},{"style":104},[1338],{"type":30,"value":1339},"            {\n",{"type":25,"tag":97,"props":1341,"children":1342},{"class":99,"line":512},[1343,1348,1353],{"type":25,"tag":97,"props":1344,"children":1345},{"style":104},[1346],{"type":30,"value":1347},"              className: ",{"type":25,"tag":97,"props":1349,"children":1350},{"style":185},[1351],{"type":30,"value":1352},"'nuxt-content-highlight'",{"type":25,"tag":97,"props":1354,"children":1355},{"style":104},[1356],{"type":30,"value":1096},{"type":25,"tag":97,"props":1358,"children":1359},{"class":99,"line":520},[1360],{"type":25,"tag":97,"props":1361,"children":1362},{"style":104},[1363],{"type":30,"value":1364},"              fileName,\n",{"type":25,"tag":97,"props":1366,"children":1367},{"class":99,"line":533},[1368],{"type":25,"tag":97,"props":1369,"children":1370},{"style":104},[1371],{"type":30,"value":1372},"              lang,\n",{"type":25,"tag":97,"props":1374,"children":1375},{"class":99,"line":557},[1376],{"type":25,"tag":97,"props":1377,"children":1378},{"style":104},[1379],{"type":30,"value":1380},"            },\n",{"type":25,"tag":97,"props":1382,"children":1383},{"class":99,"line":576},[1384],{"type":25,"tag":97,"props":1385,"children":1386},{"style":104},[1387],{"type":30,"value":1388},"            children\n",{"type":25,"tag":97,"props":1390,"children":1391},{"class":99,"line":594},[1392],{"type":25,"tag":97,"props":1393,"children":1394},{"style":104},[1395],{"type":30,"value":1396},"          )\n",{"type":25,"tag":97,"props":1398,"children":1399},{"class":99,"line":626},[1400],{"type":25,"tag":97,"props":1401,"children":1402},{"style":104},[1403],{"type":30,"value":1404},"        }\n",{"type":25,"tag":97,"props":1406,"children":1407},{"class":99,"line":645},[1408],{"type":25,"tag":97,"props":1409,"children":1410},{"style":104},[1411],{"type":30,"value":1412},"      },\n",{"type":25,"tag":97,"props":1414,"children":1415},{"class":99,"line":653},[1416],{"type":25,"tag":97,"props":1417,"children":1418},{"style":104},[1419],{"type":30,"value":788},{"type":25,"tag":97,"props":1421,"children":1422},{"class":99,"line":684},[1423],{"type":25,"tag":97,"props":1424,"children":1425},{"style":104},[1426],{"type":30,"value":797},{"type":25,"tag":97,"props":1428,"children":1429},{"class":99,"line":702},[1430],{"type":25,"tag":97,"props":1431,"children":1432},{"style":104},[1433],{"type":30,"value":806},{"type":25,"tag":26,"props":1435,"children":1436},{},[1437,1439,1444,1446,1451],{"type":30,"value":1438},"在這邊解析完後產生的 html 會再被 Nuxt 處理，所以可以插入 vue component，也可以直接把",{"type":25,"tag":37,"props":1440,"children":1442},{"className":1441},[],[1443],{"type":30,"value":1149},{"type":30,"value":1445},"或",{"type":25,"tag":37,"props":1447,"children":1449},{"className":1448},[],[1450],{"type":30,"value":1139},{"type":30,"value":1452},"作為 props 傳遞給元件，自訂性更高。",{"type":25,"tag":46,"props":1454,"children":1455},{},[],{"type":25,"tag":26,"props":1457,"children":1458},{},[1459],{"type":30,"value":1460},"大概就是這樣了！最一開始是想說有沒有內建的方式可以簡單實作這功能，查了一下好像沒查到，所以就自己動手搞了，幸好也沒有太複雜。",{"type":25,"tag":1462,"props":1463,"children":1464},"style",{},[1465],{"type":30,"value":1466},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":91,"searchDepth":121,"depth":121,"links":1468},[1469,1470],{"id":52,"depth":121,"text":52},{"id":921,"depth":121,"text":921},[1472,1486,1500],{"title":1473,"description":1474,"img":1475,"tags":1476,"readingTime":1479,"createdAt":1484,"updatedAt":1484,"slug":1485},"部落格Nuxt 2升級Nuxt 3（三）：Nuxt Content v1 → v2","在初步修改非模組的設定值之後，接著就要開始著手模組的升級，這部份是連同改寫為 composition api 一起做的，畢竟不可能只升級特定模組的用法而不去動到其他程式碼，但為了讓文章閱讀容易，就還是分模組來紀錄。","924/Ia2nWi.png",[1477,15,90,16,1478,18],"blog","nuxt3",{"text":1480,"minutes":1481,"time":1482,"words":1483},"7 min read",6.025,361500,1205,"2024-01-24T07:26:04.000Z","nuxt2_to_nuxt3_blog_3_modules_content",{"title":1487,"description":1488,"img":1475,"tags":1489,"readingTime":1494,"createdAt":1498,"updatedAt":1484,"slug":1499},"部落格Nuxt 2升級Nuxt 3（一）：bootstrapVue置換成自製的bootrap5元件","如之前規劃，部落格升級 Nuxt3 的第一步是先把 bootstrapVue 抽換成自己實做的 bootstrap5。這篇是紀錄過程中覺得特別困難或是需要研究的部份。",[1477,15,90,16,1478,1490,1491,1492,1493],"bootstrapVue","bootstrap 4","bootstrap 5","bootstrap",{"text":8,"minutes":1495,"time":1496,"words":1497},3.53,211800,706,"2024-01-23T05:33:23.000Z","nuxt2_to_nuxt3_blog_1_ui",{"title":1501,"description":1502,"img":1475,"tags":1503,"readingTime":1504,"createdAt":1498,"updatedAt":1484,"slug":1509},"部落格Nuxt 2升級Nuxt 3：前言","從去年年初開始建置的這個部落格網站，邊寫文章的同時陸陸續續補上功能後，大概到上個月才終於像是有個部落格的樣子。但由於 Nuxt2 即將在 2024/06/30 停止官方支援，而作為基底的 Vue2 更是在 2023/12/31 已停止官方支援，所以……想說要做的新功能可能先放著，先把部落格從 Nuxt2 升級到 Nuxt3 比較好。",[1477,15,90,16,1478],{"text":1505,"minutes":1506,"time":1507,"words":1508},"5 min read",4.28,256800,856,"nuxt2_to_nuxt3_blog_0_intro",1734084206129]