[{"data":1,"prerenderedAt":1496},["ShallowReactive",2],{"nuxt2_content_code_block_copy_paste":3,"Related_nuxt2_content_code_block_copy_paste":1457},{"title":4,"description":5,"img":6,"readingTime":7,"createdAt":12,"updatedAt":12,"slug":13,"tags":14,"category":20,"body":21},"在Nuxt Content v1中實現程式碼區塊複製貼上功能","用 Nuxt Content 作為部落格的基底讓我最開心的部份，就是 markdown 中的程式碼區塊了，自動上色、格式化、支援的語言非常多，這是很多部落格平台都無法提供的，但若需要程式碼複製貼上功能，就得自己額外處理。","923/YRlYZO.jpg",{"text":8,"minutes":9,"time":10,"words":11},"4 min read",3.32,199200,664,"2023-12-12T05:50:50.000Z","nuxt2_content_code_block_copy_paste",[15,16,17,18,19],"nuxt","nuxt2","nuxt content v1","nuxt content","markdown","frontend",{"type":22,"children":23,"toc":1453},"root",[24,31,45,49,55,84,809,814,892,897,902,905,910,943,1420,1439,1442,1447],{"type":25,"tag":26,"props":27,"children":28},"element","p",{},[29],{"type":30,"value":5},"text",{"type":25,"tag":26,"props":32,"children":33},{},[34,36,43],{"type":30,"value":35},"這篇文章紀錄了自己從查資料最後搞出來的一些過程，最後是透過在",{"type":25,"tag":37,"props":38,"children":40},"code",{"className":39},[],[41],{"type":30,"value":42},"nuxt.config.js",{"type":30,"value":44},"中自訂程式碼區塊處理器來實現。",{"type":25,"tag":46,"props":47,"children":48},"hr",{},[],{"type":25,"tag":50,"props":51,"children":53},"h2",{"id":52},"用元件把程式碼區塊包起來",[54],{"type":30,"value":52},{"type":25,"tag":26,"props":56,"children":57},{},[58,60,66,68,74,76,82],{"type":30,"value":59},"初步的想法是用一個元件在 markdown 中把程式碼區塊包起來，再把",{"type":25,"tag":37,"props":61,"children":63},{"className":62},[],[64],{"type":30,"value":65},"slot",{"type":30,"value":67},"外面那層",{"type":25,"tag":37,"props":69,"children":71},{"className":70},[],[72],{"type":30,"value":73},"div",{"type":30,"value":75},"填上",{"type":25,"tag":37,"props":77,"children":79},{"className":78},[],[80],{"type":30,"value":81},"ref",{"type":30,"value":83},"，這樣就可以去抓裡面的文字內容拿來寫入剪貼簿。自己寫出來大概是長這樣：",{"type":25,"tag":85,"props":86,"children":92},"pre",{"className":87,"code":88,"filename":89,"language":90,"meta":91,"style":91},"language-vue shiki shiki-themes github-dark","\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cdiv>\n      \u003Cbutton @click=\"copyCode\" variant=\"link\">複製程式碼\u003C/button>\n    \u003C/div>\n\n    \u003Cdiv ref=\"code\">\n      \u003C!-- markdown中程式碼嵌入的地方 -->\n      \u003Cslot>\u003C/slot>\n    \u003C/div>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript>\nexport default {\n  methods: {\n    copyCode() {\n      if (this.copied) return\n\n      const { code } = this.$refs\n\n      if (navigator.clipboard?.writeText) {\n        const toCopyCode = code.innerText\n        navigator.clipboard.writeText(toCopyCode)\n      } else {\n        const range = document.createRange()\n        range.selectNode(code)\n\n        const selection = window.getSelection()\n        selection.removeAllRanges()\n        selection.addRange(range)\n\n        document.execCommand('copy')\n        selection.removeAllRanges()\n      }\n    },\n  },\n}\n\u003C/script>\n","article-code.vue","vue","",[93],{"type":25,"tag":37,"props":94,"children":95},{"__ignoreMap":91},[96,119,136,153,211,228,238,268,278,303,319,336,353,361,378,398,407,421,451,459,496,504,517,541,560,578,610,629,637,668,686,704,712,741,757,766,775,784,793],{"type":25,"tag":97,"props":98,"children":101},"span",{"class":99,"line":100},"line",1,[102,108,114],{"type":25,"tag":97,"props":103,"children":105},{"style":104},"--shiki-default:#E1E4E8",[106],{"type":30,"value":107},"\u003C",{"type":25,"tag":97,"props":109,"children":111},{"style":110},"--shiki-default:#85E89D",[112],{"type":30,"value":113},"template",{"type":25,"tag":97,"props":115,"children":116},{"style":104},[117],{"type":30,"value":118},">\n",{"type":25,"tag":97,"props":120,"children":122},{"class":99,"line":121},2,[123,128,132],{"type":25,"tag":97,"props":124,"children":125},{"style":104},[126],{"type":30,"value":127},"  \u003C",{"type":25,"tag":97,"props":129,"children":130},{"style":110},[131],{"type":30,"value":73},{"type":25,"tag":97,"props":133,"children":134},{"style":104},[135],{"type":30,"value":118},{"type":25,"tag":97,"props":137,"children":139},{"class":99,"line":138},3,[140,145,149],{"type":25,"tag":97,"props":141,"children":142},{"style":104},[143],{"type":30,"value":144},"    \u003C",{"type":25,"tag":97,"props":146,"children":147},{"style":110},[148],{"type":30,"value":73},{"type":25,"tag":97,"props":150,"children":151},{"style":104},[152],{"type":30,"value":118},{"type":25,"tag":97,"props":154,"children":156},{"class":99,"line":155},4,[157,162,167,173,178,184,189,193,198,203,207],{"type":25,"tag":97,"props":158,"children":159},{"style":104},[160],{"type":30,"value":161},"      \u003C",{"type":25,"tag":97,"props":163,"children":164},{"style":110},[165],{"type":30,"value":166},"button",{"type":25,"tag":97,"props":168,"children":170},{"style":169},"--shiki-default:#B392F0",[171],{"type":30,"value":172}," @click",{"type":25,"tag":97,"props":174,"children":175},{"style":104},[176],{"type":30,"value":177},"=",{"type":25,"tag":97,"props":179,"children":181},{"style":180},"--shiki-default:#9ECBFF",[182],{"type":30,"value":183},"\"copyCode\"",{"type":25,"tag":97,"props":185,"children":186},{"style":169},[187],{"type":30,"value":188}," variant",{"type":25,"tag":97,"props":190,"children":191},{"style":104},[192],{"type":30,"value":177},{"type":25,"tag":97,"props":194,"children":195},{"style":180},[196],{"type":30,"value":197},"\"link\"",{"type":25,"tag":97,"props":199,"children":200},{"style":104},[201],{"type":30,"value":202},">複製程式碼\u003C/",{"type":25,"tag":97,"props":204,"children":205},{"style":110},[206],{"type":30,"value":166},{"type":25,"tag":97,"props":208,"children":209},{"style":104},[210],{"type":30,"value":118},{"type":25,"tag":97,"props":212,"children":214},{"class":99,"line":213},5,[215,220,224],{"type":25,"tag":97,"props":216,"children":217},{"style":104},[218],{"type":30,"value":219},"    \u003C/",{"type":25,"tag":97,"props":221,"children":222},{"style":110},[223],{"type":30,"value":73},{"type":25,"tag":97,"props":225,"children":226},{"style":104},[227],{"type":30,"value":118},{"type":25,"tag":97,"props":229,"children":231},{"class":99,"line":230},6,[232],{"type":25,"tag":97,"props":233,"children":235},{"emptyLinePlaceholder":234},true,[236],{"type":30,"value":237},"\n",{"type":25,"tag":97,"props":239,"children":241},{"class":99,"line":240},7,[242,246,250,255,259,264],{"type":25,"tag":97,"props":243,"children":244},{"style":104},[245],{"type":30,"value":144},{"type":25,"tag":97,"props":247,"children":248},{"style":110},[249],{"type":30,"value":73},{"type":25,"tag":97,"props":251,"children":252},{"style":169},[253],{"type":30,"value":254}," ref",{"type":25,"tag":97,"props":256,"children":257},{"style":104},[258],{"type":30,"value":177},{"type":25,"tag":97,"props":260,"children":261},{"style":180},[262],{"type":30,"value":263},"\"code\"",{"type":25,"tag":97,"props":265,"children":266},{"style":104},[267],{"type":30,"value":118},{"type":25,"tag":97,"props":269,"children":271},{"class":99,"line":270},8,[272],{"type":25,"tag":97,"props":273,"children":275},{"style":274},"--shiki-default:#6A737D",[276],{"type":30,"value":277},"      \u003C!-- markdown中程式碼嵌入的地方 -->\n",{"type":25,"tag":97,"props":279,"children":281},{"class":99,"line":280},9,[282,286,290,295,299],{"type":25,"tag":97,"props":283,"children":284},{"style":104},[285],{"type":30,"value":161},{"type":25,"tag":97,"props":287,"children":288},{"style":110},[289],{"type":30,"value":65},{"type":25,"tag":97,"props":291,"children":292},{"style":104},[293],{"type":30,"value":294},">\u003C/",{"type":25,"tag":97,"props":296,"children":297},{"style":110},[298],{"type":30,"value":65},{"type":25,"tag":97,"props":300,"children":301},{"style":104},[302],{"type":30,"value":118},{"type":25,"tag":97,"props":304,"children":306},{"class":99,"line":305},10,[307,311,315],{"type":25,"tag":97,"props":308,"children":309},{"style":104},[310],{"type":30,"value":219},{"type":25,"tag":97,"props":312,"children":313},{"style":110},[314],{"type":30,"value":73},{"type":25,"tag":97,"props":316,"children":317},{"style":104},[318],{"type":30,"value":118},{"type":25,"tag":97,"props":320,"children":322},{"class":99,"line":321},11,[323,328,332],{"type":25,"tag":97,"props":324,"children":325},{"style":104},[326],{"type":30,"value":327},"  \u003C/",{"type":25,"tag":97,"props":329,"children":330},{"style":110},[331],{"type":30,"value":73},{"type":25,"tag":97,"props":333,"children":334},{"style":104},[335],{"type":30,"value":118},{"type":25,"tag":97,"props":337,"children":339},{"class":99,"line":338},12,[340,345,349],{"type":25,"tag":97,"props":341,"children":342},{"style":104},[343],{"type":30,"value":344},"\u003C/",{"type":25,"tag":97,"props":346,"children":347},{"style":110},[348],{"type":30,"value":113},{"type":25,"tag":97,"props":350,"children":351},{"style":104},[352],{"type":30,"value":118},{"type":25,"tag":97,"props":354,"children":356},{"class":99,"line":355},13,[357],{"type":25,"tag":97,"props":358,"children":359},{"emptyLinePlaceholder":234},[360],{"type":30,"value":237},{"type":25,"tag":97,"props":362,"children":364},{"class":99,"line":363},14,[365,369,374],{"type":25,"tag":97,"props":366,"children":367},{"style":104},[368],{"type":30,"value":107},{"type":25,"tag":97,"props":370,"children":371},{"style":110},[372],{"type":30,"value":373},"script",{"type":25,"tag":97,"props":375,"children":376},{"style":104},[377],{"type":30,"value":118},{"type":25,"tag":97,"props":379,"children":381},{"class":99,"line":380},15,[382,388,393],{"type":25,"tag":97,"props":383,"children":385},{"style":384},"--shiki-default:#F97583",[386],{"type":30,"value":387},"export",{"type":25,"tag":97,"props":389,"children":390},{"style":384},[391],{"type":30,"value":392}," default",{"type":25,"tag":97,"props":394,"children":395},{"style":104},[396],{"type":30,"value":397}," {\n",{"type":25,"tag":97,"props":399,"children":401},{"class":99,"line":400},16,[402],{"type":25,"tag":97,"props":403,"children":404},{"style":104},[405],{"type":30,"value":406},"  methods: {\n",{"type":25,"tag":97,"props":408,"children":410},{"class":99,"line":409},17,[411,416],{"type":25,"tag":97,"props":412,"children":413},{"style":169},[414],{"type":30,"value":415},"    copyCode",{"type":25,"tag":97,"props":417,"children":418},{"style":104},[419],{"type":30,"value":420},"() {\n",{"type":25,"tag":97,"props":422,"children":424},{"class":99,"line":423},18,[425,430,435,441,446],{"type":25,"tag":97,"props":426,"children":427},{"style":384},[428],{"type":30,"value":429},"      if",{"type":25,"tag":97,"props":431,"children":432},{"style":104},[433],{"type":30,"value":434}," (",{"type":25,"tag":97,"props":436,"children":438},{"style":437},"--shiki-default:#79B8FF",[439],{"type":30,"value":440},"this",{"type":25,"tag":97,"props":442,"children":443},{"style":104},[444],{"type":30,"value":445},".copied) ",{"type":25,"tag":97,"props":447,"children":448},{"style":384},[449],{"type":30,"value":450},"return\n",{"type":25,"tag":97,"props":452,"children":454},{"class":99,"line":453},19,[455],{"type":25,"tag":97,"props":456,"children":457},{"emptyLinePlaceholder":234},[458],{"type":30,"value":237},{"type":25,"tag":97,"props":460,"children":462},{"class":99,"line":461},20,[463,468,473,477,482,486,491],{"type":25,"tag":97,"props":464,"children":465},{"style":384},[466],{"type":30,"value":467},"      const",{"type":25,"tag":97,"props":469,"children":470},{"style":104},[471],{"type":30,"value":472}," { ",{"type":25,"tag":97,"props":474,"children":475},{"style":437},[476],{"type":30,"value":37},{"type":25,"tag":97,"props":478,"children":479},{"style":104},[480],{"type":30,"value":481}," } ",{"type":25,"tag":97,"props":483,"children":484},{"style":384},[485],{"type":30,"value":177},{"type":25,"tag":97,"props":487,"children":488},{"style":437},[489],{"type":30,"value":490}," this",{"type":25,"tag":97,"props":492,"children":493},{"style":104},[494],{"type":30,"value":495},".$refs\n",{"type":25,"tag":97,"props":497,"children":499},{"class":99,"line":498},21,[500],{"type":25,"tag":97,"props":501,"children":502},{"emptyLinePlaceholder":234},[503],{"type":30,"value":237},{"type":25,"tag":97,"props":505,"children":507},{"class":99,"line":506},22,[508,512],{"type":25,"tag":97,"props":509,"children":510},{"style":384},[511],{"type":30,"value":429},{"type":25,"tag":97,"props":513,"children":514},{"style":104},[515],{"type":30,"value":516}," (navigator.clipboard?.writeText) {\n",{"type":25,"tag":97,"props":518,"children":520},{"class":99,"line":519},23,[521,526,531,536],{"type":25,"tag":97,"props":522,"children":523},{"style":384},[524],{"type":30,"value":525},"        const",{"type":25,"tag":97,"props":527,"children":528},{"style":437},[529],{"type":30,"value":530}," toCopyCode",{"type":25,"tag":97,"props":532,"children":533},{"style":384},[534],{"type":30,"value":535}," =",{"type":25,"tag":97,"props":537,"children":538},{"style":104},[539],{"type":30,"value":540}," code.innerText\n",{"type":25,"tag":97,"props":542,"children":544},{"class":99,"line":543},24,[545,550,555],{"type":25,"tag":97,"props":546,"children":547},{"style":104},[548],{"type":30,"value":549},"        navigator.clipboard.",{"type":25,"tag":97,"props":551,"children":552},{"style":169},[553],{"type":30,"value":554},"writeText",{"type":25,"tag":97,"props":556,"children":557},{"style":104},[558],{"type":30,"value":559},"(toCopyCode)\n",{"type":25,"tag":97,"props":561,"children":563},{"class":99,"line":562},25,[564,569,574],{"type":25,"tag":97,"props":565,"children":566},{"style":104},[567],{"type":30,"value":568},"      } ",{"type":25,"tag":97,"props":570,"children":571},{"style":384},[572],{"type":30,"value":573},"else",{"type":25,"tag":97,"props":575,"children":576},{"style":104},[577],{"type":30,"value":397},{"type":25,"tag":97,"props":579,"children":581},{"class":99,"line":580},26,[582,586,591,595,600,605],{"type":25,"tag":97,"props":583,"children":584},{"style":384},[585],{"type":30,"value":525},{"type":25,"tag":97,"props":587,"children":588},{"style":437},[589],{"type":30,"value":590}," range",{"type":25,"tag":97,"props":592,"children":593},{"style":384},[594],{"type":30,"value":535},{"type":25,"tag":97,"props":596,"children":597},{"style":104},[598],{"type":30,"value":599}," document.",{"type":25,"tag":97,"props":601,"children":602},{"style":169},[603],{"type":30,"value":604},"createRange",{"type":25,"tag":97,"props":606,"children":607},{"style":104},[608],{"type":30,"value":609},"()\n",{"type":25,"tag":97,"props":611,"children":613},{"class":99,"line":612},27,[614,619,624],{"type":25,"tag":97,"props":615,"children":616},{"style":104},[617],{"type":30,"value":618},"        range.",{"type":25,"tag":97,"props":620,"children":621},{"style":169},[622],{"type":30,"value":623},"selectNode",{"type":25,"tag":97,"props":625,"children":626},{"style":104},[627],{"type":30,"value":628},"(code)\n",{"type":25,"tag":97,"props":630,"children":632},{"class":99,"line":631},28,[633],{"type":25,"tag":97,"props":634,"children":635},{"emptyLinePlaceholder":234},[636],{"type":30,"value":237},{"type":25,"tag":97,"props":638,"children":640},{"class":99,"line":639},29,[641,645,650,654,659,664],{"type":25,"tag":97,"props":642,"children":643},{"style":384},[644],{"type":30,"value":525},{"type":25,"tag":97,"props":646,"children":647},{"style":437},[648],{"type":30,"value":649}," selection",{"type":25,"tag":97,"props":651,"children":652},{"style":384},[653],{"type":30,"value":535},{"type":25,"tag":97,"props":655,"children":656},{"style":104},[657],{"type":30,"value":658}," window.",{"type":25,"tag":97,"props":660,"children":661},{"style":169},[662],{"type":30,"value":663},"getSelection",{"type":25,"tag":97,"props":665,"children":666},{"style":104},[667],{"type":30,"value":609},{"type":25,"tag":97,"props":669,"children":671},{"class":99,"line":670},30,[672,677,682],{"type":25,"tag":97,"props":673,"children":674},{"style":104},[675],{"type":30,"value":676},"        selection.",{"type":25,"tag":97,"props":678,"children":679},{"style":169},[680],{"type":30,"value":681},"removeAllRanges",{"type":25,"tag":97,"props":683,"children":684},{"style":104},[685],{"type":30,"value":609},{"type":25,"tag":97,"props":687,"children":689},{"class":99,"line":688},31,[690,694,699],{"type":25,"tag":97,"props":691,"children":692},{"style":104},[693],{"type":30,"value":676},{"type":25,"tag":97,"props":695,"children":696},{"style":169},[697],{"type":30,"value":698},"addRange",{"type":25,"tag":97,"props":700,"children":701},{"style":104},[702],{"type":30,"value":703},"(range)\n",{"type":25,"tag":97,"props":705,"children":707},{"class":99,"line":706},32,[708],{"type":25,"tag":97,"props":709,"children":710},{"emptyLinePlaceholder":234},[711],{"type":30,"value":237},{"type":25,"tag":97,"props":713,"children":715},{"class":99,"line":714},33,[716,721,726,731,736],{"type":25,"tag":97,"props":717,"children":718},{"style":104},[719],{"type":30,"value":720},"        document.",{"type":25,"tag":97,"props":722,"children":723},{"style":169},[724],{"type":30,"value":725},"execCommand",{"type":25,"tag":97,"props":727,"children":728},{"style":104},[729],{"type":30,"value":730},"(",{"type":25,"tag":97,"props":732,"children":733},{"style":180},[734],{"type":30,"value":735},"'copy'",{"type":25,"tag":97,"props":737,"children":738},{"style":104},[739],{"type":30,"value":740},")\n",{"type":25,"tag":97,"props":742,"children":744},{"class":99,"line":743},34,[745,749,753],{"type":25,"tag":97,"props":746,"children":747},{"style":104},[748],{"type":30,"value":676},{"type":25,"tag":97,"props":750,"children":751},{"style":169},[752],{"type":30,"value":681},{"type":25,"tag":97,"props":754,"children":755},{"style":104},[756],{"type":30,"value":609},{"type":25,"tag":97,"props":758,"children":760},{"class":99,"line":759},35,[761],{"type":25,"tag":97,"props":762,"children":763},{"style":104},[764],{"type":30,"value":765},"      }\n",{"type":25,"tag":97,"props":767,"children":769},{"class":99,"line":768},36,[770],{"type":25,"tag":97,"props":771,"children":772},{"style":104},[773],{"type":30,"value":774},"    },\n",{"type":25,"tag":97,"props":776,"children":778},{"class":99,"line":777},37,[779],{"type":25,"tag":97,"props":780,"children":781},{"style":104},[782],{"type":30,"value":783},"  },\n",{"type":25,"tag":97,"props":785,"children":787},{"class":99,"line":786},38,[788],{"type":25,"tag":97,"props":789,"children":790},{"style":104},[791],{"type":30,"value":792},"}\n",{"type":25,"tag":97,"props":794,"children":796},{"class":99,"line":795},39,[797,801,805],{"type":25,"tag":97,"props":798,"children":799},{"style":104},[800],{"type":30,"value":344},{"type":25,"tag":97,"props":802,"children":803},{"style":110},[804],{"type":30,"value":373},{"type":25,"tag":97,"props":806,"children":807},{"style":104},[808],{"type":30,"value":118},{"type":25,"tag":26,"props":810,"children":811},{},[812],{"type":30,"value":813},"而把元件寫在 markdown 檔案會長這樣：",{"type":25,"tag":85,"props":815,"children":819},{"className":816,"code":817,"filename":818,"language":19,"meta":91,"style":91},"language-markdown shiki shiki-themes github-dark","\u003Carticle-code>\n\n```bash\nsudo dnf update -y\n```\n\n\u003C/article-code>\n","article.md",[820],{"type":25,"tag":37,"props":821,"children":822},{"__ignoreMap":91},[823,831,838,846,869,877,884],{"type":25,"tag":97,"props":824,"children":825},{"class":99,"line":100},[826],{"type":25,"tag":97,"props":827,"children":828},{"style":104},[829],{"type":30,"value":830},"\u003Carticle-code>\n",{"type":25,"tag":97,"props":832,"children":833},{"class":99,"line":121},[834],{"type":25,"tag":97,"props":835,"children":836},{"emptyLinePlaceholder":234},[837],{"type":30,"value":237},{"type":25,"tag":97,"props":839,"children":840},{"class":99,"line":138},[841],{"type":25,"tag":97,"props":842,"children":843},{"style":104},[844],{"type":30,"value":845},"```bash\n",{"type":25,"tag":97,"props":847,"children":848},{"class":99,"line":155},[849,854,859,864],{"type":25,"tag":97,"props":850,"children":851},{"style":169},[852],{"type":30,"value":853},"sudo",{"type":25,"tag":97,"props":855,"children":856},{"style":180},[857],{"type":30,"value":858}," dnf",{"type":25,"tag":97,"props":860,"children":861},{"style":180},[862],{"type":30,"value":863}," update",{"type":25,"tag":97,"props":865,"children":866},{"style":437},[867],{"type":30,"value":868}," -y\n",{"type":25,"tag":97,"props":870,"children":871},{"class":99,"line":213},[872],{"type":25,"tag":97,"props":873,"children":874},{"style":104},[875],{"type":30,"value":876},"```\n",{"type":25,"tag":97,"props":878,"children":879},{"class":99,"line":230},[880],{"type":25,"tag":97,"props":881,"children":882},{"emptyLinePlaceholder":234},[883],{"type":30,"value":237},{"type":25,"tag":97,"props":885,"children":886},{"class":99,"line":240},[887],{"type":25,"tag":97,"props":888,"children":889},{"style":104},[890],{"type":30,"value":891},"\u003C/article-code>\n",{"type":25,"tag":26,"props":893,"children":894},{},[895],{"type":30,"value":896},"可以看到因為 markdown 解析的關係，元件標籤與程式碼區塊之間上下還要再空一行。",{"type":25,"tag":26,"props":898,"children":899},{},[900],{"type":30,"value":901},"因為每次寫程式碼區塊的時候都要嵌入元件，若文章有大量或是連續的程式碼區塊，閱讀性會降低很多，最後看到頭很痛。後來就找找有沒有辦法在處理程式碼區塊產生 html 時，順便用元件包起來的方法，這樣就不用一直自己額外包起來，後來查到還真的有。",{"type":25,"tag":46,"props":903,"children":904},{},[],{"type":25,"tag":50,"props":906,"children":908},{"id":907},"自訂程式碼處理器",[909],{"type":30,"value":907},{"type":25,"tag":26,"props":911,"children":912},{},[913,915,921,923,932,934,941],{"type":30,"value":914},"在 Nuxt Content v1 中有一個設定值",{"type":25,"tag":37,"props":916,"children":918},{"className":917},[],[919],{"type":30,"value":920},"markdown.highlighter",{"type":30,"value":922},"，可以",{"type":25,"tag":924,"props":925,"children":929},"a",{"href":926,"rel":927},"https://content.nuxt.com/v1/getting-started/configuration#markdownhighlighter",[928],"nofollow",[930],{"type":30,"value":931},"自己決定程式碼被解析後的外層 HTML 結構",{"type":30,"value":933},"，官方",{"type":25,"tag":924,"props":935,"children":938},{"href":936,"rel":937},"https://content.nuxt.com/v1/community/snippets#custom-highlighter",[928],[939],{"type":30,"value":940},"使用了 highlight.js 以及 shiki 作為示範",{"type":30,"value":942},"，看了看之後滿喜歡 shiki 的，所以就使用 shiki。",{"type":25,"tag":85,"props":944,"children":948},{"className":945,"code":946,"filename":42,"language":947,"meta":91,"style":91},"language-js shiki shiki-themes github-dark","import shiki from 'shiki'\n\nexport default {\n  content: {\n    markdown: {\n      async highlighter() {\n        const highlighter = await shiki.getHighlighter({\n          theme: 'nord',\n        })\n\n        return (rawCode, lang, { fileName }, { h, node, u }) => {\n          const highlightedCode = highlighter.codeToHtml(rawCode, lang)\n\n          const children = []\n          children.push(u('raw', highlightedCode))\n\n          return h(\n            node,\n            'article-code',\n            {\n              className: 'nuxt-content-highlight',\n              fileName,\n              lang,\n            },\n            children\n          )\n        }\n      },\n    },\n  },\n}\n","js",[949],{"type":25,"tag":37,"props":950,"children":951},{"__ignoreMap":91},[952,975,982,997,1005,1013,1030,1065,1083,1091,1098,1178,1210,1217,1238,1273,1280,1298,1306,1318,1326,1343,1351,1359,1367,1375,1383,1391,1399,1406,1413],{"type":25,"tag":97,"props":953,"children":954},{"class":99,"line":100},[955,960,965,970],{"type":25,"tag":97,"props":956,"children":957},{"style":384},[958],{"type":30,"value":959},"import",{"type":25,"tag":97,"props":961,"children":962},{"style":104},[963],{"type":30,"value":964}," shiki ",{"type":25,"tag":97,"props":966,"children":967},{"style":384},[968],{"type":30,"value":969},"from",{"type":25,"tag":97,"props":971,"children":972},{"style":180},[973],{"type":30,"value":974}," 'shiki'\n",{"type":25,"tag":97,"props":976,"children":977},{"class":99,"line":121},[978],{"type":25,"tag":97,"props":979,"children":980},{"emptyLinePlaceholder":234},[981],{"type":30,"value":237},{"type":25,"tag":97,"props":983,"children":984},{"class":99,"line":138},[985,989,993],{"type":25,"tag":97,"props":986,"children":987},{"style":384},[988],{"type":30,"value":387},{"type":25,"tag":97,"props":990,"children":991},{"style":384},[992],{"type":30,"value":392},{"type":25,"tag":97,"props":994,"children":995},{"style":104},[996],{"type":30,"value":397},{"type":25,"tag":97,"props":998,"children":999},{"class":99,"line":155},[1000],{"type":25,"tag":97,"props":1001,"children":1002},{"style":104},[1003],{"type":30,"value":1004},"  content: {\n",{"type":25,"tag":97,"props":1006,"children":1007},{"class":99,"line":213},[1008],{"type":25,"tag":97,"props":1009,"children":1010},{"style":104},[1011],{"type":30,"value":1012},"    markdown: {\n",{"type":25,"tag":97,"props":1014,"children":1015},{"class":99,"line":230},[1016,1021,1026],{"type":25,"tag":97,"props":1017,"children":1018},{"style":384},[1019],{"type":30,"value":1020},"      async",{"type":25,"tag":97,"props":1022,"children":1023},{"style":169},[1024],{"type":30,"value":1025}," highlighter",{"type":25,"tag":97,"props":1027,"children":1028},{"style":104},[1029],{"type":30,"value":420},{"type":25,"tag":97,"props":1031,"children":1032},{"class":99,"line":240},[1033,1037,1041,1045,1050,1055,1060],{"type":25,"tag":97,"props":1034,"children":1035},{"style":384},[1036],{"type":30,"value":525},{"type":25,"tag":97,"props":1038,"children":1039},{"style":437},[1040],{"type":30,"value":1025},{"type":25,"tag":97,"props":1042,"children":1043},{"style":384},[1044],{"type":30,"value":535},{"type":25,"tag":97,"props":1046,"children":1047},{"style":384},[1048],{"type":30,"value":1049}," await",{"type":25,"tag":97,"props":1051,"children":1052},{"style":104},[1053],{"type":30,"value":1054}," shiki.",{"type":25,"tag":97,"props":1056,"children":1057},{"style":169},[1058],{"type":30,"value":1059},"getHighlighter",{"type":25,"tag":97,"props":1061,"children":1062},{"style":104},[1063],{"type":30,"value":1064},"({\n",{"type":25,"tag":97,"props":1066,"children":1067},{"class":99,"line":270},[1068,1073,1078],{"type":25,"tag":97,"props":1069,"children":1070},{"style":104},[1071],{"type":30,"value":1072},"          theme: ",{"type":25,"tag":97,"props":1074,"children":1075},{"style":180},[1076],{"type":30,"value":1077},"'nord'",{"type":25,"tag":97,"props":1079,"children":1080},{"style":104},[1081],{"type":30,"value":1082},",\n",{"type":25,"tag":97,"props":1084,"children":1085},{"class":99,"line":280},[1086],{"type":25,"tag":97,"props":1087,"children":1088},{"style":104},[1089],{"type":30,"value":1090},"        })\n",{"type":25,"tag":97,"props":1092,"children":1093},{"class":99,"line":305},[1094],{"type":25,"tag":97,"props":1095,"children":1096},{"emptyLinePlaceholder":234},[1097],{"type":30,"value":237},{"type":25,"tag":97,"props":1099,"children":1100},{"class":99,"line":321},[1101,1106,1110,1116,1121,1126,1131,1136,1141,1146,1150,1155,1159,1164,1169,1174],{"type":25,"tag":97,"props":1102,"children":1103},{"style":384},[1104],{"type":30,"value":1105},"        return",{"type":25,"tag":97,"props":1107,"children":1108},{"style":104},[1109],{"type":30,"value":434},{"type":25,"tag":97,"props":1111,"children":1113},{"style":1112},"--shiki-default:#FFAB70",[1114],{"type":30,"value":1115},"rawCode",{"type":25,"tag":97,"props":1117,"children":1118},{"style":104},[1119],{"type":30,"value":1120},", ",{"type":25,"tag":97,"props":1122,"children":1123},{"style":1112},[1124],{"type":30,"value":1125},"lang",{"type":25,"tag":97,"props":1127,"children":1128},{"style":104},[1129],{"type":30,"value":1130},", { ",{"type":25,"tag":97,"props":1132,"children":1133},{"style":1112},[1134],{"type":30,"value":1135},"fileName",{"type":25,"tag":97,"props":1137,"children":1138},{"style":104},[1139],{"type":30,"value":1140}," }, { ",{"type":25,"tag":97,"props":1142,"children":1143},{"style":1112},[1144],{"type":30,"value":1145},"h",{"type":25,"tag":97,"props":1147,"children":1148},{"style":104},[1149],{"type":30,"value":1120},{"type":25,"tag":97,"props":1151,"children":1152},{"style":1112},[1153],{"type":30,"value":1154},"node",{"type":25,"tag":97,"props":1156,"children":1157},{"style":104},[1158],{"type":30,"value":1120},{"type":25,"tag":97,"props":1160,"children":1161},{"style":1112},[1162],{"type":30,"value":1163},"u",{"type":25,"tag":97,"props":1165,"children":1166},{"style":104},[1167],{"type":30,"value":1168}," }) ",{"type":25,"tag":97,"props":1170,"children":1171},{"style":384},[1172],{"type":30,"value":1173},"=>",{"type":25,"tag":97,"props":1175,"children":1176},{"style":104},[1177],{"type":30,"value":397},{"type":25,"tag":97,"props":1179,"children":1180},{"class":99,"line":338},[1181,1186,1191,1195,1200,1205],{"type":25,"tag":97,"props":1182,"children":1183},{"style":384},[1184],{"type":30,"value":1185},"          const",{"type":25,"tag":97,"props":1187,"children":1188},{"style":437},[1189],{"type":30,"value":1190}," highlightedCode",{"type":25,"tag":97,"props":1192,"children":1193},{"style":384},[1194],{"type":30,"value":535},{"type":25,"tag":97,"props":1196,"children":1197},{"style":104},[1198],{"type":30,"value":1199}," highlighter.",{"type":25,"tag":97,"props":1201,"children":1202},{"style":169},[1203],{"type":30,"value":1204},"codeToHtml",{"type":25,"tag":97,"props":1206,"children":1207},{"style":104},[1208],{"type":30,"value":1209},"(rawCode, lang)\n",{"type":25,"tag":97,"props":1211,"children":1212},{"class":99,"line":355},[1213],{"type":25,"tag":97,"props":1214,"children":1215},{"emptyLinePlaceholder":234},[1216],{"type":30,"value":237},{"type":25,"tag":97,"props":1218,"children":1219},{"class":99,"line":363},[1220,1224,1229,1233],{"type":25,"tag":97,"props":1221,"children":1222},{"style":384},[1223],{"type":30,"value":1185},{"type":25,"tag":97,"props":1225,"children":1226},{"style":437},[1227],{"type":30,"value":1228}," children",{"type":25,"tag":97,"props":1230,"children":1231},{"style":384},[1232],{"type":30,"value":535},{"type":25,"tag":97,"props":1234,"children":1235},{"style":104},[1236],{"type":30,"value":1237}," []\n",{"type":25,"tag":97,"props":1239,"children":1240},{"class":99,"line":380},[1241,1246,1251,1255,1259,1263,1268],{"type":25,"tag":97,"props":1242,"children":1243},{"style":104},[1244],{"type":30,"value":1245},"          children.",{"type":25,"tag":97,"props":1247,"children":1248},{"style":169},[1249],{"type":30,"value":1250},"push",{"type":25,"tag":97,"props":1252,"children":1253},{"style":104},[1254],{"type":30,"value":730},{"type":25,"tag":97,"props":1256,"children":1257},{"style":169},[1258],{"type":30,"value":1163},{"type":25,"tag":97,"props":1260,"children":1261},{"style":104},[1262],{"type":30,"value":730},{"type":25,"tag":97,"props":1264,"children":1265},{"style":180},[1266],{"type":30,"value":1267},"'raw'",{"type":25,"tag":97,"props":1269,"children":1270},{"style":104},[1271],{"type":30,"value":1272},", highlightedCode))\n",{"type":25,"tag":97,"props":1274,"children":1275},{"class":99,"line":400},[1276],{"type":25,"tag":97,"props":1277,"children":1278},{"emptyLinePlaceholder":234},[1279],{"type":30,"value":237},{"type":25,"tag":97,"props":1281,"children":1282},{"class":99,"line":409},[1283,1288,1293],{"type":25,"tag":97,"props":1284,"children":1285},{"style":384},[1286],{"type":30,"value":1287},"          return",{"type":25,"tag":97,"props":1289,"children":1290},{"style":169},[1291],{"type":30,"value":1292}," h",{"type":25,"tag":97,"props":1294,"children":1295},{"style":104},[1296],{"type":30,"value":1297},"(\n",{"type":25,"tag":97,"props":1299,"children":1300},{"class":99,"line":423},[1301],{"type":25,"tag":97,"props":1302,"children":1303},{"style":104},[1304],{"type":30,"value":1305},"            node,\n",{"type":25,"tag":97,"props":1307,"children":1308},{"class":99,"line":453},[1309,1314],{"type":25,"tag":97,"props":1310,"children":1311},{"style":180},[1312],{"type":30,"value":1313},"            'article-code'",{"type":25,"tag":97,"props":1315,"children":1316},{"style":104},[1317],{"type":30,"value":1082},{"type":25,"tag":97,"props":1319,"children":1320},{"class":99,"line":461},[1321],{"type":25,"tag":97,"props":1322,"children":1323},{"style":104},[1324],{"type":30,"value":1325},"            {\n",{"type":25,"tag":97,"props":1327,"children":1328},{"class":99,"line":498},[1329,1334,1339],{"type":25,"tag":97,"props":1330,"children":1331},{"style":104},[1332],{"type":30,"value":1333},"              className: ",{"type":25,"tag":97,"props":1335,"children":1336},{"style":180},[1337],{"type":30,"value":1338},"'nuxt-content-highlight'",{"type":25,"tag":97,"props":1340,"children":1341},{"style":104},[1342],{"type":30,"value":1082},{"type":25,"tag":97,"props":1344,"children":1345},{"class":99,"line":506},[1346],{"type":25,"tag":97,"props":1347,"children":1348},{"style":104},[1349],{"type":30,"value":1350},"              fileName,\n",{"type":25,"tag":97,"props":1352,"children":1353},{"class":99,"line":519},[1354],{"type":25,"tag":97,"props":1355,"children":1356},{"style":104},[1357],{"type":30,"value":1358},"              lang,\n",{"type":25,"tag":97,"props":1360,"children":1361},{"class":99,"line":543},[1362],{"type":25,"tag":97,"props":1363,"children":1364},{"style":104},[1365],{"type":30,"value":1366},"            },\n",{"type":25,"tag":97,"props":1368,"children":1369},{"class":99,"line":562},[1370],{"type":25,"tag":97,"props":1371,"children":1372},{"style":104},[1373],{"type":30,"value":1374},"            children\n",{"type":25,"tag":97,"props":1376,"children":1377},{"class":99,"line":580},[1378],{"type":25,"tag":97,"props":1379,"children":1380},{"style":104},[1381],{"type":30,"value":1382},"          )\n",{"type":25,"tag":97,"props":1384,"children":1385},{"class":99,"line":612},[1386],{"type":25,"tag":97,"props":1387,"children":1388},{"style":104},[1389],{"type":30,"value":1390},"        }\n",{"type":25,"tag":97,"props":1392,"children":1393},{"class":99,"line":631},[1394],{"type":25,"tag":97,"props":1395,"children":1396},{"style":104},[1397],{"type":30,"value":1398},"      },\n",{"type":25,"tag":97,"props":1400,"children":1401},{"class":99,"line":639},[1402],{"type":25,"tag":97,"props":1403,"children":1404},{"style":104},[1405],{"type":30,"value":774},{"type":25,"tag":97,"props":1407,"children":1408},{"class":99,"line":670},[1409],{"type":25,"tag":97,"props":1410,"children":1411},{"style":104},[1412],{"type":30,"value":783},{"type":25,"tag":97,"props":1414,"children":1415},{"class":99,"line":688},[1416],{"type":25,"tag":97,"props":1417,"children":1418},{"style":104},[1419],{"type":30,"value":792},{"type":25,"tag":26,"props":1421,"children":1422},{},[1423,1425,1430,1432,1437],{"type":30,"value":1424},"在這邊解析完後產生的 html 會再被 Nuxt 處理，所以可以插入 vue component，也可以直接把",{"type":25,"tag":37,"props":1426,"children":1428},{"className":1427},[],[1429],{"type":30,"value":1135},{"type":30,"value":1431},"或",{"type":25,"tag":37,"props":1433,"children":1435},{"className":1434},[],[1436],{"type":30,"value":1125},{"type":30,"value":1438},"作為 props 傳遞給元件，自訂性更高。",{"type":25,"tag":46,"props":1440,"children":1441},{},[],{"type":25,"tag":26,"props":1443,"children":1444},{},[1445],{"type":30,"value":1446},"大概就是這樣了！最一開始是想說有沒有內建的方式可以簡單實作這功能，查了一下好像沒查到，所以就自己動手搞了，幸好也沒有太複雜。",{"type":25,"tag":1448,"props":1449,"children":1450},"style",{},[1451],{"type":30,"value":1452},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":91,"searchDepth":121,"depth":121,"links":1454},[1455,1456],{"id":52,"depth":121,"text":52},{"id":907,"depth":121,"text":907},[1458,1472,1486],{"title":1459,"description":1460,"img":1461,"tags":1462,"readingTime":1465,"createdAt":1470,"updatedAt":1470,"slug":1471},"部落格Nuxt 2升級Nuxt 3（三）：Nuxt Content v1 → v2","在初步修改非模組的設定值之後，接著就要開始著手模組的升級，這部份是連同改寫為 composition api 一起做的，畢竟不可能只升級特定模組的用法而不去動到其他程式碼，但為了讓文章閱讀容易，就還是分模組來紀錄。","924/Ia2nWi.png",[1463,15,90,16,1464,18],"blog","nuxt3",{"text":1466,"minutes":1467,"time":1468,"words":1469},"7 min read",6.025,361500,1205,"2024-01-24T07:26:04.000Z","nuxt2_to_nuxt3_blog_3_modules_content",{"title":1473,"description":1474,"img":1461,"tags":1475,"readingTime":1480,"createdAt":1484,"updatedAt":1470,"slug":1485},"部落格Nuxt 2升級Nuxt 3（一）：bootstrapVue置換成自製的bootrap5元件","如之前規劃，部落格升級 Nuxt3 的第一步是先把 bootstrapVue 抽換成自己實做的 bootstrap5。這篇是紀錄過程中覺得特別困難或是需要研究的部份。",[1463,15,90,16,1464,1476,1477,1478,1479],"bootstrapVue","bootstrap 4","bootstrap 5","bootstrap",{"text":8,"minutes":1481,"time":1482,"words":1483},3.53,211800,706,"2024-01-23T05:33:23.000Z","nuxt2_to_nuxt3_blog_1_ui",{"title":1487,"description":1488,"img":1461,"tags":1489,"readingTime":1490,"createdAt":1484,"updatedAt":1470,"slug":1495},"部落格Nuxt 2升級Nuxt 3：前言","從去年年初開始建置的這個部落格網站，邊寫文章的同時陸陸續續補上功能後，大概到上個月才終於像是有個部落格的樣子。但由於 Nuxt2 即將在 2024/06/30 停止官方支援，而作為基底的 Vue2 更是在 2023/12/31 已停止官方支援，所以……想說要做的新功能可能先放著，先把部落格從 Nuxt2 升級到 Nuxt3 比較好。",[1463,15,90,16,1464],{"text":1491,"minutes":1492,"time":1493,"words":1494},"5 min read",4.28,256800,856,"nuxt2_to_nuxt3_blog_0_intro",1742204198989]