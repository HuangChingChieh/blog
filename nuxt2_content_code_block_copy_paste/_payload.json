[{"data":1,"prerenderedAt":1520},["ShallowReactive",2],{"nuxt2_content_code_block_copy_paste":3,"Related_nuxt2_content_code_block_copy_paste":1481},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"img":10,"tags":11,"category":17,"readingTime":18,"excerpt":23,"body":47,"_type":16,"_id":1474,"_source":1475,"_file":1476,"_stem":1477,"_extension":1478,"createdAt":1479,"updatedAt":1479,"slug":1480},"/articles/2023/nuxt2_content_code_block_copy_paste","2023",false,"","在Nuxt Content v1中實現程式碼區塊複製貼上功能","用 Nuxt Content 作為部落格的基底讓我最開心的部份，就是 markdown 中的程式碼區塊了，自動上色、格式化、支援的語言非常多，這是很多部落格平台都無法提供的，但若需要程式碼複製貼上功能，就得自己額外處理。","923/YRlYZO.jpg",[12,13,14,15,16],"nuxt","nuxt2","nuxt content v1","nuxt content","markdown","frontend",{"text":19,"minutes":20,"time":21,"words":22},"4 min read",3.32,199200,664,{"type":24,"children":25},"root",[26,33],{"type":27,"tag":28,"props":29,"children":30},"element","p",{},[31],{"type":32,"value":9},"text",{"type":27,"tag":28,"props":34,"children":35},{},[36,38,45],{"type":32,"value":37},"這篇文章紀錄了自己從查資料最後搞出來的一些過程，最後是透過在",{"type":27,"tag":39,"props":40,"children":42},"code",{"className":41},[],[43],{"type":32,"value":44},"nuxt.config.js",{"type":32,"value":46},"中自訂程式碼區塊處理器來實現。",{"type":24,"children":48,"toc":1470},[49,53,63,67,73,102,826,831,909,914,919,922,927,960,1437,1456,1459,1464],{"type":27,"tag":28,"props":50,"children":51},{},[52],{"type":32,"value":9},{"type":27,"tag":28,"props":54,"children":55},{},[56,57,62],{"type":32,"value":37},{"type":27,"tag":39,"props":58,"children":60},{"className":59},[],[61],{"type":32,"value":44},{"type":32,"value":46},{"type":27,"tag":64,"props":65,"children":66},"hr",{},[],{"type":27,"tag":68,"props":69,"children":71},"h2",{"id":70},"用元件把程式碼區塊包起來",[72],{"type":32,"value":70},{"type":27,"tag":28,"props":74,"children":75},{},[76,78,84,86,92,94,100],{"type":32,"value":77},"初步的想法是用一個元件在 markdown 中把程式碼區塊包起來，再把",{"type":27,"tag":39,"props":79,"children":81},{"className":80},[],[82],{"type":32,"value":83},"slot",{"type":32,"value":85},"外面那層",{"type":27,"tag":39,"props":87,"children":89},{"className":88},[],[90],{"type":32,"value":91},"div",{"type":32,"value":93},"填上",{"type":27,"tag":39,"props":95,"children":97},{"className":96},[],[98],{"type":32,"value":99},"ref",{"type":32,"value":101},"，這樣就可以去抓裡面的文字內容拿來寫入剪貼簿。自己寫出來大概是長這樣：",{"type":27,"tag":103,"props":104,"children":109},"pre",{"className":105,"code":106,"filename":107,"language":108,"meta":7,"style":7},"language-vue shiki shiki-themes github-dark","\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cdiv>\n      \u003Cbutton @click=\"copyCode\" variant=\"link\">複製程式碼\u003C/button>\n    \u003C/div>\n\n    \u003Cdiv ref=\"code\">\n      \u003C!-- markdown中程式碼嵌入的地方 -->\n      \u003Cslot>\u003C/slot>\n    \u003C/div>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript>\nexport default {\n  methods: {\n    copyCode() {\n      if (this.copied) return\n\n      const { code } = this.$refs\n\n      if (navigator.clipboard?.writeText) {\n        const toCopyCode = code.innerText\n        navigator.clipboard.writeText(toCopyCode)\n      } else {\n        const range = document.createRange()\n        range.selectNode(code)\n\n        const selection = window.getSelection()\n        selection.removeAllRanges()\n        selection.addRange(range)\n\n        document.execCommand('copy')\n        selection.removeAllRanges()\n      }\n    },\n  },\n}\n\u003C/script>\n","article-code.vue","vue",[110],{"type":27,"tag":39,"props":111,"children":112},{"__ignoreMap":7},[113,136,153,170,228,245,255,285,295,320,336,353,370,378,395,415,424,438,468,476,513,521,534,558,577,595,627,646,654,685,703,721,729,758,774,783,792,801,810],{"type":27,"tag":114,"props":115,"children":118},"span",{"class":116,"line":117},"line",1,[119,125,131],{"type":27,"tag":114,"props":120,"children":122},{"style":121},"--shiki-default:#E1E4E8",[123],{"type":32,"value":124},"\u003C",{"type":27,"tag":114,"props":126,"children":128},{"style":127},"--shiki-default:#85E89D",[129],{"type":32,"value":130},"template",{"type":27,"tag":114,"props":132,"children":133},{"style":121},[134],{"type":32,"value":135},">\n",{"type":27,"tag":114,"props":137,"children":139},{"class":116,"line":138},2,[140,145,149],{"type":27,"tag":114,"props":141,"children":142},{"style":121},[143],{"type":32,"value":144},"  \u003C",{"type":27,"tag":114,"props":146,"children":147},{"style":127},[148],{"type":32,"value":91},{"type":27,"tag":114,"props":150,"children":151},{"style":121},[152],{"type":32,"value":135},{"type":27,"tag":114,"props":154,"children":156},{"class":116,"line":155},3,[157,162,166],{"type":27,"tag":114,"props":158,"children":159},{"style":121},[160],{"type":32,"value":161},"    \u003C",{"type":27,"tag":114,"props":163,"children":164},{"style":127},[165],{"type":32,"value":91},{"type":27,"tag":114,"props":167,"children":168},{"style":121},[169],{"type":32,"value":135},{"type":27,"tag":114,"props":171,"children":173},{"class":116,"line":172},4,[174,179,184,190,195,201,206,210,215,220,224],{"type":27,"tag":114,"props":175,"children":176},{"style":121},[177],{"type":32,"value":178},"      \u003C",{"type":27,"tag":114,"props":180,"children":181},{"style":127},[182],{"type":32,"value":183},"button",{"type":27,"tag":114,"props":185,"children":187},{"style":186},"--shiki-default:#B392F0",[188],{"type":32,"value":189}," @click",{"type":27,"tag":114,"props":191,"children":192},{"style":121},[193],{"type":32,"value":194},"=",{"type":27,"tag":114,"props":196,"children":198},{"style":197},"--shiki-default:#9ECBFF",[199],{"type":32,"value":200},"\"copyCode\"",{"type":27,"tag":114,"props":202,"children":203},{"style":186},[204],{"type":32,"value":205}," variant",{"type":27,"tag":114,"props":207,"children":208},{"style":121},[209],{"type":32,"value":194},{"type":27,"tag":114,"props":211,"children":212},{"style":197},[213],{"type":32,"value":214},"\"link\"",{"type":27,"tag":114,"props":216,"children":217},{"style":121},[218],{"type":32,"value":219},">複製程式碼\u003C/",{"type":27,"tag":114,"props":221,"children":222},{"style":127},[223],{"type":32,"value":183},{"type":27,"tag":114,"props":225,"children":226},{"style":121},[227],{"type":32,"value":135},{"type":27,"tag":114,"props":229,"children":231},{"class":116,"line":230},5,[232,237,241],{"type":27,"tag":114,"props":233,"children":234},{"style":121},[235],{"type":32,"value":236},"    \u003C/",{"type":27,"tag":114,"props":238,"children":239},{"style":127},[240],{"type":32,"value":91},{"type":27,"tag":114,"props":242,"children":243},{"style":121},[244],{"type":32,"value":135},{"type":27,"tag":114,"props":246,"children":248},{"class":116,"line":247},6,[249],{"type":27,"tag":114,"props":250,"children":252},{"emptyLinePlaceholder":251},true,[253],{"type":32,"value":254},"\n",{"type":27,"tag":114,"props":256,"children":258},{"class":116,"line":257},7,[259,263,267,272,276,281],{"type":27,"tag":114,"props":260,"children":261},{"style":121},[262],{"type":32,"value":161},{"type":27,"tag":114,"props":264,"children":265},{"style":127},[266],{"type":32,"value":91},{"type":27,"tag":114,"props":268,"children":269},{"style":186},[270],{"type":32,"value":271}," ref",{"type":27,"tag":114,"props":273,"children":274},{"style":121},[275],{"type":32,"value":194},{"type":27,"tag":114,"props":277,"children":278},{"style":197},[279],{"type":32,"value":280},"\"code\"",{"type":27,"tag":114,"props":282,"children":283},{"style":121},[284],{"type":32,"value":135},{"type":27,"tag":114,"props":286,"children":288},{"class":116,"line":287},8,[289],{"type":27,"tag":114,"props":290,"children":292},{"style":291},"--shiki-default:#6A737D",[293],{"type":32,"value":294},"      \u003C!-- markdown中程式碼嵌入的地方 -->\n",{"type":27,"tag":114,"props":296,"children":298},{"class":116,"line":297},9,[299,303,307,312,316],{"type":27,"tag":114,"props":300,"children":301},{"style":121},[302],{"type":32,"value":178},{"type":27,"tag":114,"props":304,"children":305},{"style":127},[306],{"type":32,"value":83},{"type":27,"tag":114,"props":308,"children":309},{"style":121},[310],{"type":32,"value":311},">\u003C/",{"type":27,"tag":114,"props":313,"children":314},{"style":127},[315],{"type":32,"value":83},{"type":27,"tag":114,"props":317,"children":318},{"style":121},[319],{"type":32,"value":135},{"type":27,"tag":114,"props":321,"children":323},{"class":116,"line":322},10,[324,328,332],{"type":27,"tag":114,"props":325,"children":326},{"style":121},[327],{"type":32,"value":236},{"type":27,"tag":114,"props":329,"children":330},{"style":127},[331],{"type":32,"value":91},{"type":27,"tag":114,"props":333,"children":334},{"style":121},[335],{"type":32,"value":135},{"type":27,"tag":114,"props":337,"children":339},{"class":116,"line":338},11,[340,345,349],{"type":27,"tag":114,"props":341,"children":342},{"style":121},[343],{"type":32,"value":344},"  \u003C/",{"type":27,"tag":114,"props":346,"children":347},{"style":127},[348],{"type":32,"value":91},{"type":27,"tag":114,"props":350,"children":351},{"style":121},[352],{"type":32,"value":135},{"type":27,"tag":114,"props":354,"children":356},{"class":116,"line":355},12,[357,362,366],{"type":27,"tag":114,"props":358,"children":359},{"style":121},[360],{"type":32,"value":361},"\u003C/",{"type":27,"tag":114,"props":363,"children":364},{"style":127},[365],{"type":32,"value":130},{"type":27,"tag":114,"props":367,"children":368},{"style":121},[369],{"type":32,"value":135},{"type":27,"tag":114,"props":371,"children":373},{"class":116,"line":372},13,[374],{"type":27,"tag":114,"props":375,"children":376},{"emptyLinePlaceholder":251},[377],{"type":32,"value":254},{"type":27,"tag":114,"props":379,"children":381},{"class":116,"line":380},14,[382,386,391],{"type":27,"tag":114,"props":383,"children":384},{"style":121},[385],{"type":32,"value":124},{"type":27,"tag":114,"props":387,"children":388},{"style":127},[389],{"type":32,"value":390},"script",{"type":27,"tag":114,"props":392,"children":393},{"style":121},[394],{"type":32,"value":135},{"type":27,"tag":114,"props":396,"children":398},{"class":116,"line":397},15,[399,405,410],{"type":27,"tag":114,"props":400,"children":402},{"style":401},"--shiki-default:#F97583",[403],{"type":32,"value":404},"export",{"type":27,"tag":114,"props":406,"children":407},{"style":401},[408],{"type":32,"value":409}," default",{"type":27,"tag":114,"props":411,"children":412},{"style":121},[413],{"type":32,"value":414}," {\n",{"type":27,"tag":114,"props":416,"children":418},{"class":116,"line":417},16,[419],{"type":27,"tag":114,"props":420,"children":421},{"style":121},[422],{"type":32,"value":423},"  methods: {\n",{"type":27,"tag":114,"props":425,"children":427},{"class":116,"line":426},17,[428,433],{"type":27,"tag":114,"props":429,"children":430},{"style":186},[431],{"type":32,"value":432},"    copyCode",{"type":27,"tag":114,"props":434,"children":435},{"style":121},[436],{"type":32,"value":437},"() {\n",{"type":27,"tag":114,"props":439,"children":441},{"class":116,"line":440},18,[442,447,452,458,463],{"type":27,"tag":114,"props":443,"children":444},{"style":401},[445],{"type":32,"value":446},"      if",{"type":27,"tag":114,"props":448,"children":449},{"style":121},[450],{"type":32,"value":451}," (",{"type":27,"tag":114,"props":453,"children":455},{"style":454},"--shiki-default:#79B8FF",[456],{"type":32,"value":457},"this",{"type":27,"tag":114,"props":459,"children":460},{"style":121},[461],{"type":32,"value":462},".copied) ",{"type":27,"tag":114,"props":464,"children":465},{"style":401},[466],{"type":32,"value":467},"return\n",{"type":27,"tag":114,"props":469,"children":471},{"class":116,"line":470},19,[472],{"type":27,"tag":114,"props":473,"children":474},{"emptyLinePlaceholder":251},[475],{"type":32,"value":254},{"type":27,"tag":114,"props":477,"children":479},{"class":116,"line":478},20,[480,485,490,494,499,503,508],{"type":27,"tag":114,"props":481,"children":482},{"style":401},[483],{"type":32,"value":484},"      const",{"type":27,"tag":114,"props":486,"children":487},{"style":121},[488],{"type":32,"value":489}," { ",{"type":27,"tag":114,"props":491,"children":492},{"style":454},[493],{"type":32,"value":39},{"type":27,"tag":114,"props":495,"children":496},{"style":121},[497],{"type":32,"value":498}," } ",{"type":27,"tag":114,"props":500,"children":501},{"style":401},[502],{"type":32,"value":194},{"type":27,"tag":114,"props":504,"children":505},{"style":454},[506],{"type":32,"value":507}," this",{"type":27,"tag":114,"props":509,"children":510},{"style":121},[511],{"type":32,"value":512},".$refs\n",{"type":27,"tag":114,"props":514,"children":516},{"class":116,"line":515},21,[517],{"type":27,"tag":114,"props":518,"children":519},{"emptyLinePlaceholder":251},[520],{"type":32,"value":254},{"type":27,"tag":114,"props":522,"children":524},{"class":116,"line":523},22,[525,529],{"type":27,"tag":114,"props":526,"children":527},{"style":401},[528],{"type":32,"value":446},{"type":27,"tag":114,"props":530,"children":531},{"style":121},[532],{"type":32,"value":533}," (navigator.clipboard?.writeText) {\n",{"type":27,"tag":114,"props":535,"children":537},{"class":116,"line":536},23,[538,543,548,553],{"type":27,"tag":114,"props":539,"children":540},{"style":401},[541],{"type":32,"value":542},"        const",{"type":27,"tag":114,"props":544,"children":545},{"style":454},[546],{"type":32,"value":547}," toCopyCode",{"type":27,"tag":114,"props":549,"children":550},{"style":401},[551],{"type":32,"value":552}," =",{"type":27,"tag":114,"props":554,"children":555},{"style":121},[556],{"type":32,"value":557}," code.innerText\n",{"type":27,"tag":114,"props":559,"children":561},{"class":116,"line":560},24,[562,567,572],{"type":27,"tag":114,"props":563,"children":564},{"style":121},[565],{"type":32,"value":566},"        navigator.clipboard.",{"type":27,"tag":114,"props":568,"children":569},{"style":186},[570],{"type":32,"value":571},"writeText",{"type":27,"tag":114,"props":573,"children":574},{"style":121},[575],{"type":32,"value":576},"(toCopyCode)\n",{"type":27,"tag":114,"props":578,"children":580},{"class":116,"line":579},25,[581,586,591],{"type":27,"tag":114,"props":582,"children":583},{"style":121},[584],{"type":32,"value":585},"      } ",{"type":27,"tag":114,"props":587,"children":588},{"style":401},[589],{"type":32,"value":590},"else",{"type":27,"tag":114,"props":592,"children":593},{"style":121},[594],{"type":32,"value":414},{"type":27,"tag":114,"props":596,"children":598},{"class":116,"line":597},26,[599,603,608,612,617,622],{"type":27,"tag":114,"props":600,"children":601},{"style":401},[602],{"type":32,"value":542},{"type":27,"tag":114,"props":604,"children":605},{"style":454},[606],{"type":32,"value":607}," range",{"type":27,"tag":114,"props":609,"children":610},{"style":401},[611],{"type":32,"value":552},{"type":27,"tag":114,"props":613,"children":614},{"style":121},[615],{"type":32,"value":616}," document.",{"type":27,"tag":114,"props":618,"children":619},{"style":186},[620],{"type":32,"value":621},"createRange",{"type":27,"tag":114,"props":623,"children":624},{"style":121},[625],{"type":32,"value":626},"()\n",{"type":27,"tag":114,"props":628,"children":630},{"class":116,"line":629},27,[631,636,641],{"type":27,"tag":114,"props":632,"children":633},{"style":121},[634],{"type":32,"value":635},"        range.",{"type":27,"tag":114,"props":637,"children":638},{"style":186},[639],{"type":32,"value":640},"selectNode",{"type":27,"tag":114,"props":642,"children":643},{"style":121},[644],{"type":32,"value":645},"(code)\n",{"type":27,"tag":114,"props":647,"children":649},{"class":116,"line":648},28,[650],{"type":27,"tag":114,"props":651,"children":652},{"emptyLinePlaceholder":251},[653],{"type":32,"value":254},{"type":27,"tag":114,"props":655,"children":657},{"class":116,"line":656},29,[658,662,667,671,676,681],{"type":27,"tag":114,"props":659,"children":660},{"style":401},[661],{"type":32,"value":542},{"type":27,"tag":114,"props":663,"children":664},{"style":454},[665],{"type":32,"value":666}," selection",{"type":27,"tag":114,"props":668,"children":669},{"style":401},[670],{"type":32,"value":552},{"type":27,"tag":114,"props":672,"children":673},{"style":121},[674],{"type":32,"value":675}," window.",{"type":27,"tag":114,"props":677,"children":678},{"style":186},[679],{"type":32,"value":680},"getSelection",{"type":27,"tag":114,"props":682,"children":683},{"style":121},[684],{"type":32,"value":626},{"type":27,"tag":114,"props":686,"children":688},{"class":116,"line":687},30,[689,694,699],{"type":27,"tag":114,"props":690,"children":691},{"style":121},[692],{"type":32,"value":693},"        selection.",{"type":27,"tag":114,"props":695,"children":696},{"style":186},[697],{"type":32,"value":698},"removeAllRanges",{"type":27,"tag":114,"props":700,"children":701},{"style":121},[702],{"type":32,"value":626},{"type":27,"tag":114,"props":704,"children":706},{"class":116,"line":705},31,[707,711,716],{"type":27,"tag":114,"props":708,"children":709},{"style":121},[710],{"type":32,"value":693},{"type":27,"tag":114,"props":712,"children":713},{"style":186},[714],{"type":32,"value":715},"addRange",{"type":27,"tag":114,"props":717,"children":718},{"style":121},[719],{"type":32,"value":720},"(range)\n",{"type":27,"tag":114,"props":722,"children":724},{"class":116,"line":723},32,[725],{"type":27,"tag":114,"props":726,"children":727},{"emptyLinePlaceholder":251},[728],{"type":32,"value":254},{"type":27,"tag":114,"props":730,"children":732},{"class":116,"line":731},33,[733,738,743,748,753],{"type":27,"tag":114,"props":734,"children":735},{"style":121},[736],{"type":32,"value":737},"        document.",{"type":27,"tag":114,"props":739,"children":740},{"style":186},[741],{"type":32,"value":742},"execCommand",{"type":27,"tag":114,"props":744,"children":745},{"style":121},[746],{"type":32,"value":747},"(",{"type":27,"tag":114,"props":749,"children":750},{"style":197},[751],{"type":32,"value":752},"'copy'",{"type":27,"tag":114,"props":754,"children":755},{"style":121},[756],{"type":32,"value":757},")\n",{"type":27,"tag":114,"props":759,"children":761},{"class":116,"line":760},34,[762,766,770],{"type":27,"tag":114,"props":763,"children":764},{"style":121},[765],{"type":32,"value":693},{"type":27,"tag":114,"props":767,"children":768},{"style":186},[769],{"type":32,"value":698},{"type":27,"tag":114,"props":771,"children":772},{"style":121},[773],{"type":32,"value":626},{"type":27,"tag":114,"props":775,"children":777},{"class":116,"line":776},35,[778],{"type":27,"tag":114,"props":779,"children":780},{"style":121},[781],{"type":32,"value":782},"      }\n",{"type":27,"tag":114,"props":784,"children":786},{"class":116,"line":785},36,[787],{"type":27,"tag":114,"props":788,"children":789},{"style":121},[790],{"type":32,"value":791},"    },\n",{"type":27,"tag":114,"props":793,"children":795},{"class":116,"line":794},37,[796],{"type":27,"tag":114,"props":797,"children":798},{"style":121},[799],{"type":32,"value":800},"  },\n",{"type":27,"tag":114,"props":802,"children":804},{"class":116,"line":803},38,[805],{"type":27,"tag":114,"props":806,"children":807},{"style":121},[808],{"type":32,"value":809},"}\n",{"type":27,"tag":114,"props":811,"children":813},{"class":116,"line":812},39,[814,818,822],{"type":27,"tag":114,"props":815,"children":816},{"style":121},[817],{"type":32,"value":361},{"type":27,"tag":114,"props":819,"children":820},{"style":127},[821],{"type":32,"value":390},{"type":27,"tag":114,"props":823,"children":824},{"style":121},[825],{"type":32,"value":135},{"type":27,"tag":28,"props":827,"children":828},{},[829],{"type":32,"value":830},"而把元件寫在 markdown 檔案會長這樣：",{"type":27,"tag":103,"props":832,"children":836},{"className":833,"code":834,"filename":835,"language":16,"meta":7,"style":7},"language-markdown shiki shiki-themes github-dark","\u003Carticle-code>\n\n```bash\nsudo dnf update -y\n```\n\n\u003C/article-code>\n","article.md",[837],{"type":27,"tag":39,"props":838,"children":839},{"__ignoreMap":7},[840,848,855,863,886,894,901],{"type":27,"tag":114,"props":841,"children":842},{"class":116,"line":117},[843],{"type":27,"tag":114,"props":844,"children":845},{"style":121},[846],{"type":32,"value":847},"\u003Carticle-code>\n",{"type":27,"tag":114,"props":849,"children":850},{"class":116,"line":138},[851],{"type":27,"tag":114,"props":852,"children":853},{"emptyLinePlaceholder":251},[854],{"type":32,"value":254},{"type":27,"tag":114,"props":856,"children":857},{"class":116,"line":155},[858],{"type":27,"tag":114,"props":859,"children":860},{"style":121},[861],{"type":32,"value":862},"```bash\n",{"type":27,"tag":114,"props":864,"children":865},{"class":116,"line":172},[866,871,876,881],{"type":27,"tag":114,"props":867,"children":868},{"style":186},[869],{"type":32,"value":870},"sudo",{"type":27,"tag":114,"props":872,"children":873},{"style":197},[874],{"type":32,"value":875}," dnf",{"type":27,"tag":114,"props":877,"children":878},{"style":197},[879],{"type":32,"value":880}," update",{"type":27,"tag":114,"props":882,"children":883},{"style":454},[884],{"type":32,"value":885}," -y\n",{"type":27,"tag":114,"props":887,"children":888},{"class":116,"line":230},[889],{"type":27,"tag":114,"props":890,"children":891},{"style":121},[892],{"type":32,"value":893},"```\n",{"type":27,"tag":114,"props":895,"children":896},{"class":116,"line":247},[897],{"type":27,"tag":114,"props":898,"children":899},{"emptyLinePlaceholder":251},[900],{"type":32,"value":254},{"type":27,"tag":114,"props":902,"children":903},{"class":116,"line":257},[904],{"type":27,"tag":114,"props":905,"children":906},{"style":121},[907],{"type":32,"value":908},"\u003C/article-code>\n",{"type":27,"tag":28,"props":910,"children":911},{},[912],{"type":32,"value":913},"可以看到因為 markdown 解析的關係，元件標籤與程式碼區塊之間上下還要再空一行。",{"type":27,"tag":28,"props":915,"children":916},{},[917],{"type":32,"value":918},"因為每次寫程式碼區塊的時候都要嵌入元件，若文章有大量或是連續的程式碼區塊，閱讀性會降低很多，最後看到頭很痛。後來就找找有沒有辦法在處理程式碼區塊產生 html 時，順便用元件包起來的方法，這樣就不用一直自己額外包起來，後來查到還真的有。",{"type":27,"tag":64,"props":920,"children":921},{},[],{"type":27,"tag":68,"props":923,"children":925},{"id":924},"自訂程式碼處理器",[926],{"type":32,"value":924},{"type":27,"tag":28,"props":928,"children":929},{},[930,932,938,940,949,951,958],{"type":32,"value":931},"在 Nuxt Content v1 中有一個設定值",{"type":27,"tag":39,"props":933,"children":935},{"className":934},[],[936],{"type":32,"value":937},"markdown.highlighter",{"type":32,"value":939},"，可以",{"type":27,"tag":941,"props":942,"children":946},"a",{"href":943,"rel":944},"https://content.nuxt.com/v1/getting-started/configuration#markdownhighlighter",[945],"nofollow",[947],{"type":32,"value":948},"自己決定程式碼被解析後的外層 HTML 結構",{"type":32,"value":950},"，官方",{"type":27,"tag":941,"props":952,"children":955},{"href":953,"rel":954},"https://content.nuxt.com/v1/community/snippets#custom-highlighter",[945],[956],{"type":32,"value":957},"使用了 highlight.js 以及 shiki 作為示範",{"type":32,"value":959},"，看了看之後滿喜歡 shiki 的，所以就使用 shiki。",{"type":27,"tag":103,"props":961,"children":965},{"className":962,"code":963,"filename":44,"language":964,"meta":7,"style":7},"language-js shiki shiki-themes github-dark","import shiki from 'shiki'\n\nexport default {\n  content: {\n    markdown: {\n      async highlighter() {\n        const highlighter = await shiki.getHighlighter({\n          theme: 'nord',\n        })\n\n        return (rawCode, lang, { fileName }, { h, node, u }) => {\n          const highlightedCode = highlighter.codeToHtml(rawCode, lang)\n\n          const children = []\n          children.push(u('raw', highlightedCode))\n\n          return h(\n            node,\n            'article-code',\n            {\n              className: 'nuxt-content-highlight',\n              fileName,\n              lang,\n            },\n            children\n          )\n        }\n      },\n    },\n  },\n}\n","js",[966],{"type":27,"tag":39,"props":967,"children":968},{"__ignoreMap":7},[969,992,999,1014,1022,1030,1047,1082,1100,1108,1115,1195,1227,1234,1255,1290,1297,1315,1323,1335,1343,1360,1368,1376,1384,1392,1400,1408,1416,1423,1430],{"type":27,"tag":114,"props":970,"children":971},{"class":116,"line":117},[972,977,982,987],{"type":27,"tag":114,"props":973,"children":974},{"style":401},[975],{"type":32,"value":976},"import",{"type":27,"tag":114,"props":978,"children":979},{"style":121},[980],{"type":32,"value":981}," shiki ",{"type":27,"tag":114,"props":983,"children":984},{"style":401},[985],{"type":32,"value":986},"from",{"type":27,"tag":114,"props":988,"children":989},{"style":197},[990],{"type":32,"value":991}," 'shiki'\n",{"type":27,"tag":114,"props":993,"children":994},{"class":116,"line":138},[995],{"type":27,"tag":114,"props":996,"children":997},{"emptyLinePlaceholder":251},[998],{"type":32,"value":254},{"type":27,"tag":114,"props":1000,"children":1001},{"class":116,"line":155},[1002,1006,1010],{"type":27,"tag":114,"props":1003,"children":1004},{"style":401},[1005],{"type":32,"value":404},{"type":27,"tag":114,"props":1007,"children":1008},{"style":401},[1009],{"type":32,"value":409},{"type":27,"tag":114,"props":1011,"children":1012},{"style":121},[1013],{"type":32,"value":414},{"type":27,"tag":114,"props":1015,"children":1016},{"class":116,"line":172},[1017],{"type":27,"tag":114,"props":1018,"children":1019},{"style":121},[1020],{"type":32,"value":1021},"  content: {\n",{"type":27,"tag":114,"props":1023,"children":1024},{"class":116,"line":230},[1025],{"type":27,"tag":114,"props":1026,"children":1027},{"style":121},[1028],{"type":32,"value":1029},"    markdown: {\n",{"type":27,"tag":114,"props":1031,"children":1032},{"class":116,"line":247},[1033,1038,1043],{"type":27,"tag":114,"props":1034,"children":1035},{"style":401},[1036],{"type":32,"value":1037},"      async",{"type":27,"tag":114,"props":1039,"children":1040},{"style":186},[1041],{"type":32,"value":1042}," highlighter",{"type":27,"tag":114,"props":1044,"children":1045},{"style":121},[1046],{"type":32,"value":437},{"type":27,"tag":114,"props":1048,"children":1049},{"class":116,"line":257},[1050,1054,1058,1062,1067,1072,1077],{"type":27,"tag":114,"props":1051,"children":1052},{"style":401},[1053],{"type":32,"value":542},{"type":27,"tag":114,"props":1055,"children":1056},{"style":454},[1057],{"type":32,"value":1042},{"type":27,"tag":114,"props":1059,"children":1060},{"style":401},[1061],{"type":32,"value":552},{"type":27,"tag":114,"props":1063,"children":1064},{"style":401},[1065],{"type":32,"value":1066}," await",{"type":27,"tag":114,"props":1068,"children":1069},{"style":121},[1070],{"type":32,"value":1071}," shiki.",{"type":27,"tag":114,"props":1073,"children":1074},{"style":186},[1075],{"type":32,"value":1076},"getHighlighter",{"type":27,"tag":114,"props":1078,"children":1079},{"style":121},[1080],{"type":32,"value":1081},"({\n",{"type":27,"tag":114,"props":1083,"children":1084},{"class":116,"line":287},[1085,1090,1095],{"type":27,"tag":114,"props":1086,"children":1087},{"style":121},[1088],{"type":32,"value":1089},"          theme: ",{"type":27,"tag":114,"props":1091,"children":1092},{"style":197},[1093],{"type":32,"value":1094},"'nord'",{"type":27,"tag":114,"props":1096,"children":1097},{"style":121},[1098],{"type":32,"value":1099},",\n",{"type":27,"tag":114,"props":1101,"children":1102},{"class":116,"line":297},[1103],{"type":27,"tag":114,"props":1104,"children":1105},{"style":121},[1106],{"type":32,"value":1107},"        })\n",{"type":27,"tag":114,"props":1109,"children":1110},{"class":116,"line":322},[1111],{"type":27,"tag":114,"props":1112,"children":1113},{"emptyLinePlaceholder":251},[1114],{"type":32,"value":254},{"type":27,"tag":114,"props":1116,"children":1117},{"class":116,"line":338},[1118,1123,1127,1133,1138,1143,1148,1153,1158,1163,1167,1172,1176,1181,1186,1191],{"type":27,"tag":114,"props":1119,"children":1120},{"style":401},[1121],{"type":32,"value":1122},"        return",{"type":27,"tag":114,"props":1124,"children":1125},{"style":121},[1126],{"type":32,"value":451},{"type":27,"tag":114,"props":1128,"children":1130},{"style":1129},"--shiki-default:#FFAB70",[1131],{"type":32,"value":1132},"rawCode",{"type":27,"tag":114,"props":1134,"children":1135},{"style":121},[1136],{"type":32,"value":1137},", ",{"type":27,"tag":114,"props":1139,"children":1140},{"style":1129},[1141],{"type":32,"value":1142},"lang",{"type":27,"tag":114,"props":1144,"children":1145},{"style":121},[1146],{"type":32,"value":1147},", { ",{"type":27,"tag":114,"props":1149,"children":1150},{"style":1129},[1151],{"type":32,"value":1152},"fileName",{"type":27,"tag":114,"props":1154,"children":1155},{"style":121},[1156],{"type":32,"value":1157}," }, { ",{"type":27,"tag":114,"props":1159,"children":1160},{"style":1129},[1161],{"type":32,"value":1162},"h",{"type":27,"tag":114,"props":1164,"children":1165},{"style":121},[1166],{"type":32,"value":1137},{"type":27,"tag":114,"props":1168,"children":1169},{"style":1129},[1170],{"type":32,"value":1171},"node",{"type":27,"tag":114,"props":1173,"children":1174},{"style":121},[1175],{"type":32,"value":1137},{"type":27,"tag":114,"props":1177,"children":1178},{"style":1129},[1179],{"type":32,"value":1180},"u",{"type":27,"tag":114,"props":1182,"children":1183},{"style":121},[1184],{"type":32,"value":1185}," }) ",{"type":27,"tag":114,"props":1187,"children":1188},{"style":401},[1189],{"type":32,"value":1190},"=>",{"type":27,"tag":114,"props":1192,"children":1193},{"style":121},[1194],{"type":32,"value":414},{"type":27,"tag":114,"props":1196,"children":1197},{"class":116,"line":355},[1198,1203,1208,1212,1217,1222],{"type":27,"tag":114,"props":1199,"children":1200},{"style":401},[1201],{"type":32,"value":1202},"          const",{"type":27,"tag":114,"props":1204,"children":1205},{"style":454},[1206],{"type":32,"value":1207}," highlightedCode",{"type":27,"tag":114,"props":1209,"children":1210},{"style":401},[1211],{"type":32,"value":552},{"type":27,"tag":114,"props":1213,"children":1214},{"style":121},[1215],{"type":32,"value":1216}," highlighter.",{"type":27,"tag":114,"props":1218,"children":1219},{"style":186},[1220],{"type":32,"value":1221},"codeToHtml",{"type":27,"tag":114,"props":1223,"children":1224},{"style":121},[1225],{"type":32,"value":1226},"(rawCode, lang)\n",{"type":27,"tag":114,"props":1228,"children":1229},{"class":116,"line":372},[1230],{"type":27,"tag":114,"props":1231,"children":1232},{"emptyLinePlaceholder":251},[1233],{"type":32,"value":254},{"type":27,"tag":114,"props":1235,"children":1236},{"class":116,"line":380},[1237,1241,1246,1250],{"type":27,"tag":114,"props":1238,"children":1239},{"style":401},[1240],{"type":32,"value":1202},{"type":27,"tag":114,"props":1242,"children":1243},{"style":454},[1244],{"type":32,"value":1245}," children",{"type":27,"tag":114,"props":1247,"children":1248},{"style":401},[1249],{"type":32,"value":552},{"type":27,"tag":114,"props":1251,"children":1252},{"style":121},[1253],{"type":32,"value":1254}," []\n",{"type":27,"tag":114,"props":1256,"children":1257},{"class":116,"line":397},[1258,1263,1268,1272,1276,1280,1285],{"type":27,"tag":114,"props":1259,"children":1260},{"style":121},[1261],{"type":32,"value":1262},"          children.",{"type":27,"tag":114,"props":1264,"children":1265},{"style":186},[1266],{"type":32,"value":1267},"push",{"type":27,"tag":114,"props":1269,"children":1270},{"style":121},[1271],{"type":32,"value":747},{"type":27,"tag":114,"props":1273,"children":1274},{"style":186},[1275],{"type":32,"value":1180},{"type":27,"tag":114,"props":1277,"children":1278},{"style":121},[1279],{"type":32,"value":747},{"type":27,"tag":114,"props":1281,"children":1282},{"style":197},[1283],{"type":32,"value":1284},"'raw'",{"type":27,"tag":114,"props":1286,"children":1287},{"style":121},[1288],{"type":32,"value":1289},", highlightedCode))\n",{"type":27,"tag":114,"props":1291,"children":1292},{"class":116,"line":417},[1293],{"type":27,"tag":114,"props":1294,"children":1295},{"emptyLinePlaceholder":251},[1296],{"type":32,"value":254},{"type":27,"tag":114,"props":1298,"children":1299},{"class":116,"line":426},[1300,1305,1310],{"type":27,"tag":114,"props":1301,"children":1302},{"style":401},[1303],{"type":32,"value":1304},"          return",{"type":27,"tag":114,"props":1306,"children":1307},{"style":186},[1308],{"type":32,"value":1309}," h",{"type":27,"tag":114,"props":1311,"children":1312},{"style":121},[1313],{"type":32,"value":1314},"(\n",{"type":27,"tag":114,"props":1316,"children":1317},{"class":116,"line":440},[1318],{"type":27,"tag":114,"props":1319,"children":1320},{"style":121},[1321],{"type":32,"value":1322},"            node,\n",{"type":27,"tag":114,"props":1324,"children":1325},{"class":116,"line":470},[1326,1331],{"type":27,"tag":114,"props":1327,"children":1328},{"style":197},[1329],{"type":32,"value":1330},"            'article-code'",{"type":27,"tag":114,"props":1332,"children":1333},{"style":121},[1334],{"type":32,"value":1099},{"type":27,"tag":114,"props":1336,"children":1337},{"class":116,"line":478},[1338],{"type":27,"tag":114,"props":1339,"children":1340},{"style":121},[1341],{"type":32,"value":1342},"            {\n",{"type":27,"tag":114,"props":1344,"children":1345},{"class":116,"line":515},[1346,1351,1356],{"type":27,"tag":114,"props":1347,"children":1348},{"style":121},[1349],{"type":32,"value":1350},"              className: ",{"type":27,"tag":114,"props":1352,"children":1353},{"style":197},[1354],{"type":32,"value":1355},"'nuxt-content-highlight'",{"type":27,"tag":114,"props":1357,"children":1358},{"style":121},[1359],{"type":32,"value":1099},{"type":27,"tag":114,"props":1361,"children":1362},{"class":116,"line":523},[1363],{"type":27,"tag":114,"props":1364,"children":1365},{"style":121},[1366],{"type":32,"value":1367},"              fileName,\n",{"type":27,"tag":114,"props":1369,"children":1370},{"class":116,"line":536},[1371],{"type":27,"tag":114,"props":1372,"children":1373},{"style":121},[1374],{"type":32,"value":1375},"              lang,\n",{"type":27,"tag":114,"props":1377,"children":1378},{"class":116,"line":560},[1379],{"type":27,"tag":114,"props":1380,"children":1381},{"style":121},[1382],{"type":32,"value":1383},"            },\n",{"type":27,"tag":114,"props":1385,"children":1386},{"class":116,"line":579},[1387],{"type":27,"tag":114,"props":1388,"children":1389},{"style":121},[1390],{"type":32,"value":1391},"            children\n",{"type":27,"tag":114,"props":1393,"children":1394},{"class":116,"line":597},[1395],{"type":27,"tag":114,"props":1396,"children":1397},{"style":121},[1398],{"type":32,"value":1399},"          )\n",{"type":27,"tag":114,"props":1401,"children":1402},{"class":116,"line":629},[1403],{"type":27,"tag":114,"props":1404,"children":1405},{"style":121},[1406],{"type":32,"value":1407},"        }\n",{"type":27,"tag":114,"props":1409,"children":1410},{"class":116,"line":648},[1411],{"type":27,"tag":114,"props":1412,"children":1413},{"style":121},[1414],{"type":32,"value":1415},"      },\n",{"type":27,"tag":114,"props":1417,"children":1418},{"class":116,"line":656},[1419],{"type":27,"tag":114,"props":1420,"children":1421},{"style":121},[1422],{"type":32,"value":791},{"type":27,"tag":114,"props":1424,"children":1425},{"class":116,"line":687},[1426],{"type":27,"tag":114,"props":1427,"children":1428},{"style":121},[1429],{"type":32,"value":800},{"type":27,"tag":114,"props":1431,"children":1432},{"class":116,"line":705},[1433],{"type":27,"tag":114,"props":1434,"children":1435},{"style":121},[1436],{"type":32,"value":809},{"type":27,"tag":28,"props":1438,"children":1439},{},[1440,1442,1447,1449,1454],{"type":32,"value":1441},"在這邊解析完後產生的 html 會再被 Nuxt 處理，所以可以插入 vue component，也可以直接把",{"type":27,"tag":39,"props":1443,"children":1445},{"className":1444},[],[1446],{"type":32,"value":1152},{"type":32,"value":1448},"或",{"type":27,"tag":39,"props":1450,"children":1452},{"className":1451},[],[1453],{"type":32,"value":1142},{"type":32,"value":1455},"作為 props 傳遞給元件，自訂性更高。",{"type":27,"tag":64,"props":1457,"children":1458},{},[],{"type":27,"tag":28,"props":1460,"children":1461},{},[1462],{"type":32,"value":1463},"大概就是這樣了！最一開始是想說有沒有內建的方式可以簡單實作這功能，查了一下好像沒查到，所以就自己動手搞了，幸好也沒有太複雜。",{"type":27,"tag":1465,"props":1466,"children":1467},"style",{},[1468],{"type":32,"value":1469},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":138,"depth":138,"links":1471},[1472,1473],{"id":70,"depth":138,"text":70},{"id":924,"depth":138,"text":924},"content:articles:2023:nuxt2_content_code_block_copy_paste.md","content","articles/2023/nuxt2_content_code_block_copy_paste.md","articles/2023/nuxt2_content_code_block_copy_paste","md","2023-12-12T05:50:50.000Z","nuxt2_content_code_block_copy_paste",[1482,1496,1510],{"title":1483,"description":1484,"img":1485,"tags":1486,"readingTime":1489,"createdAt":1494,"updatedAt":1494,"slug":1495},"部落格Nuxt 2升級Nuxt 3（三）：Nuxt Content v1 → v2","在初步修改非模組的設定值之後，接著就要開始著手模組的升級，這部份是連同改寫為 composition api 一起做的，畢竟不可能只升級特定模組的用法而不去動到其他程式碼，但為了讓文章閱讀容易，就還是分模組來紀錄。","924/Ia2nWi.png",[1487,12,108,13,1488,15],"blog","nuxt3",{"text":1490,"minutes":1491,"time":1492,"words":1493},"7 min read",6.025,361500,1205,"2024-01-24T07:26:04.000Z","nuxt2_to_nuxt3_blog_3_modules_content",{"title":1497,"description":1498,"img":1485,"tags":1499,"readingTime":1504,"createdAt":1508,"updatedAt":1494,"slug":1509},"部落格Nuxt 2升級Nuxt 3（一）：bootstrapVue置換成自製的bootrap5元件","如之前規劃，部落格升級 Nuxt3 的第一步是先把 bootstrapVue 抽換成自己實做的 bootstrap5。這篇是紀錄過程中覺得特別困難或是需要研究的部份。",[1487,12,108,13,1488,1500,1501,1502,1503],"bootstrapVue","bootstrap 4","bootstrap 5","bootstrap",{"text":19,"minutes":1505,"time":1506,"words":1507},3.53,211800,706,"2024-01-23T05:33:23.000Z","nuxt2_to_nuxt3_blog_1_ui",{"title":1511,"description":1512,"img":1485,"tags":1513,"readingTime":1514,"createdAt":1508,"updatedAt":1494,"slug":1519},"部落格Nuxt 2升級Nuxt 3：前言","從去年年初開始建置的這個部落格網站，邊寫文章的同時陸陸續續補上功能後，大概到上個月才終於像是有個部落格的樣子。但由於 Nuxt2 即將在 2024/06/30 停止官方支援，而作為基底的 Vue2 更是在 2023/12/31 已停止官方支援，所以……想說要做的新功能可能先放著，先把部落格從 Nuxt2 升級到 Nuxt3 比較好。",[1487,12,108,13,1488],{"text":1515,"minutes":1516,"time":1517,"words":1518},"5 min read",4.28,256800,856,"nuxt2_to_nuxt3_blog_0_intro",1733560829691]