[{"data":1,"prerenderedAt":1534},["ShallowReactive",2],{"nuxt2_content_code_block_copy_paste":3,"Related_nuxt2_content_code_block_copy_paste":1495},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"img":10,"tags":11,"category":17,"readingTime":18,"excerpt":23,"body":47,"_type":16,"_id":1488,"_source":1489,"_file":1490,"_stem":1491,"_extension":1492,"createdAt":1493,"updatedAt":1493,"slug":1494},"/articles/2023/nuxt2_content_code_block_copy_paste","2023",false,"","在Nuxt Content v1中實現程式碼區塊複製貼上功能","用 Nuxt Content 作為部落格的基底讓我最開心的部份，就是 markdown 中的程式碼區塊了，自動上色、格式化、支援的語言非常多，這是很多部落格平台都無法提供的，但若需要程式碼複製貼上功能，就得自己額外處理。","923/YRlYZO.jpg",[12,13,14,15,16],"nuxt","nuxt2","nuxt content v1","nuxt content","markdown","frontend",{"text":19,"minutes":20,"time":21,"words":22},"4 min read",3.32,199200,664,{"type":24,"children":25},"root",[26,33],{"type":27,"tag":28,"props":29,"children":30},"element","p",{},[31],{"type":32,"value":9},"text",{"type":27,"tag":28,"props":34,"children":35},{},[36,38,45],{"type":32,"value":37},"這篇文章紀錄了自己從查資料最後搞出來的一些過程，最後是透過在",{"type":27,"tag":39,"props":40,"children":42},"code",{"className":41},[],[43],{"type":32,"value":44},"nuxt.config.js",{"type":32,"value":46},"中自訂程式碼區塊處理器來實現。",{"type":24,"children":48,"toc":1484},[49,53,63,67,73,102,840,845,923,928,933,936,941,974,1451,1470,1473,1478],{"type":27,"tag":28,"props":50,"children":51},{},[52],{"type":32,"value":9},{"type":27,"tag":28,"props":54,"children":55},{},[56,57,62],{"type":32,"value":37},{"type":27,"tag":39,"props":58,"children":60},{"className":59},[],[61],{"type":32,"value":44},{"type":32,"value":46},{"type":27,"tag":64,"props":65,"children":66},"hr",{},[],{"type":27,"tag":68,"props":69,"children":71},"h2",{"id":70},"用元件把程式碼區塊包起來",[72],{"type":32,"value":70},{"type":27,"tag":28,"props":74,"children":75},{},[76,78,84,86,92,94,100],{"type":32,"value":77},"初步的想法是用一個元件在 markdown 中把程式碼區塊包起來，再把",{"type":27,"tag":39,"props":79,"children":81},{"className":80},[],[82],{"type":32,"value":83},"slot",{"type":32,"value":85},"外面那層",{"type":27,"tag":39,"props":87,"children":89},{"className":88},[],[90],{"type":32,"value":91},"div",{"type":32,"value":93},"填上",{"type":27,"tag":39,"props":95,"children":97},{"className":96},[],[98],{"type":32,"value":99},"ref",{"type":32,"value":101},"，這樣就可以去抓裡面的文字內容拿來寫入剪貼簿。自己寫出來大概是長這樣：",{"type":27,"tag":103,"props":104,"children":109},"pre",{"className":105,"code":106,"filename":107,"language":108,"meta":7,"style":7},"language-vue shiki shiki-themes github-dark","\u003Ctemplate>\n  \u003Cdiv>\n    \u003Cdiv>\n      \u003Cbutton @click=\"copyCode\" variant=\"link\">複製程式碼\u003C/button>\n    \u003C/div>\n\n    \u003Cdiv ref=\"code\">\n      \u003C!-- markdown中程式碼嵌入的地方 -->\n      \u003Cslot>\u003C/slot>\n    \u003C/div>\n  \u003C/div>\n\u003C/template>\n\n\u003Cscript>\nexport default {\n  methods: {\n    copyCode() {\n      if (this.copied) return\n\n      const { code } = this.$refs\n\n      if (navigator.clipboard?.writeText) {\n        const toCopyCode = code.innerText\n        navigator.clipboard.writeText(toCopyCode)\n      } else {\n        const range = document.createRange()\n        range.selectNode(code)\n\n        const selection = window.getSelection()\n        selection.removeAllRanges()\n        selection.addRange(range)\n\n        document.execCommand('copy')\n        selection.removeAllRanges()\n      }\n    },\n  },\n}\n\u003C/script>\n","article-code.vue","vue",[110],{"type":27,"tag":39,"props":111,"children":112},{"__ignoreMap":7},[113,136,153,170,242,259,269,299,309,334,350,367,384,392,409,429,438,452,482,490,527,535,548,572,591,609,641,660,668,699,717,735,743,772,788,797,806,815,824],{"type":27,"tag":114,"props":115,"children":118},"span",{"class":116,"line":117},"line",1,[119,125,131],{"type":27,"tag":114,"props":120,"children":122},{"style":121},"--shiki-default:#E1E4E8",[123],{"type":32,"value":124},"\u003C",{"type":27,"tag":114,"props":126,"children":128},{"style":127},"--shiki-default:#85E89D",[129],{"type":32,"value":130},"template",{"type":27,"tag":114,"props":132,"children":133},{"style":121},[134],{"type":32,"value":135},">\n",{"type":27,"tag":114,"props":137,"children":139},{"class":116,"line":138},2,[140,145,149],{"type":27,"tag":114,"props":141,"children":142},{"style":121},[143],{"type":32,"value":144},"  \u003C",{"type":27,"tag":114,"props":146,"children":147},{"style":127},[148],{"type":32,"value":91},{"type":27,"tag":114,"props":150,"children":151},{"style":121},[152],{"type":32,"value":135},{"type":27,"tag":114,"props":154,"children":156},{"class":116,"line":155},3,[157,162,166],{"type":27,"tag":114,"props":158,"children":159},{"style":121},[160],{"type":32,"value":161},"    \u003C",{"type":27,"tag":114,"props":163,"children":164},{"style":127},[165],{"type":32,"value":91},{"type":27,"tag":114,"props":167,"children":168},{"style":121},[169],{"type":32,"value":135},{"type":27,"tag":114,"props":171,"children":173},{"class":116,"line":172},4,[174,179,184,189,195,200,206,211,215,220,224,229,234,238],{"type":27,"tag":114,"props":175,"children":176},{"style":121},[177],{"type":32,"value":178},"      \u003C",{"type":27,"tag":114,"props":180,"children":181},{"style":127},[182],{"type":32,"value":183},"button",{"type":27,"tag":114,"props":185,"children":186},{"style":121},[187],{"type":32,"value":188}," @",{"type":27,"tag":114,"props":190,"children":192},{"style":191},"--shiki-default:#B392F0",[193],{"type":32,"value":194},"click",{"type":27,"tag":114,"props":196,"children":197},{"style":121},[198],{"type":32,"value":199},"=",{"type":27,"tag":114,"props":201,"children":203},{"style":202},"--shiki-default:#9ECBFF",[204],{"type":32,"value":205},"\"",{"type":27,"tag":114,"props":207,"children":208},{"style":121},[209],{"type":32,"value":210},"copyCode",{"type":27,"tag":114,"props":212,"children":213},{"style":202},[214],{"type":32,"value":205},{"type":27,"tag":114,"props":216,"children":217},{"style":191},[218],{"type":32,"value":219}," variant",{"type":27,"tag":114,"props":221,"children":222},{"style":121},[223],{"type":32,"value":199},{"type":27,"tag":114,"props":225,"children":226},{"style":202},[227],{"type":32,"value":228},"\"link\"",{"type":27,"tag":114,"props":230,"children":231},{"style":121},[232],{"type":32,"value":233},">複製程式碼\u003C/",{"type":27,"tag":114,"props":235,"children":236},{"style":127},[237],{"type":32,"value":183},{"type":27,"tag":114,"props":239,"children":240},{"style":121},[241],{"type":32,"value":135},{"type":27,"tag":114,"props":243,"children":245},{"class":116,"line":244},5,[246,251,255],{"type":27,"tag":114,"props":247,"children":248},{"style":121},[249],{"type":32,"value":250},"    \u003C/",{"type":27,"tag":114,"props":252,"children":253},{"style":127},[254],{"type":32,"value":91},{"type":27,"tag":114,"props":256,"children":257},{"style":121},[258],{"type":32,"value":135},{"type":27,"tag":114,"props":260,"children":262},{"class":116,"line":261},6,[263],{"type":27,"tag":114,"props":264,"children":266},{"emptyLinePlaceholder":265},true,[267],{"type":32,"value":268},"\n",{"type":27,"tag":114,"props":270,"children":272},{"class":116,"line":271},7,[273,277,281,286,290,295],{"type":27,"tag":114,"props":274,"children":275},{"style":121},[276],{"type":32,"value":161},{"type":27,"tag":114,"props":278,"children":279},{"style":127},[280],{"type":32,"value":91},{"type":27,"tag":114,"props":282,"children":283},{"style":191},[284],{"type":32,"value":285}," ref",{"type":27,"tag":114,"props":287,"children":288},{"style":121},[289],{"type":32,"value":199},{"type":27,"tag":114,"props":291,"children":292},{"style":202},[293],{"type":32,"value":294},"\"code\"",{"type":27,"tag":114,"props":296,"children":297},{"style":121},[298],{"type":32,"value":135},{"type":27,"tag":114,"props":300,"children":302},{"class":116,"line":301},8,[303],{"type":27,"tag":114,"props":304,"children":306},{"style":305},"--shiki-default:#6A737D",[307],{"type":32,"value":308},"      \u003C!-- markdown中程式碼嵌入的地方 -->\n",{"type":27,"tag":114,"props":310,"children":312},{"class":116,"line":311},9,[313,317,321,326,330],{"type":27,"tag":114,"props":314,"children":315},{"style":121},[316],{"type":32,"value":178},{"type":27,"tag":114,"props":318,"children":319},{"style":127},[320],{"type":32,"value":83},{"type":27,"tag":114,"props":322,"children":323},{"style":121},[324],{"type":32,"value":325},">\u003C/",{"type":27,"tag":114,"props":327,"children":328},{"style":127},[329],{"type":32,"value":83},{"type":27,"tag":114,"props":331,"children":332},{"style":121},[333],{"type":32,"value":135},{"type":27,"tag":114,"props":335,"children":337},{"class":116,"line":336},10,[338,342,346],{"type":27,"tag":114,"props":339,"children":340},{"style":121},[341],{"type":32,"value":250},{"type":27,"tag":114,"props":343,"children":344},{"style":127},[345],{"type":32,"value":91},{"type":27,"tag":114,"props":347,"children":348},{"style":121},[349],{"type":32,"value":135},{"type":27,"tag":114,"props":351,"children":353},{"class":116,"line":352},11,[354,359,363],{"type":27,"tag":114,"props":355,"children":356},{"style":121},[357],{"type":32,"value":358},"  \u003C/",{"type":27,"tag":114,"props":360,"children":361},{"style":127},[362],{"type":32,"value":91},{"type":27,"tag":114,"props":364,"children":365},{"style":121},[366],{"type":32,"value":135},{"type":27,"tag":114,"props":368,"children":370},{"class":116,"line":369},12,[371,376,380],{"type":27,"tag":114,"props":372,"children":373},{"style":121},[374],{"type":32,"value":375},"\u003C/",{"type":27,"tag":114,"props":377,"children":378},{"style":127},[379],{"type":32,"value":130},{"type":27,"tag":114,"props":381,"children":382},{"style":121},[383],{"type":32,"value":135},{"type":27,"tag":114,"props":385,"children":387},{"class":116,"line":386},13,[388],{"type":27,"tag":114,"props":389,"children":390},{"emptyLinePlaceholder":265},[391],{"type":32,"value":268},{"type":27,"tag":114,"props":393,"children":395},{"class":116,"line":394},14,[396,400,405],{"type":27,"tag":114,"props":397,"children":398},{"style":121},[399],{"type":32,"value":124},{"type":27,"tag":114,"props":401,"children":402},{"style":127},[403],{"type":32,"value":404},"script",{"type":27,"tag":114,"props":406,"children":407},{"style":121},[408],{"type":32,"value":135},{"type":27,"tag":114,"props":410,"children":412},{"class":116,"line":411},15,[413,419,424],{"type":27,"tag":114,"props":414,"children":416},{"style":415},"--shiki-default:#F97583",[417],{"type":32,"value":418},"export",{"type":27,"tag":114,"props":420,"children":421},{"style":415},[422],{"type":32,"value":423}," default",{"type":27,"tag":114,"props":425,"children":426},{"style":121},[427],{"type":32,"value":428}," {\n",{"type":27,"tag":114,"props":430,"children":432},{"class":116,"line":431},16,[433],{"type":27,"tag":114,"props":434,"children":435},{"style":121},[436],{"type":32,"value":437},"  methods: {\n",{"type":27,"tag":114,"props":439,"children":441},{"class":116,"line":440},17,[442,447],{"type":27,"tag":114,"props":443,"children":444},{"style":191},[445],{"type":32,"value":446},"    copyCode",{"type":27,"tag":114,"props":448,"children":449},{"style":121},[450],{"type":32,"value":451},"() {\n",{"type":27,"tag":114,"props":453,"children":455},{"class":116,"line":454},18,[456,461,466,472,477],{"type":27,"tag":114,"props":457,"children":458},{"style":415},[459],{"type":32,"value":460},"      if",{"type":27,"tag":114,"props":462,"children":463},{"style":121},[464],{"type":32,"value":465}," (",{"type":27,"tag":114,"props":467,"children":469},{"style":468},"--shiki-default:#79B8FF",[470],{"type":32,"value":471},"this",{"type":27,"tag":114,"props":473,"children":474},{"style":121},[475],{"type":32,"value":476},".copied) ",{"type":27,"tag":114,"props":478,"children":479},{"style":415},[480],{"type":32,"value":481},"return\n",{"type":27,"tag":114,"props":483,"children":485},{"class":116,"line":484},19,[486],{"type":27,"tag":114,"props":487,"children":488},{"emptyLinePlaceholder":265},[489],{"type":32,"value":268},{"type":27,"tag":114,"props":491,"children":493},{"class":116,"line":492},20,[494,499,504,508,513,517,522],{"type":27,"tag":114,"props":495,"children":496},{"style":415},[497],{"type":32,"value":498},"      const",{"type":27,"tag":114,"props":500,"children":501},{"style":121},[502],{"type":32,"value":503}," { ",{"type":27,"tag":114,"props":505,"children":506},{"style":468},[507],{"type":32,"value":39},{"type":27,"tag":114,"props":509,"children":510},{"style":121},[511],{"type":32,"value":512}," } ",{"type":27,"tag":114,"props":514,"children":515},{"style":415},[516],{"type":32,"value":199},{"type":27,"tag":114,"props":518,"children":519},{"style":468},[520],{"type":32,"value":521}," this",{"type":27,"tag":114,"props":523,"children":524},{"style":121},[525],{"type":32,"value":526},".$refs\n",{"type":27,"tag":114,"props":528,"children":530},{"class":116,"line":529},21,[531],{"type":27,"tag":114,"props":532,"children":533},{"emptyLinePlaceholder":265},[534],{"type":32,"value":268},{"type":27,"tag":114,"props":536,"children":538},{"class":116,"line":537},22,[539,543],{"type":27,"tag":114,"props":540,"children":541},{"style":415},[542],{"type":32,"value":460},{"type":27,"tag":114,"props":544,"children":545},{"style":121},[546],{"type":32,"value":547}," (navigator.clipboard?.writeText) {\n",{"type":27,"tag":114,"props":549,"children":551},{"class":116,"line":550},23,[552,557,562,567],{"type":27,"tag":114,"props":553,"children":554},{"style":415},[555],{"type":32,"value":556},"        const",{"type":27,"tag":114,"props":558,"children":559},{"style":468},[560],{"type":32,"value":561}," toCopyCode",{"type":27,"tag":114,"props":563,"children":564},{"style":415},[565],{"type":32,"value":566}," =",{"type":27,"tag":114,"props":568,"children":569},{"style":121},[570],{"type":32,"value":571}," code.innerText\n",{"type":27,"tag":114,"props":573,"children":575},{"class":116,"line":574},24,[576,581,586],{"type":27,"tag":114,"props":577,"children":578},{"style":121},[579],{"type":32,"value":580},"        navigator.clipboard.",{"type":27,"tag":114,"props":582,"children":583},{"style":191},[584],{"type":32,"value":585},"writeText",{"type":27,"tag":114,"props":587,"children":588},{"style":121},[589],{"type":32,"value":590},"(toCopyCode)\n",{"type":27,"tag":114,"props":592,"children":594},{"class":116,"line":593},25,[595,600,605],{"type":27,"tag":114,"props":596,"children":597},{"style":121},[598],{"type":32,"value":599},"      } ",{"type":27,"tag":114,"props":601,"children":602},{"style":415},[603],{"type":32,"value":604},"else",{"type":27,"tag":114,"props":606,"children":607},{"style":121},[608],{"type":32,"value":428},{"type":27,"tag":114,"props":610,"children":612},{"class":116,"line":611},26,[613,617,622,626,631,636],{"type":27,"tag":114,"props":614,"children":615},{"style":415},[616],{"type":32,"value":556},{"type":27,"tag":114,"props":618,"children":619},{"style":468},[620],{"type":32,"value":621}," range",{"type":27,"tag":114,"props":623,"children":624},{"style":415},[625],{"type":32,"value":566},{"type":27,"tag":114,"props":627,"children":628},{"style":121},[629],{"type":32,"value":630}," document.",{"type":27,"tag":114,"props":632,"children":633},{"style":191},[634],{"type":32,"value":635},"createRange",{"type":27,"tag":114,"props":637,"children":638},{"style":121},[639],{"type":32,"value":640},"()\n",{"type":27,"tag":114,"props":642,"children":644},{"class":116,"line":643},27,[645,650,655],{"type":27,"tag":114,"props":646,"children":647},{"style":121},[648],{"type":32,"value":649},"        range.",{"type":27,"tag":114,"props":651,"children":652},{"style":191},[653],{"type":32,"value":654},"selectNode",{"type":27,"tag":114,"props":656,"children":657},{"style":121},[658],{"type":32,"value":659},"(code)\n",{"type":27,"tag":114,"props":661,"children":663},{"class":116,"line":662},28,[664],{"type":27,"tag":114,"props":665,"children":666},{"emptyLinePlaceholder":265},[667],{"type":32,"value":268},{"type":27,"tag":114,"props":669,"children":671},{"class":116,"line":670},29,[672,676,681,685,690,695],{"type":27,"tag":114,"props":673,"children":674},{"style":415},[675],{"type":32,"value":556},{"type":27,"tag":114,"props":677,"children":678},{"style":468},[679],{"type":32,"value":680}," selection",{"type":27,"tag":114,"props":682,"children":683},{"style":415},[684],{"type":32,"value":566},{"type":27,"tag":114,"props":686,"children":687},{"style":121},[688],{"type":32,"value":689}," window.",{"type":27,"tag":114,"props":691,"children":692},{"style":191},[693],{"type":32,"value":694},"getSelection",{"type":27,"tag":114,"props":696,"children":697},{"style":121},[698],{"type":32,"value":640},{"type":27,"tag":114,"props":700,"children":702},{"class":116,"line":701},30,[703,708,713],{"type":27,"tag":114,"props":704,"children":705},{"style":121},[706],{"type":32,"value":707},"        selection.",{"type":27,"tag":114,"props":709,"children":710},{"style":191},[711],{"type":32,"value":712},"removeAllRanges",{"type":27,"tag":114,"props":714,"children":715},{"style":121},[716],{"type":32,"value":640},{"type":27,"tag":114,"props":718,"children":720},{"class":116,"line":719},31,[721,725,730],{"type":27,"tag":114,"props":722,"children":723},{"style":121},[724],{"type":32,"value":707},{"type":27,"tag":114,"props":726,"children":727},{"style":191},[728],{"type":32,"value":729},"addRange",{"type":27,"tag":114,"props":731,"children":732},{"style":121},[733],{"type":32,"value":734},"(range)\n",{"type":27,"tag":114,"props":736,"children":738},{"class":116,"line":737},32,[739],{"type":27,"tag":114,"props":740,"children":741},{"emptyLinePlaceholder":265},[742],{"type":32,"value":268},{"type":27,"tag":114,"props":744,"children":746},{"class":116,"line":745},33,[747,752,757,762,767],{"type":27,"tag":114,"props":748,"children":749},{"style":121},[750],{"type":32,"value":751},"        document.",{"type":27,"tag":114,"props":753,"children":754},{"style":191},[755],{"type":32,"value":756},"execCommand",{"type":27,"tag":114,"props":758,"children":759},{"style":121},[760],{"type":32,"value":761},"(",{"type":27,"tag":114,"props":763,"children":764},{"style":202},[765],{"type":32,"value":766},"'copy'",{"type":27,"tag":114,"props":768,"children":769},{"style":121},[770],{"type":32,"value":771},")\n",{"type":27,"tag":114,"props":773,"children":775},{"class":116,"line":774},34,[776,780,784],{"type":27,"tag":114,"props":777,"children":778},{"style":121},[779],{"type":32,"value":707},{"type":27,"tag":114,"props":781,"children":782},{"style":191},[783],{"type":32,"value":712},{"type":27,"tag":114,"props":785,"children":786},{"style":121},[787],{"type":32,"value":640},{"type":27,"tag":114,"props":789,"children":791},{"class":116,"line":790},35,[792],{"type":27,"tag":114,"props":793,"children":794},{"style":121},[795],{"type":32,"value":796},"      }\n",{"type":27,"tag":114,"props":798,"children":800},{"class":116,"line":799},36,[801],{"type":27,"tag":114,"props":802,"children":803},{"style":121},[804],{"type":32,"value":805},"    },\n",{"type":27,"tag":114,"props":807,"children":809},{"class":116,"line":808},37,[810],{"type":27,"tag":114,"props":811,"children":812},{"style":121},[813],{"type":32,"value":814},"  },\n",{"type":27,"tag":114,"props":816,"children":818},{"class":116,"line":817},38,[819],{"type":27,"tag":114,"props":820,"children":821},{"style":121},[822],{"type":32,"value":823},"}\n",{"type":27,"tag":114,"props":825,"children":827},{"class":116,"line":826},39,[828,832,836],{"type":27,"tag":114,"props":829,"children":830},{"style":121},[831],{"type":32,"value":375},{"type":27,"tag":114,"props":833,"children":834},{"style":127},[835],{"type":32,"value":404},{"type":27,"tag":114,"props":837,"children":838},{"style":121},[839],{"type":32,"value":135},{"type":27,"tag":28,"props":841,"children":842},{},[843],{"type":32,"value":844},"而把元件寫在 markdown 檔案會長這樣：",{"type":27,"tag":103,"props":846,"children":850},{"className":847,"code":848,"filename":849,"language":16,"meta":7,"style":7},"language-markdown shiki shiki-themes github-dark","\u003Carticle-code>\n\n```bash\nsudo dnf update -y\n```\n\n\u003C/article-code>\n","article.md",[851],{"type":27,"tag":39,"props":852,"children":853},{"__ignoreMap":7},[854,870,877,885,893,901,908],{"type":27,"tag":114,"props":855,"children":856},{"class":116,"line":117},[857,861,866],{"type":27,"tag":114,"props":858,"children":859},{"style":121},[860],{"type":32,"value":124},{"type":27,"tag":114,"props":862,"children":863},{"style":127},[864],{"type":32,"value":865},"article-code",{"type":27,"tag":114,"props":867,"children":868},{"style":121},[869],{"type":32,"value":135},{"type":27,"tag":114,"props":871,"children":872},{"class":116,"line":138},[873],{"type":27,"tag":114,"props":874,"children":875},{"emptyLinePlaceholder":265},[876],{"type":32,"value":268},{"type":27,"tag":114,"props":878,"children":879},{"class":116,"line":155},[880],{"type":27,"tag":114,"props":881,"children":882},{"style":121},[883],{"type":32,"value":884},"```bash\n",{"type":27,"tag":114,"props":886,"children":887},{"class":116,"line":172},[888],{"type":27,"tag":114,"props":889,"children":890},{"style":121},[891],{"type":32,"value":892},"sudo dnf update -y\n",{"type":27,"tag":114,"props":894,"children":895},{"class":116,"line":244},[896],{"type":27,"tag":114,"props":897,"children":898},{"style":121},[899],{"type":32,"value":900},"```\n",{"type":27,"tag":114,"props":902,"children":903},{"class":116,"line":261},[904],{"type":27,"tag":114,"props":905,"children":906},{"emptyLinePlaceholder":265},[907],{"type":32,"value":268},{"type":27,"tag":114,"props":909,"children":910},{"class":116,"line":271},[911,915,919],{"type":27,"tag":114,"props":912,"children":913},{"style":121},[914],{"type":32,"value":375},{"type":27,"tag":114,"props":916,"children":917},{"style":127},[918],{"type":32,"value":865},{"type":27,"tag":114,"props":920,"children":921},{"style":121},[922],{"type":32,"value":135},{"type":27,"tag":28,"props":924,"children":925},{},[926],{"type":32,"value":927},"可以看到因為 markdown 解析的關係，元件標籤與程式碼區塊之間上下還要再空一行。",{"type":27,"tag":28,"props":929,"children":930},{},[931],{"type":32,"value":932},"因為每次寫程式碼區塊的時候都要嵌入元件，若文章有大量或是連續的程式碼區塊，閱讀性會降低很多，最後看到頭很痛。後來就找找有沒有辦法在處理程式碼區塊產生 html 時，順便用元件包起來的方法，這樣就不用一直自己額外包起來，後來查到還真的有。",{"type":27,"tag":64,"props":934,"children":935},{},[],{"type":27,"tag":68,"props":937,"children":939},{"id":938},"自訂程式碼處理器",[940],{"type":32,"value":938},{"type":27,"tag":28,"props":942,"children":943},{},[944,946,952,954,963,965,972],{"type":32,"value":945},"在 Nuxt Content v1 中有一個設定值",{"type":27,"tag":39,"props":947,"children":949},{"className":948},[],[950],{"type":32,"value":951},"markdown.highlighter",{"type":32,"value":953},"，可以",{"type":27,"tag":955,"props":956,"children":960},"a",{"href":957,"rel":958},"https://content.nuxt.com/v1/getting-started/configuration#markdownhighlighter",[959],"nofollow",[961],{"type":32,"value":962},"自己決定程式碼被解析後的外層 HTML 結構",{"type":32,"value":964},"，官方",{"type":27,"tag":955,"props":966,"children":969},{"href":967,"rel":968},"https://content.nuxt.com/v1/community/snippets#custom-highlighter",[959],[970],{"type":32,"value":971},"使用了 highlight.js 以及 shiki 作為示範",{"type":32,"value":973},"，看了看之後滿喜歡 shiki 的，所以就使用 shiki。",{"type":27,"tag":103,"props":975,"children":979},{"className":976,"code":977,"filename":44,"language":978,"meta":7,"style":7},"language-js shiki shiki-themes github-dark","import shiki from 'shiki'\n\nexport default {\n  content: {\n    markdown: {\n      async highlighter() {\n        const highlighter = await shiki.getHighlighter({\n          theme: 'nord',\n        })\n\n        return (rawCode, lang, { fileName }, { h, node, u }) => {\n          const highlightedCode = highlighter.codeToHtml(rawCode, lang)\n\n          const children = []\n          children.push(u('raw', highlightedCode))\n\n          return h(\n            node,\n            'article-code',\n            {\n              className: 'nuxt-content-highlight',\n              fileName,\n              lang,\n            },\n            children\n          )\n        }\n      },\n    },\n  },\n}\n","js",[980],{"type":27,"tag":39,"props":981,"children":982},{"__ignoreMap":7},[983,1006,1013,1028,1036,1044,1061,1096,1114,1122,1129,1209,1241,1248,1269,1304,1311,1329,1337,1349,1357,1374,1382,1390,1398,1406,1414,1422,1430,1437,1444],{"type":27,"tag":114,"props":984,"children":985},{"class":116,"line":117},[986,991,996,1001],{"type":27,"tag":114,"props":987,"children":988},{"style":415},[989],{"type":32,"value":990},"import",{"type":27,"tag":114,"props":992,"children":993},{"style":121},[994],{"type":32,"value":995}," shiki ",{"type":27,"tag":114,"props":997,"children":998},{"style":415},[999],{"type":32,"value":1000},"from",{"type":27,"tag":114,"props":1002,"children":1003},{"style":202},[1004],{"type":32,"value":1005}," 'shiki'\n",{"type":27,"tag":114,"props":1007,"children":1008},{"class":116,"line":138},[1009],{"type":27,"tag":114,"props":1010,"children":1011},{"emptyLinePlaceholder":265},[1012],{"type":32,"value":268},{"type":27,"tag":114,"props":1014,"children":1015},{"class":116,"line":155},[1016,1020,1024],{"type":27,"tag":114,"props":1017,"children":1018},{"style":415},[1019],{"type":32,"value":418},{"type":27,"tag":114,"props":1021,"children":1022},{"style":415},[1023],{"type":32,"value":423},{"type":27,"tag":114,"props":1025,"children":1026},{"style":121},[1027],{"type":32,"value":428},{"type":27,"tag":114,"props":1029,"children":1030},{"class":116,"line":172},[1031],{"type":27,"tag":114,"props":1032,"children":1033},{"style":121},[1034],{"type":32,"value":1035},"  content: {\n",{"type":27,"tag":114,"props":1037,"children":1038},{"class":116,"line":244},[1039],{"type":27,"tag":114,"props":1040,"children":1041},{"style":121},[1042],{"type":32,"value":1043},"    markdown: {\n",{"type":27,"tag":114,"props":1045,"children":1046},{"class":116,"line":261},[1047,1052,1057],{"type":27,"tag":114,"props":1048,"children":1049},{"style":415},[1050],{"type":32,"value":1051},"      async",{"type":27,"tag":114,"props":1053,"children":1054},{"style":191},[1055],{"type":32,"value":1056}," highlighter",{"type":27,"tag":114,"props":1058,"children":1059},{"style":121},[1060],{"type":32,"value":451},{"type":27,"tag":114,"props":1062,"children":1063},{"class":116,"line":271},[1064,1068,1072,1076,1081,1086,1091],{"type":27,"tag":114,"props":1065,"children":1066},{"style":415},[1067],{"type":32,"value":556},{"type":27,"tag":114,"props":1069,"children":1070},{"style":468},[1071],{"type":32,"value":1056},{"type":27,"tag":114,"props":1073,"children":1074},{"style":415},[1075],{"type":32,"value":566},{"type":27,"tag":114,"props":1077,"children":1078},{"style":415},[1079],{"type":32,"value":1080}," await",{"type":27,"tag":114,"props":1082,"children":1083},{"style":121},[1084],{"type":32,"value":1085}," shiki.",{"type":27,"tag":114,"props":1087,"children":1088},{"style":191},[1089],{"type":32,"value":1090},"getHighlighter",{"type":27,"tag":114,"props":1092,"children":1093},{"style":121},[1094],{"type":32,"value":1095},"({\n",{"type":27,"tag":114,"props":1097,"children":1098},{"class":116,"line":301},[1099,1104,1109],{"type":27,"tag":114,"props":1100,"children":1101},{"style":121},[1102],{"type":32,"value":1103},"          theme: ",{"type":27,"tag":114,"props":1105,"children":1106},{"style":202},[1107],{"type":32,"value":1108},"'nord'",{"type":27,"tag":114,"props":1110,"children":1111},{"style":121},[1112],{"type":32,"value":1113},",\n",{"type":27,"tag":114,"props":1115,"children":1116},{"class":116,"line":311},[1117],{"type":27,"tag":114,"props":1118,"children":1119},{"style":121},[1120],{"type":32,"value":1121},"        })\n",{"type":27,"tag":114,"props":1123,"children":1124},{"class":116,"line":336},[1125],{"type":27,"tag":114,"props":1126,"children":1127},{"emptyLinePlaceholder":265},[1128],{"type":32,"value":268},{"type":27,"tag":114,"props":1130,"children":1131},{"class":116,"line":352},[1132,1137,1141,1147,1152,1157,1162,1167,1172,1177,1181,1186,1190,1195,1200,1205],{"type":27,"tag":114,"props":1133,"children":1134},{"style":415},[1135],{"type":32,"value":1136},"        return",{"type":27,"tag":114,"props":1138,"children":1139},{"style":121},[1140],{"type":32,"value":465},{"type":27,"tag":114,"props":1142,"children":1144},{"style":1143},"--shiki-default:#FFAB70",[1145],{"type":32,"value":1146},"rawCode",{"type":27,"tag":114,"props":1148,"children":1149},{"style":121},[1150],{"type":32,"value":1151},", ",{"type":27,"tag":114,"props":1153,"children":1154},{"style":1143},[1155],{"type":32,"value":1156},"lang",{"type":27,"tag":114,"props":1158,"children":1159},{"style":121},[1160],{"type":32,"value":1161},", { ",{"type":27,"tag":114,"props":1163,"children":1164},{"style":1143},[1165],{"type":32,"value":1166},"fileName",{"type":27,"tag":114,"props":1168,"children":1169},{"style":121},[1170],{"type":32,"value":1171}," }, { ",{"type":27,"tag":114,"props":1173,"children":1174},{"style":1143},[1175],{"type":32,"value":1176},"h",{"type":27,"tag":114,"props":1178,"children":1179},{"style":121},[1180],{"type":32,"value":1151},{"type":27,"tag":114,"props":1182,"children":1183},{"style":1143},[1184],{"type":32,"value":1185},"node",{"type":27,"tag":114,"props":1187,"children":1188},{"style":121},[1189],{"type":32,"value":1151},{"type":27,"tag":114,"props":1191,"children":1192},{"style":1143},[1193],{"type":32,"value":1194},"u",{"type":27,"tag":114,"props":1196,"children":1197},{"style":121},[1198],{"type":32,"value":1199}," }) ",{"type":27,"tag":114,"props":1201,"children":1202},{"style":415},[1203],{"type":32,"value":1204},"=>",{"type":27,"tag":114,"props":1206,"children":1207},{"style":121},[1208],{"type":32,"value":428},{"type":27,"tag":114,"props":1210,"children":1211},{"class":116,"line":369},[1212,1217,1222,1226,1231,1236],{"type":27,"tag":114,"props":1213,"children":1214},{"style":415},[1215],{"type":32,"value":1216},"          const",{"type":27,"tag":114,"props":1218,"children":1219},{"style":468},[1220],{"type":32,"value":1221}," highlightedCode",{"type":27,"tag":114,"props":1223,"children":1224},{"style":415},[1225],{"type":32,"value":566},{"type":27,"tag":114,"props":1227,"children":1228},{"style":121},[1229],{"type":32,"value":1230}," highlighter.",{"type":27,"tag":114,"props":1232,"children":1233},{"style":191},[1234],{"type":32,"value":1235},"codeToHtml",{"type":27,"tag":114,"props":1237,"children":1238},{"style":121},[1239],{"type":32,"value":1240},"(rawCode, lang)\n",{"type":27,"tag":114,"props":1242,"children":1243},{"class":116,"line":386},[1244],{"type":27,"tag":114,"props":1245,"children":1246},{"emptyLinePlaceholder":265},[1247],{"type":32,"value":268},{"type":27,"tag":114,"props":1249,"children":1250},{"class":116,"line":394},[1251,1255,1260,1264],{"type":27,"tag":114,"props":1252,"children":1253},{"style":415},[1254],{"type":32,"value":1216},{"type":27,"tag":114,"props":1256,"children":1257},{"style":468},[1258],{"type":32,"value":1259}," children",{"type":27,"tag":114,"props":1261,"children":1262},{"style":415},[1263],{"type":32,"value":566},{"type":27,"tag":114,"props":1265,"children":1266},{"style":121},[1267],{"type":32,"value":1268}," []\n",{"type":27,"tag":114,"props":1270,"children":1271},{"class":116,"line":411},[1272,1277,1282,1286,1290,1294,1299],{"type":27,"tag":114,"props":1273,"children":1274},{"style":121},[1275],{"type":32,"value":1276},"          children.",{"type":27,"tag":114,"props":1278,"children":1279},{"style":191},[1280],{"type":32,"value":1281},"push",{"type":27,"tag":114,"props":1283,"children":1284},{"style":121},[1285],{"type":32,"value":761},{"type":27,"tag":114,"props":1287,"children":1288},{"style":191},[1289],{"type":32,"value":1194},{"type":27,"tag":114,"props":1291,"children":1292},{"style":121},[1293],{"type":32,"value":761},{"type":27,"tag":114,"props":1295,"children":1296},{"style":202},[1297],{"type":32,"value":1298},"'raw'",{"type":27,"tag":114,"props":1300,"children":1301},{"style":121},[1302],{"type":32,"value":1303},", highlightedCode))\n",{"type":27,"tag":114,"props":1305,"children":1306},{"class":116,"line":431},[1307],{"type":27,"tag":114,"props":1308,"children":1309},{"emptyLinePlaceholder":265},[1310],{"type":32,"value":268},{"type":27,"tag":114,"props":1312,"children":1313},{"class":116,"line":440},[1314,1319,1324],{"type":27,"tag":114,"props":1315,"children":1316},{"style":415},[1317],{"type":32,"value":1318},"          return",{"type":27,"tag":114,"props":1320,"children":1321},{"style":191},[1322],{"type":32,"value":1323}," h",{"type":27,"tag":114,"props":1325,"children":1326},{"style":121},[1327],{"type":32,"value":1328},"(\n",{"type":27,"tag":114,"props":1330,"children":1331},{"class":116,"line":454},[1332],{"type":27,"tag":114,"props":1333,"children":1334},{"style":121},[1335],{"type":32,"value":1336},"            node,\n",{"type":27,"tag":114,"props":1338,"children":1339},{"class":116,"line":484},[1340,1345],{"type":27,"tag":114,"props":1341,"children":1342},{"style":202},[1343],{"type":32,"value":1344},"            'article-code'",{"type":27,"tag":114,"props":1346,"children":1347},{"style":121},[1348],{"type":32,"value":1113},{"type":27,"tag":114,"props":1350,"children":1351},{"class":116,"line":492},[1352],{"type":27,"tag":114,"props":1353,"children":1354},{"style":121},[1355],{"type":32,"value":1356},"            {\n",{"type":27,"tag":114,"props":1358,"children":1359},{"class":116,"line":529},[1360,1365,1370],{"type":27,"tag":114,"props":1361,"children":1362},{"style":121},[1363],{"type":32,"value":1364},"              className: ",{"type":27,"tag":114,"props":1366,"children":1367},{"style":202},[1368],{"type":32,"value":1369},"'nuxt-content-highlight'",{"type":27,"tag":114,"props":1371,"children":1372},{"style":121},[1373],{"type":32,"value":1113},{"type":27,"tag":114,"props":1375,"children":1376},{"class":116,"line":537},[1377],{"type":27,"tag":114,"props":1378,"children":1379},{"style":121},[1380],{"type":32,"value":1381},"              fileName,\n",{"type":27,"tag":114,"props":1383,"children":1384},{"class":116,"line":550},[1385],{"type":27,"tag":114,"props":1386,"children":1387},{"style":121},[1388],{"type":32,"value":1389},"              lang,\n",{"type":27,"tag":114,"props":1391,"children":1392},{"class":116,"line":574},[1393],{"type":27,"tag":114,"props":1394,"children":1395},{"style":121},[1396],{"type":32,"value":1397},"            },\n",{"type":27,"tag":114,"props":1399,"children":1400},{"class":116,"line":593},[1401],{"type":27,"tag":114,"props":1402,"children":1403},{"style":121},[1404],{"type":32,"value":1405},"            children\n",{"type":27,"tag":114,"props":1407,"children":1408},{"class":116,"line":611},[1409],{"type":27,"tag":114,"props":1410,"children":1411},{"style":121},[1412],{"type":32,"value":1413},"          )\n",{"type":27,"tag":114,"props":1415,"children":1416},{"class":116,"line":643},[1417],{"type":27,"tag":114,"props":1418,"children":1419},{"style":121},[1420],{"type":32,"value":1421},"        }\n",{"type":27,"tag":114,"props":1423,"children":1424},{"class":116,"line":662},[1425],{"type":27,"tag":114,"props":1426,"children":1427},{"style":121},[1428],{"type":32,"value":1429},"      },\n",{"type":27,"tag":114,"props":1431,"children":1432},{"class":116,"line":670},[1433],{"type":27,"tag":114,"props":1434,"children":1435},{"style":121},[1436],{"type":32,"value":805},{"type":27,"tag":114,"props":1438,"children":1439},{"class":116,"line":701},[1440],{"type":27,"tag":114,"props":1441,"children":1442},{"style":121},[1443],{"type":32,"value":814},{"type":27,"tag":114,"props":1445,"children":1446},{"class":116,"line":719},[1447],{"type":27,"tag":114,"props":1448,"children":1449},{"style":121},[1450],{"type":32,"value":823},{"type":27,"tag":28,"props":1452,"children":1453},{},[1454,1456,1461,1463,1468],{"type":32,"value":1455},"在這邊解析完後產生的 html 會再被 Nuxt 處理，所以可以插入 vue component，也可以直接把",{"type":27,"tag":39,"props":1457,"children":1459},{"className":1458},[],[1460],{"type":32,"value":1166},{"type":32,"value":1462},"或",{"type":27,"tag":39,"props":1464,"children":1466},{"className":1465},[],[1467],{"type":32,"value":1156},{"type":32,"value":1469},"作為 props 傳遞給元件，自訂性更高。",{"type":27,"tag":64,"props":1471,"children":1472},{},[],{"type":27,"tag":28,"props":1474,"children":1475},{},[1476],{"type":32,"value":1477},"大概就是這樣了！最一開始是想說有沒有內建的方式可以簡單實作這功能，查了一下好像沒查到，所以就自己動手搞了，幸好也沒有太複雜。",{"type":27,"tag":1479,"props":1480,"children":1481},"style",{},[1482],{"type":32,"value":1483},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":138,"depth":138,"links":1485},[1486,1487],{"id":70,"depth":138,"text":70},{"id":938,"depth":138,"text":938},"content:articles:2023:nuxt2_content_code_block_copy_paste.md","content","articles/2023/nuxt2_content_code_block_copy_paste.md","articles/2023/nuxt2_content_code_block_copy_paste","md","2023-12-12T05:50:50.000Z","nuxt2_content_code_block_copy_paste",[1496,1510,1524],{"title":1497,"description":1498,"img":1499,"tags":1500,"readingTime":1503,"createdAt":1508,"updatedAt":1508,"slug":1509},"部落格Nuxt 2升級Nuxt 3（三）：Nuxt Content v1 → v2","在初步修改非模組的設定值之後，接著就要開始著手模組的升級，這部份是連同改寫為 composition api 一起做的，畢竟不可能只升級特定模組的用法而不去動到其他程式碼，但為了讓文章閱讀容易，就還是分模組來紀錄。","924/Ia2nWi.png",[1501,12,108,13,1502,15],"blog","nuxt3",{"text":1504,"minutes":1505,"time":1506,"words":1507},"7 min read",6.025,361500,1205,"2024-01-24T07:26:04.000Z","nuxt2_to_nuxt3_blog_3_modules_content",{"title":1511,"description":1512,"img":1499,"tags":1513,"readingTime":1518,"createdAt":1522,"updatedAt":1508,"slug":1523},"部落格Nuxt 2升級Nuxt 3（一）：bootstrapVue置換成自製的bootrap5元件","如之前規劃，部落格升級 Nuxt3 的第一步是先把 bootstrapVue 抽換成自己實做的 bootstrap5。這篇是紀錄過程中覺得特別困難或是需要研究的部份。",[1501,12,108,13,1502,1514,1515,1516,1517],"bootstrapVue","bootstrap 4","bootstrap 5","bootstrap",{"text":19,"minutes":1519,"time":1520,"words":1521},3.53,211800,706,"2024-01-23T05:33:23.000Z","nuxt2_to_nuxt3_blog_1_ui",{"title":1525,"description":1526,"img":1499,"tags":1527,"readingTime":1528,"createdAt":1522,"updatedAt":1508,"slug":1533},"部落格Nuxt 2升級Nuxt 3：前言","從去年年初開始建置的這個部落格網站，邊寫文章的同時陸陸續續補上功能後，大概到上個月才終於像是有個部落格的樣子。但由於 Nuxt2 即將在 2024/06/30 停止官方支援，而作為基底的 Vue2 更是在 2023/12/31 已停止官方支援，所以……想說要做的新功能可能先放著，先把部落格從 Nuxt2 升級到 Nuxt3 比較好。",[1501,12,108,13,1502],{"text":1529,"minutes":1530,"time":1531,"words":1532},"5 min read",4.28,256800,856,"nuxt2_to_nuxt3_blog_0_intro",1733405691082]