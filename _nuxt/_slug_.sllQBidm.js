import{u as te,q as re,_ as $,o as l,c as m,r as U,a as h,w as A,b as k,t as M,d as b,n as g,e as f,f as se,g as ae,h as ue,F as j,i as D,j as C,A as ne,k as oe,l as H,m as ce,p as ie,s as _,v as le,x as R,y as w,z as I,B as de,C as fe,D as me,E as ge,G as pe,H as xe,I as _e,J as he,K as be}from"./entry.7R-vIcaJ.js";import ye from"./ContentRenderer.zBTbCYKQ.js";import{_ as ve}from"./common-outer-link.zvlXPrpJ.js";import{g as Ce}from"./_commonjsHelpers.5-cIlDoe.js";import{_ as $e,t as N,v as Ae}from"./bVisible.XJbmSgc8.js";import{u as ke}from"./index.Hvj9VAjO.js";import"./ContentRendererMarkdown.vue.XaZNz9bT.js";import"./index.1dSrIji7.js";const Re=e=>{if(!e)throw new Error("Need slug to find article!");return te(e,()=>re("articles").where({slug:e}).findOne(),"$SpfYyUQ7eF")},we={},Oe={class:"badge bg-secondary text-bg-secondary"};function Se(e,t){return l(),m("span",Oe,[U(e.$slots,"default")])}const Ee=$(we,[["render",Se]]),Le={__name:"article-tag",props:{tagName:{type:String,default:""}},setup(e){return(t,r)=>(l(),h(Ee,{class:"d-inline-block fw-normal font-monospace"},{default:A(()=>[k(" #"),U(t.$slots,"default",{},()=>[k(M(e.tagName),1)])]),_:3}))}},Ue="_article_13yi1_2",Me="_title_13yi1_5",je="_date_13yi1_10",De="_tags_13yi1_13",He="_banner_13yi1_16",Ie={article:Ue,title:Me,date:je,tags:De,banner:He,"article-img":"_article-img_13yi1_17"},Ne={class:"d-flex flex-row align-items-center my-2"},We={__name:"common-article",props:{document:{type:Object,default:()=>({})}},setup(e){return(t,r)=>{const u=ye;return l(),m("article",{class:g(t.$style.article)},[b("h1",{class:g(t.$style.title)},M(e.document.title),3),b("div",Ne,[f(se,{document:e.document,class:g(t.$style.date)},null,8,["document","class"]),f(ae,{minutes:e.document.readingTime.minutes},null,8,["minutes"]),f(ue,{article:e.document},null,8,["article"])]),e.document.tags?(l(),m("div",{key:0,class:g(["d-flex flex-wrap my-2",t.$style.tags])},[(l(!0),m(j,null,D(e.document.tags,s=>(l(),h(Le,{key:s,"tag-name":s,class:"me-1 mb-1"},null,8,["tag-name"]))),128))],2)):C("",!0),e.document.img?(l(),h(ne,{key:1,img:e.document.img,"img-class":"rounded",class:g(["rounded",t.$style.banner]),preload:""},null,8,["img","class"])):C("",!0),f(u,{value:e.document,class:"nuxt-content"},null,8,["value"])],2)}}},ze={$style:Ie},Te=$(We,[["__cssModules",ze]]),Be=({article:e={tags:[],slug:""},articles:t=[]})=>{const r=[],u={},s=e.tags,c=e.slug;if(!Array.isArray(s)||s.length===0)return r;t.forEach(o=>{const{tags:a,slug:i}=o;if(!Array.isArray(a)||c===i)return;const d=a.reduce((v,x)=>v+s.some(y=>typeof x=="string"&&typeof y=="string"&&x.toLowerCase()===y.toLowerCase()),0);d!==0&&(u[d]||(u[d]=[]),u[d].push(o))});const n=Object.keys(u);if(n.length>0){n.sort((i,d)=>d-i);const o=3;let a=0;for(;a<n.length&&r.length<o;){const i=u[n[a]];i.length>0?r.push(i.pop()):a++}}return r},Ze=oe({components:{ArticleCard:H},props:{article:{type:Object,default:()=>({tags:[],slug:""})}},async setup({article:e}){let t,r;const{data:u}=([t,r]=ce(()=>ie()),t=await t,r(),t),s=Be({articles:_(u),article:e}),c=Array.isArray(s)&&s.length>0;return{relatedArticles:s,hasArticles:c}}},"$SK0yqTOiOq"),Je={key:0},Pe=b("div",{class:"h5 mb-4 text-center"}," 相關文章 ",-1);function Ve(e,t,r,u,s,c){const n=H;return e.hasArticles?(l(),m("div",Je,[Pe,(l(!0),m(j,null,D(e.relatedArticles,(o,a)=>(l(),h(n,{key:a,article:o,class:"mt-3"},null,8,["article"]))),128))])):C("",!0)}const qe=$(Ze,[["render",Ve]]),Fe=["src"],Ge={__name:"liker-button",setup(e){return(t,r)=>(l(),h(ve,{href:"https://ko-fi.com/chaoschaoshuang"},{default:A(()=>[b("img",{src:`${t.$config.public.base}images/donation/kofi_button_blue.png`,alt:"Support me on Ko-fi",class:"img-fluid d-block",width:"200"},null,8,Fe)]),_:1}))}};function Ke(e,t,r,u){var s=-1,c=e==null?0:e.length;for(u&&c&&(r=e[++s]);++s<c;)r=t(r,e[s],s,e);return r}var Ye=Ke,Qe=$e,Xe={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},et=Qe(Xe),tt=et,rt=tt,st=N,at=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ut="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",ot="\\u20d0-\\u20ff",ct=ut+nt+ot,it="["+ct+"]",lt=RegExp(it,"g");function dt(e){return e=st(e),e&&e.replace(at,rt).replace(lt,"")}var ft=dt,mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function gt(e){return e.match(mt)||[]}var pt=gt,xt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function _t(e){return xt.test(e)}var ht=_t,W="\\ud800-\\udfff",bt="\\u0300-\\u036f",yt="\\ufe20-\\ufe2f",vt="\\u20d0-\\u20ff",Ct=bt+yt+vt,z="\\u2700-\\u27bf",T="a-z\\xdf-\\xf6\\xf8-\\xff",$t="\\xac\\xb1\\xd7\\xf7",At="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kt="\\u2000-\\u206f",Rt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",B="A-Z\\xc0-\\xd6\\xd8-\\xde",wt="\\ufe0e\\ufe0f",Z=$t+At+kt+Rt,J="['’]",O="["+Z+"]",Ot="["+Ct+"]",P="\\d+",St="["+z+"]",V="["+T+"]",q="[^"+W+Z+P+z+T+B+"]",Et="\\ud83c[\\udffb-\\udfff]",Lt="(?:"+Ot+"|"+Et+")",Ut="[^"+W+"]",F="(?:\\ud83c[\\udde6-\\uddff]){2}",G="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+B+"]",Mt="\\u200d",S="(?:"+V+"|"+q+")",jt="(?:"+p+"|"+q+")",E="(?:"+J+"(?:d|ll|m|re|s|t|ve))?",L="(?:"+J+"(?:D|LL|M|RE|S|T|VE))?",K=Lt+"?",Y="["+wt+"]?",Dt="(?:"+Mt+"(?:"+[Ut,F,G].join("|")+")"+Y+K+")*",Ht="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",It="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nt=Y+K+Dt,Wt="(?:"+[St,F,G].join("|")+")"+Nt,zt=RegExp([p+"?"+V+"+"+E+"(?="+[O,p,"$"].join("|")+")",jt+"+"+L+"(?="+[O,p+S,"$"].join("|")+")",p+"?"+S+"+"+E,p+"+"+L,It,Ht,P,Wt].join("|"),"g");function Tt(e){return e.match(zt)||[]}var Bt=Tt,Zt=pt,Jt=ht,Pt=N,Vt=Bt;function qt(e,t,r){return e=Pt(e),t=r?void 0:t,t===void 0?Jt(e)?Vt(e):Zt(e):e.match(t)||[]}var Ft=qt,Gt=Ye,Kt=ft,Yt=Ft,Qt="['’]",Xt=RegExp(Qt,"g");function er(e){return function(t){return Gt(Yt(Kt(t).replace(Xt,"")),e,"")}}var tr=er,rr=tr,sr=rr(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),ar=sr;const ur=Ce(ar),nr={__name:"article-comment",setup(e){const t=le(),r=R(()=>t.darkComputed?"dark":"light"),u={repo:"HuangChingChieh/blog",repoId:"R_kgDOHHJsJQ",category:"Announcements",categoryId:"DIC_kwDOHHJsJc4CcL42",reactionsEnabled:0,emitMetadata:0,inputPosition:"top",lang:"zh-TW",loading:"lazy",theme:r.value},s=w(!1),c=w(null),n=R(()=>{const a=[];if(s.value){const i={src:"https://giscus.app/client.js",crossorigin:"anonymous"};Object.keys(u).forEach(d=>{i[`data-${ur(d)}`]=u[d]}),a.push(i)}return a});I({script:n}),de(r,()=>{const a=c.value.querySelector("iframe.giscus-frame");a&&a instanceof HTMLIFrameElement&&a.contentWindow.postMessage({giscus:{setConfig:{theme:r.value}}},"https://giscus.app")});const o=a=>{a&&!s.value&&(s.value=!0)};return(a,i)=>fe((l(),m("div",{ref_key:"comments",ref:c,class:"giscus"},null,512)),[[_(Ae),o]])}},or=({description:e="",title:t="",img:r="",url:u="",tags:s=[],createdAt:c="",updatedAt:n=""})=>{const o=[{key:"description",name:"description",content:e},{key:"og:url",property:"og:url",content:u},{key:"og:type",property:"og:type",content:"article"},{key:"og:title",property:"og:title",content:t},{key:"og:description",property:"og:description",content:e},{key:"og:image",property:"og:image",content:r},{key:"og:article:published_time",property:"og:article:published_time",content:c},{key:"og:article:modified_time",property:"og:article:modified_time",content:n}];return s.forEach(a=>{o.push({property:"og:article:tag",content:a})}),{title:t,meta:o,script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"BlogPosting",headline:t,image:[r],datePublished:c,dateModified:n,author:[{"@type":"Person",name:"HuangChingChieh",url:"https://huangchingchieh.github.io/"}]}}]}},xr={__name:"[slug]",async setup(e){let t,r;const u=ke();me((o,a,i)=>{u.toc=[],i()});const s=ge(),{slug:c}=s.params,{data:n}=([t,r]=pe(()=>Re(c)),t=await t,r(),t);return n!=null&&n.value?u.toc=n.value.body.toc.links:xe()({statusCode:"404"}),I((()=>{let o=[];if(n){const{appHost:a,imageServer:i}=_e().public,{title:d,description:v,img:x,tags:y,updatedAt:Q,createdAt:X}=n.value,ee=a+s.fullPath.substring(1);o=or({description:v,url:ee,title:d,img:x?`${i}1600x1200q100/${x}`:`${a}images/default-og.png`,tags:y,updatedAt:Q,createdAt:X})}return o})()),(o,a)=>(l(),m("div",null,[f(he,null,{default:A(()=>[f(Te,{document:_(n)},null,8,["document"])]),_:1}),b("hr",{class:g(["d-block",`d-${_(be)}-none`])},null,2),f(Ge,{class:"mt-5 d-flex justify-content-center"}),f(nr,{class:"mt-5"}),f(qe,{article:_(n),class:"mt-5"},null,8,["article"])]))}};export{xr as default};
