__NUXT_JSONP__("/nuxt2_dynamic_routes_sitemap", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI){aa[0]={id:D,depth:L,text:D};aa[1]={id:ab,depth:E,text:ac};aa[2]={id:ad,depth:E,text:ae};aa[3]={id:F,depth:E,text:F};aa[4]={id:af,depth:E,text:ag};aa[5]={id:G,depth:L,text:G};return {data:[{article:{slug:"nuxt2_dynamic_routes_sitemap",description:"Sitemap 雖然對網站來說非必要，但為了 SEO 考量通常都還是會建立。而在 Nuxt 2 中可以透過@nuxt\u002Fsitemap模組來簡單建立 sitemap。但若遇到動態頁面，這個模組無法自動新增，官方文件要求使用者必須自行新增，而官方建議的作法以及網路上查到的方式好像都滿麻煩的，所以自己搞了一個小撇步出來，覺得頗方便，所以就紀錄下來。",title:"在Nuxt 2中建立動態routes的sitemap",img:"923\u002FKaAGJw.png",tags:[B,C,"sitemap"],category:"frontend",toc:aa,body:{type:ah,children:[{type:b,tag:j,props:{},children:[{type:a,value:ai},{type:b,tag:i,props:{href:aj,rel:[r,s,t],target:u},children:[{type:a,value:ak}]},{type:a,value:al}]},{type:a,value:e},{type:a,value:e},{type:b,tag:am,props:{},children:[]},{type:a,value:e},{type:b,tag:an,props:{id:D},children:[{type:b,tag:i,props:{href:"#%E8%A7%A3%E6%B1%BA%E9%81%8E%E7%A8%8B",ariaHidden:o,tabIndex:v},children:[{type:b,tag:c,props:{className:[w,x]},children:[]}]},{type:a,value:D}]},{type:a,value:e},{type:b,tag:H,props:{id:ab},children:[{type:b,tag:i,props:{href:"#%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AD%B0",ariaHidden:o,tabIndex:v},children:[{type:b,tag:c,props:{className:[w,x]},children:[]}]},{type:a,value:ac}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"首先，根據"},{type:b,tag:i,props:{href:"https:\u002F\u002Fsitemap.nuxtjs.org\u002Fusage\u002Fsitemap#setup-a-sitemap",rel:[r,s,t],target:u},children:[{type:a,value:"官方文件"}]},{type:a,value:"所說，模組本身只會預設建立固定頁面（也就是在路徑 "},{type:b,tag:h,props:{},children:[{type:a,value:"pages"}]},{type:a,value:" 中建立的非動態頁面——也就是不使用 "},{type:b,tag:h,props:{},children:[{type:a,value:"_param.vue"}]},{type:a,value:" 形式建立的頁面）的 sitemap："}]},{type:a,value:e},{type:b,tag:"blockquote",props:{},children:[{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"All static routes (eg. "},{type:b,tag:h,props:{},children:[{type:a,value:"\u002Fpages\u002Fabout.vue"}]},{type:a,value:") are automatically add to the sitemap, but you can exclude each of them with the "},{type:b,tag:i,props:{href:"https:\u002F\u002Fsitemap.nuxtjs.org\u002Fusage\u002Fsitemap-options#exclude-optional---string-array",rel:[r,s,t],target:u},children:[{type:b,tag:h,props:{},children:[{type:a,value:"exclude"}]}]},{type:a,value:" property."}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"For dynamic routes (eg. "},{type:b,tag:h,props:{},children:[{type:a,value:"\u002Fpages\u002F\\_id.vue"}]},{type:a,value:"), you have to declare them with the "},{type:b,tag:i,props:{href:"https:\u002F\u002Fsitemap.nuxtjs.org\u002Fusage\u002Fsitemap-options#routes-optional---array--function",rel:[r,s,t],target:u},children:[{type:b,tag:h,props:{},children:[{type:a,value:I}]}]},{type:a,value:" property. This option can be an array or a function. In addition, the routes defined in "},{type:b,tag:h,props:{},children:[{type:a,value:"generate.routes"}]},{type:a,value:" will be automatically used for the sitemap."}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"然而官方建議的作法滿麻煩的："}]},{type:a,value:e},{type:b,tag:M,props:{fileName:N,lang:ao},children:[{type:b,tag:O,props:{className:[P,Q],style:R,tabIndex:S},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:J},children:[{type:a,value:ap}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:J},children:[{type:a,value:aq}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:y}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:A}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:ar}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:y}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:m}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:as}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:n},children:[{type:a,value:at}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:m}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:au}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:p},children:[{type:a,value:o}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:m}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:"exclude:"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:av}]},{type:b,tag:c,props:{style:n},children:[{type:a,value:"'\u002Fsecret'"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:", "}]},{type:b,tag:c,props:{style:n},children:[{type:a,value:"'\u002Fadmin\u002F**'"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:"],"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:m}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:"routes:"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:av}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:T}]},{type:b,tag:c,props:{style:n},children:[{type:a,value:"'\u002Fpage\u002F1'"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:T}]},{type:b,tag:c,props:{style:n},children:[{type:a,value:"'\u002Fpage\u002F2'"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:"      {"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:z}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:"url:"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:n},children:[{type:a,value:"'\u002Fpage\u002F3'"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:z}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:"changefreq:"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:n},children:[{type:a,value:"'daily'"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:z}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:"priority:"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:"color: #B5CEA8"},children:[{type:a,value:"1"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:z}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:"lastmod:"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:n},children:[{type:a,value:"'2017-06-30T13:30:00.000Z'"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:aw}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:"    ],"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:U}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:ax}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[]}]}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"也就是要自己去抓取動態頁面而且把可能會用到的動態參數自己填上去，然後做成陣列的形式回傳，若動態頁面不多或許還算容易，但若動態頁面不少或是參數很複雜，那可能就會很麻煩。上網查了一下，作法好像都差不多，所以就自己思考有沒有比較好的作法。"}]},{type:a,value:e},{type:b,tag:H,props:{id:ad},children:[{type:b,tag:i,props:{href:"#%E4%BD%BF%E7%94%A8-nuxt-%E7%9A%84%E5%85%A7%E5%BB%BA-crawler",ariaHidden:o,tabIndex:v},children:[{type:b,tag:c,props:{className:[w,x]},children:[]}]},{type:a,value:ae}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"後來想想，Nuxt 2 不是有內建 "},{type:b,tag:i,props:{href:"https:\u002F\u002Fv2.nuxt.com\u002Fdocs\u002Fget-started\u002Fcommands#static-deployment-pre-rendered",rel:[r,s,t],target:u},children:[{type:a,value:"crawler"}]},{type:a,value:" 來產生動態參數的靜態頁面嗎？如果在 Nuxt 2 的 "},{type:b,tag:i,props:{href:"https:\u002F\u002Fv2.nuxt.com\u002Fdocs\u002Finternals-glossary\u002Finternals-generator#hooks",rel:[r,s,t],target:u},children:[{type:a,value:"Generate Hooks"}]},{type:a,value:" 中把抓到的 routes 放到一個全域變數，然後在 sitemap 模組在產生檔案時傳進去，就不用自己傳了吧？"}]},{type:a,value:e},{type:b,tag:H,props:{id:F},children:[{type:b,tag:i,props:{href:"#%E5%AF%A6%E4%BD%9C",ariaHidden:o,tabIndex:v},children:[{type:b,tag:c,props:{className:[w,x]},children:[]}]},{type:a,value:F}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"那麼就來實作吧，大致的概念就跟上面說的一樣，"},{type:b,tag:h,props:{},children:[{type:a,value:N}]},{type:a,value:"設定檔前面宣告一個陣列，在"},{type:b,tag:h,props:{},children:[{type:a,value:"generate:hooks"}]},{type:a,value:"的時候存放到陣列中，並傳給 sitemap 模組："}]},{type:a,value:e},{type:b,tag:M,props:{fileName:N,lang:ao},children:[{type:b,tag:O,props:{className:[P,Q],style:R,tabIndex:S},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:V},children:[{type:a,value:"\u002F\u002F 存放從generate hooks偷出來的routes"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:p},children:[{type:a,value:ay}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:az},children:[{type:a,value:I}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:" = []"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:J},children:[{type:a,value:ap}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:J},children:[{type:a,value:aq}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:y}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:A}]},{type:b,tag:c,props:{style:V},children:[{type:a,value:"\u002F\u002F 從generate hooks偷routes出來給sitemap使用"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:A}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:"hooks:"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:y}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:m}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:"generate:"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:y}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:T}]},{type:b,tag:c,props:{style:aA},children:[{type:a,value:aB}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:aC}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:W}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:") {"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:z}]},{type:b,tag:c,props:{style:p},children:[{type:a,value:ay}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:" { "}]},{type:b,tag:c,props:{style:az},children:[{type:a,value:aB}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:" } = "}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:W}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:z}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:I}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:"."}]},{type:b,tag:c,props:{style:aA},children:[{type:a,value:"push"}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:aC}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:W}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:")"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:aw}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:"    },"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:U}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:A}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:ar}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:y}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:m}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:as}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:n},children:[{type:a,value:at}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:m}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:au}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:k}]},{type:b,tag:c,props:{style:p},children:[{type:a,value:o}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:m}]},{type:b,tag:c,props:{style:V},children:[{type:a,value:"\u002F\u002F 直接使用routes"}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:m}]},{type:b,tag:c,props:{style:g},children:[{type:a,value:I}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:l}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:U}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:ax}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[]}]}]}]},{type:a,value:e},{type:b,tag:H,props:{id:af},children:[{type:b,tag:i,props:{href:"#%E6%AA%A2%E9%A9%97-sitemap",ariaHidden:o,tabIndex:v},children:[{type:b,tag:c,props:{className:[w,x]},children:[]}]},{type:a,value:ag}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"設定好之後執行"},{type:b,tag:h,props:{},children:[{type:a,value:"npm run generate"}]},{type:a,value:"再檢查"},{type:b,tag:h,props:{},children:[{type:a,value:"dist\u002Fsitemap.xml"}]},{type:a,value:"，以這個部落格為例子，就有看到出現下面的動態頁面網址，代表成功了："}]},{type:a,value:e},{type:b,tag:M,props:{lang:"xml"},children:[{type:b,tag:O,props:{className:[P,Q],style:R,tabIndex:S},children:[{type:b,tag:h,props:{},children:[{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:q},children:[{type:a,value:aD}]},{type:b,tag:c,props:{style:p},children:[{type:a,value:aE}]},{type:b,tag:c,props:{style:q},children:[{type:a,value:K}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:d},children:[{type:a,value:A}]},{type:b,tag:c,props:{style:q},children:[{type:a,value:aD}]},{type:b,tag:c,props:{style:p},children:[{type:a,value:aF}]},{type:b,tag:c,props:{style:q},children:[{type:a,value:K}]},{type:b,tag:c,props:{style:d},children:[{type:a,value:"https:\u002F\u002Fhuangchingchieh.github.io\u002Fblog\u002Fpages\u002F1"}]},{type:b,tag:c,props:{style:q},children:[{type:a,value:aG}]},{type:b,tag:c,props:{style:p},children:[{type:a,value:aF}]},{type:b,tag:c,props:{style:q},children:[{type:a,value:K}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[{type:b,tag:c,props:{style:q},children:[{type:a,value:aG}]},{type:b,tag:c,props:{style:p},children:[{type:a,value:aE}]},{type:b,tag:c,props:{style:q},children:[{type:a,value:K}]}]},{type:a,value:e},{type:b,tag:c,props:{className:[f]},children:[]}]}]}]},{type:a,value:e},{type:b,tag:am,props:{},children:[]},{type:a,value:e},{type:b,tag:an,props:{id:G},children:[{type:b,tag:i,props:{href:"#%E5%BE%8C%E8%A8%98",ariaHidden:o,tabIndex:v},children:[{type:b,tag:c,props:{className:[w,x]},children:[]}]},{type:a,value:G}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"其實有點疑問為何這個模組沒有整合 crawler，找了一下官方文件好像也沒說明，但總之自己亂搞弄出來一個解決方式了（？）。"}]}]},excerpt:{type:ah,children:[{type:b,tag:j,props:{},children:[{type:a,value:ai},{type:b,tag:i,props:{href:aj,rel:[r,s,t],target:u},children:[{type:a,value:ak}]},{type:a,value:al}]}]},dir:"\u002Farticles\u002F2023",path:"\u002Farticles\u002F2023\u002Fnuxt2_dynamic_routes_sitemap",extension:".md",createdAt:X,updatedAt:X,plainText:"Sitemap 雖然對網站來說非必要，但為了 SEO 考量通常都還是會建立。而在 Nuxt 2 中可以透過@nuxt\u002Fsitemap模組來簡單建立 sitemap。但若遇到動態頁面，這個模組無法自動新增，官方文件要求使用者必須自行新增，而官方建議的作法以及網路上查到的方式好像都滿麻煩的，所以自己搞了一個小撇步出來，覺得頗方便，所以就紀錄下來。\n\n\n解決過程\n官方建議？\n首先，根據官方文件所說，模組本身只會預設建立固定頁面（也就是在路徑 pages 中建立的非動態頁面——也就是不使用 _param.vue 形式建立的頁面）的 sitemap：\n\nAll static routes (eg. \u002Fpages\u002Fabout.vue) are automatically add to the sitemap, but you can exclude each of them with the exclude property.\nFor dynamic routes (eg. \u002Fpages\u002F\\_id.vue), you have to declare them with the routes property. This option can be an array or a function. In addition, the routes defined in generate.routes will be automatically used for the sitemap.\n\n然而官方建議的作法滿麻煩的：\nexport default {\n  sitemap: {\n    hostname: 'https:\u002F\u002Fexample.com',\n    gzip: true,\n    exclude: ['\u002Fsecret', '\u002Fadmin\u002F**'],\n    routes: [\n      '\u002Fpage\u002F1',\n      '\u002Fpage\u002F2',\n      {\n        url: '\u002Fpage\u002F3',\n        changefreq: 'daily',\n        priority: 1,\n        lastmod: '2017-06-30T13:30:00.000Z',\n      },\n    ],\n  },\n}\n\n也就是要自己去抓取動態頁面而且把可能會用到的動態參數自己填上去，然後做成陣列的形式回傳，若動態頁面不多或許還算容易，但若動態頁面不少或是參數很複雜，那可能就會很麻煩。上網查了一下，作法好像都差不多，所以就自己思考有沒有比較好的作法。\n使用 Nuxt 的內建 crawler\n後來想想，Nuxt 2 不是有內建 crawler 來產生動態參數的靜態頁面嗎？如果在 Nuxt 2 的 Generate Hooks 中把抓到的 routes 放到一個全域變數，然後在 sitemap 模組在產生檔案時傳進去，就不用自己傳了吧？\n實作\n那麼就來實作吧，大致的概念就跟上面說的一樣，nuxt.config.js設定檔前面宣告一個陣列，在generate:hooks的時候存放到陣列中，並傳給 sitemap 模組：\n\u002F\u002F 存放從generate hooks偷出來的routes\nconst routes = []\n\nexport default {\n  \u002F\u002F 從generate hooks偷routes出來給sitemap使用\n  hooks: {\n    generate: {\n      route(data) {\n        const { route } = data\n        routes.push(data)\n      },\n    },\n  },\n  sitemap: {\n    hostname: 'https:\u002F\u002Fexample.com',\n    gzip: true,\n    \u002F\u002F 直接使用routes\n    routes,\n  },\n}\n\n檢驗 sitemap\n設定好之後執行npm run generate再檢查dist\u002Fsitemap.xml，以這個部落格為例子，就有看到出現下面的動態頁面網址，代表成功了：\n\u003Curl\u003E\n  \u003Cloc\u003Ehttps:\u002F\u002Fhuangchingchieh.github.io\u002Fblog\u002Fpages\u002F1\u003C\u002Floc\u003E\n\u003C\u002Furl\u003E\n\n\n後記\n其實有點疑問為何這個模組沒有整合 crawler，找了一下官方文件好像也沒說明，但總之自己亂搞弄出來一個解決方式了（？）。",readingTime:aH},relatedArticles:[{slug:"nuxt2_content_git",description:"建完這個部落格之後，發現好像不太對，怎麼前幾天發的文章，日期卻變成今天。後來發現是因為若從 A 電腦更新文章，在 B 電腦用 git 同步更新檔案之後，檔案的更新日期會變成當下的時間。\n上網查了一下後，發現已經有人針對這個問題提出解方：那就是去撈這個檔案在 git 紀錄上的建立與更新時間，來取代本機檔案的建立與更新時間。",title:"使用nuxt-content-git取得Nuxt2 Content中正確的檔案時間",tags:[C,B],img:"924\u002FWCeWkF.jpg",createdAt:"2023-01-06T13:35:19.000Z",updatedAt:X,readingTime:L},{slug:"nuxt2_bootstrapvue_treeshaking",description:"Bootstrap 是個很好用的 UI 框架，在 Vue 生態系中主要由 Bootstrap Vue 去作銜接，然而在專案中幾乎不會完全使用到 Bootstrap 的所有功能，這時如果把不必要的 css \u002F js 編譯移除，可以降低編譯後專案的大小，這種行為也被稱為 Tree shaking。本篇紀錄了自己在 Nuxt2 中使用 Bootstrap Vue 時，Tree Shaking 的一些步驟。",title:"Nuxt2中的BootstrapVue TreeShaking",img:"924\u002FOqxy2g.jpg",tags:[C,B,"bootstrap"],createdAt:"2023-01-02T08:03:25.000Z",updatedAt:"2023-12-11T10:19:13.000Z",readingTime:aH},{slug:"nuxt3_vite_pwa",description:"之前在 Nuxt2 時可以滿無痛的使用 nuxt\u002Fpwa 來為網站新增 PWA 功能，但因為此模組沒有開發 Nuxt3 版本，最近開始接觸 Nuxt3 後得尋找替代品，在官方模組清單頁面中搜尋 pwa 只發現一個模組：vite-pwa-nuxt。",title:"Nuxt3中使用vite-pwa實現pwa功能",img:"923\u002FXCrOen.png",tags:[B,"nuxt3",C,"pwa","vite-pwa"],createdAt:aI,updatedAt:aI,readingTime:6}]}],fetch:{"0":{mobileBreakpoint:Y,bannerSizes:[Z,_,$]},"1":{mobileBreakpoint:Y,bannerSizes:[Z,_,$]},"2":{mobileBreakpoint:Y,bannerSizes:[Z,_,$]}},mutations:[["setToc",aa]]}}("text","element","span","color: #D4D4D4","\n","line","color: #9CDCFE","code","a","p"," ",",","    ","color: #CE9178","true","color: #569CD6","color: #808080","nofollow","noopener","noreferrer","_blank",-1,"icon","icon-link"," {","        ","  ","nuxt","vue","解決過程",3,"實作","後記","h3","routes","color: #C586C0","\u003E",2,"article-code","nuxt.config.js","pre","shiki","dark-plus","background-color: #1E1E1E",0,"      ","  },","color: #6A9955","data","2023-10-30T09:24:31.000Z","sm","(min-width: 992px) 320px","(min-width: 768px) 640px","640px",Array(6),"官方建議","官方建議？","使用-nuxt-的內建-crawler","使用 Nuxt 的內建 crawler","檢驗-sitemap","檢驗 sitemap","root","Sitemap 雖然對網站來說非必要，但為了 SEO 考量通常都還是會建立。而在 Nuxt 2 中可以透過","https:\u002F\u002Fsitemap.nuxtjs.org\u002F","@nuxt\u002Fsitemap","模組來簡單建立 sitemap。但若遇到動態頁面，這個模組無法自動新增，官方文件要求使用者必須自行新增，而官方建議的作法以及網路上查到的方式好像都滿麻煩的，所以自己搞了一個小撇步出來，覺得頗方便，所以就紀錄下來。","hr","h2","javascript","export","default","sitemap:","hostname:","'https:\u002F\u002Fexample.com'","gzip:"," [","      },","}","const","color: #4FC1FF","color: #DCDCAA","route","(","\u003C","url","loc","\u003C\u002F",4,"2024-01-18T05:22:42.000Z")));