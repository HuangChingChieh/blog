import{u as O,K as $,q as G,N,_,E as A,x as y,o as r,c as m,d as u,n as l,e as s,w as d,R as k,F as P,i as p,b as C,t as v,Q as w,a as x,l as B}from"./BSiuPVZ0.js";const E=({page:e,category:c})=>O(`${c}_${e}`,()=>{const{perPage:o}=$().public;let a=G("articles").only(N.card);return c!=="all"&&(a=a.where({category:c})),a.sort({createdAt:-1}).skip((e-1)*o).limit(o).find()}),M="_link_17r71_2",F={link:M},Q={class:"pagination justify-content-center mb-2"},R={class:"text-center small"},b=3,S={__name:"interface-pagination",props:{linkGen:{type:Function,default:()=>{}},numberOfPages:{type:[String,Number],default:1}},setup(e){const c=e,o=A(),a=y(()=>Number(o.params.page)||1),f=y(()=>{const t=[],{numberOfPages:g}=c;if(g>=b){let n=a.value;const i=Math.ceil(b/2),h=g-i+1;for(n<i?n=i:n>h&&(n=h);t.length<b;)t.push(n-i+1+t.length)}else for(;t.length<g;)t.unshift(g-t.length);return t});return(t,g)=>{const n=w;return r(),m("nav",null,[u("ul",Q,[u("li",{class:l(["page-item",{disabled:a.value===1}])},[s(n,{class:l(["page-link",t.$style.link]),to:e.linkGen(1)},{default:d(()=>[s(k,{icon:"chevron-double-left"})]),_:1},8,["class","to"])],2),u("li",{class:l(["page-item",{disabled:a.value===1}])},[s(n,{class:l(["page-link",t.$style.link]),to:e.linkGen(a.value>1?a.value-1:1)},{default:d(()=>[s(k,{icon:"chevron-left"})]),_:1},8,["class","to"])],2),(r(!0),m(P,null,p(f.value,i=>(r(),m("li",{key:i,class:l(["page-item",{active:i===a.value}])},[s(n,{class:l(["page-link",t.$style.link]),to:e.linkGen(i)},{default:d(()=>[C(v(i),1)]),_:2},1032,["class","to"])],2))),128)),u("li",{class:l(["page-item",{disabled:a.value===e.numberOfPages}])},[s(n,{class:l(["page-link",t.$style.link]),to:e.linkGen(a.value<e.numberOfPages?a.value+1:e.numberOfPages)},{default:d(()=>[s(k,{icon:"chevron-right"})]),_:1},8,["class","to"])],2),u("li",{class:l(["page-item",{disabled:a.value===e.numberOfPages}])},[s(n,{class:l(["page-link",t.$style.link]),to:e.linkGen(e.numberOfPages)},{default:d(()=>[s(k,{icon:"chevron-double-right"})]),_:1},8,["class","to"])],2)]),u("aside",R," 共 "+v(e.numberOfPages)+" 頁 ",1)])}}},V={$style:F},q=_(S,[["__cssModules",V]]),I={__name:"articles-list",props:{articles:{type:Array,default:()=>[]},linkGen:{type:Function,default:()=>{}},numberOfPages:{type:[String,Number],default:1}},setup(e){return(c,o)=>(r(),m("div",null,[(r(!0),m(P,null,p(e.articles,(a,f)=>(r(),x(B,{key:f,article:a,class:"mb-4","preload-img":f<=4},null,8,["article","preload-img"]))),128)),s(q,{"link-gen":e.linkGen,"number-of-pages":e.numberOfPages},null,8,["link-gen","number-of-pages"])]))}};export{I as _,E as u};
