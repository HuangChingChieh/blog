import{_ as D}from"./Dlb2dx94.js";import{o as g,c as C,w as i,d as P,b as r,a as e,k as h,t as T,af as V,ag as j,p as E,n as F,ah as I,ab as z,C as p,x as H,l as $,F as O,m as R,u as o,z as M}from"./9uk_k_NE.js";import{_ as S}from"./C3xf7Q-d.js";import{_ as W,a as q}from"./CviiwCkz.js";import{_ as G}from"./DTdwSkRA.js";import{u as f}from"./VzDmZYIc.js";import"./DsRS4ZMo.js";const J={class:"px-4 py-4"},K={class:"flex flex-row justify-end items-center mt-3"},Q={__name:"article-card",props:{article:{type:Object,default:()=>({})},preloadImg:{type:Boolean,default:!1},imgBreakPoints:{type:Object,default:()=>({sm:640,md:224,lg:310,xl:400,"2xl":480})}},setup(a){return(t,n)=>{const y=D,x=V,k=j,l=E,m=F,d=I;return g(),C(d,{class:"flex flex-col bg-background dark:bg-background-dark",article:a.article},{default:i(()=>[a.article.img?(g(),C(y,{key:0,img:a.article.img,"break-points":a.imgBreakPoints,class:"rounded-t"},null,8,["img","break-points"])):P("",!0),r("div",J,[e(x,null,{default:i(()=>[h(T(a.article.title),1)]),_:1}),e(k,{description:a.article.description,class:"mt-2"},null,8,["description"]),r("div",K,[e(l,{minutes:a.article.readingTime.minutes,class:"me-6"},null,8,["minutes"]),e(m,{document:a.article},null,8,["document"])])])]),_:1},8,["article"])}}},U={class:"grid grid-cols-1 md:grid-cols-3 gap-normal"},X={class:"text-center"},it={__name:"index",async setup(a){let t,n;const{appHost:y,description:x,categoriesMap:k}=z().public,{data:l}=([t,n]=p(()=>f({category:"frontend",limit:1})),t=await t,n(),t),{data:m}=([t,n]=p(()=>f({category:"life",limit:1})),t=await t,n(),t),{data:d}=([t,n]=p(()=>f({category:"linux",limit:1})),t=await t,n(),t),w=[{categories:"life",article:m.value[0]},{categories:"frontend",article:l.value[0]},{categories:"linux",article:d.value[0]}],v=(u=[],s=[])=>{const _=[];return u.forEach(c=>{s.find(A=>A.slug===c.slug)||_.push(c)}),_},{data:B}=([t,n]=p(async()=>M("IndexArticlesNewest",async()=>{const{data:u}=await f({page:1,category:"all"});return v(u.value,w.map(({article:s})=>s))})),t=await t,n(),t);return H({title:"",titleTemplate:"隨機手札",meta:[{key:"og:url",property:"og:url",content:y},{key:"og:description",property:"og:description",content:x}]}),(u,s)=>{const _=Q,c=S,A=q,L=G,N=W;return g(),$("div",null,[r("div",U,[(g(),$(O,null,R(w,b=>e(c,{key:b.article.slug,title:o(k)[b.categories]},{default:i(()=>[e(_,{article:b.article},null,8,["article"])]),_:2},1032,["title"])),64))]),s[1]||(s[1]=r("hr",{class:"my-12"},null,-1)),e(N,{"reverse-order-when-mobile":"","select-not-in-articles":[...o(m),...o(l),...o(d)]},{default:i(()=>[e(c,{title:"最新文章"},{default:i(()=>[e(A,{articles:o(B)},null,8,["articles"]),r("div",X,[e(L,{to:{path:"/category/all/1"},size:"large",class:"mt-normal mb-6"},{default:i(()=>s[0]||(s[0]=[h(" 更多文章 ")])),_:1})])]),_:1})]),_:1},8,["select-not-in-articles"])])}}};export{it as default};
