import{_ as R}from"./DNnzwOfY.js";import{_ as h,o as r,c as g,r as I,a as f,w as c,b as x,t as $,j as M,d as _,n as p,e as o,Q as S,R as j,H as w,F as A,i as b,u as y,L as V,K as B,M as q,S as D,f as P,g as z,C as E,v as N,x as L,y as O,T as W}from"./D1mLeTax.js";import{_ as Q,A as F}from"./dtyHDUWG.js";import{u as k}from"./qzoBa52h.js";import{I as H}from"./BNZuENhG.js";const K={},G={class:"h5 mb-4 text-center"};function J(e,n){return r(),g("div",G,[I(e.$slots,"default")])}const U=h(K,[["render",J]]),X={class:"shadow-sm rounded bg-foreground p-4 border-top border-primary border-5"},C={__name:"aside-container",props:{title:{type:String,default:""}},setup(e){return(n,i)=>{const t=U;return r(),g("div",X,[e.title?(r(),f(t,{key:0},{default:c(()=>[x($(e.title),1)]),_:1})):M("",!0),I(n.$slots,"default")])}}},Y="_imgWrapper_1hc7b_2",Z="_p_1hc7b_7",ee={imgWrapper:Y,p:Z},te={},ne={class:"text-muted text-center"};function se(e,n){const i=S,t=j,s=C;return r(),f(s,{title:"嗨，我是阿傑！"},{default:c(()=>[_("div",{class:p(["mx-auto",e.$style.imgWrapper])},[o(i,{"img-class":"p-1 rounded-circle border border-primary border-2 mb-4",img:"922/bqqju1.jpg"})],2),_("div",ne,[_("p",{class:p([e.$style.p,"mx-auto"])}," 一名浮沈於前端汪洋的小碼農，主要使用的框架為Vue及其生態系。平常的興趣是喝飲料、玩手遊（鎖鏈戰記、歧路旅人：大陸的霸者）。 ",2),o(t,{to:{path:"/buy_me_a_tea",hash:"#關於我"},variant:"outline-primary",class:"rounded-pill"},{default:c(()=>n[0]||(n[0]=[x(" 關於我 ")])),_:1})])]),_:1})}const oe={$style:ee},ce=h(te,[["render",se],["__cssModules",oe]]),ae="_li_19z1d_2",re={li:ae},le={class:"d-flex flex-column list-unstyled mb-0"},ie={class:"flex-grow-1"},_e={__name:"aside-categories",setup(e){const{categoriesMap:n}=w().public,i=k(),{categories:t}=i;return(s,l)=>{const a=B,d=C;return r(),f(d,{title:"文章分類"},{default:c(()=>[_("nav",null,[_("ul",le,[(r(!0),g(A,null,b(y(n),(u,m)=>(r(),g("li",{key:m,class:p(["py-2",s.$style.li])},[o(a,{class:"d-flex flex-row text-decoration-none",to:y(V)({category:m})},{default:c(()=>[l[0]||(l[0]=_("span",{class:"text-primary me-1"},"#",-1)),_("span",ie,$(u),1),_("small",null,"("+$(y(t)[m].count)+")",1)]),_:2},1032,["to"])],2))),128))])])]),_:1})}}},ue={$style:re},de=h(_e,[["__cssModules",ue]]),me={class:"text-center"},fe={__name:"aside-tags",setup(e){const n=k(),{tagsObj:i}=n;let t=[];return Object.keys(i).forEach(s=>{const l=i[s];l>1&&t.push({name:s,count:l})}),t.sort((s,l)=>{let a=l.count-s.count;return a===0&&(a=s.name>l.name?1:-1),a}),t=t.slice(0,15),(s,l)=>{const a=j,d=C;return r(),f(d,{title:"文章標籤"},{default:c(()=>[_("div",me,[(r(!0),g(A,null,b(y(t),u=>(r(),f(a,{key:u.name,to:{path:"/buy_me_a_tea",hash:"#關於我"},variant:"outline-primary",size:"sm",class:"rounded-pill mb-2 me-2"},{default:c(()=>[x($(u.name),1)]),_:2},1024))),128))])]),_:1})}}},pe="_img_1176j_2",ge="_title_1176j_8",ye={img:pe,title:ge},$e={class:"d-flex flex-row w-100"},he={class:"d-flex flex-column flex-grow-1"},xe={class:"flex-grow-1"},Ae={class:"d-flex flex-row"},be={__name:"article-card-compact",props:{article:{type:Object,default:null},noContainer:{type:Boolean,default:!1}},setup(e){return(n,i)=>{const t=S,s=D,l=P,a=z,d=B;return e.article?(r(),f(d,{key:0,class:p(["d-flex text-decoration-none",e.noContainer?"":"bg-foreground rounded shadow-sm p-3"]),to:y(q)(e.article)},{default:c(()=>[_("article",$e,[o(t,{class:p([n.$style.img,"me-3 rounded"]),img:e.article.img,"img-class":"rounded"},null,8,["class","img"]),_("div",he,[_("div",xe,[o(s,{class:p([n.$style.title,"mb-1"])},{default:c(()=>[x($(e.article.title),1)]),_:1},8,["class"])]),_("div",Ae,[o(l,{document:e.article,class:"small me-3"},null,8,["document"]),o(a,{minutes:e.article.readingTime.minutes},null,8,["minutes"])])])])]),_:1},8,["class","to"])):M("",!0)}}},Ce={$style:ye},ve=h(be,[["__cssModules",Ce]]),we="_grid_c35nu_2",Ie={grid:we},ke={__name:"articles-select",props:{category:{type:String,default:"all"},noContainer:{type:Boolean,default:!1},cardComponent:{type:Object,default:ve},notInArticles:{type:Array,default:()=>[]}},async setup(e){let n,i;const t=e,s=k(),{data:l}=([n,i]=E(()=>N(`ArticlesSelect_${t.category}`,()=>{const{categories:a,articlesMetadata:d}=s,{count:u}=t.category==="all"?d:a[t.category];let m=L("articles").only(O.card).where({category:t.category==="all"?void 0:t.category});const{notInArticles:v}=t;return Array.isArray(v)&&v.length>0&&v.forEach(({slug:T})=>{m=m.where({slug:{$not:T}})}),m.sort({updatedAt:-1}).skip(Math.floor(u/2)).limit(3).find()})),n=await n,i(),n);return(a,d)=>(r(),g("div",{class:p(a.$style.grid)},[(r(!0),g(A,null,b(y(l),u=>(r(),f(W(e.cardComponent),{key:u.slug,article:u,"no-container":e.noContainer},null,8,["article","no-container"]))),128))],2))}},Me={$style:Ie},Se=h(ke,[["__cssModules",Me]]),je={__name:"aside-select",props:{category:{type:String,default:"all"},notInArticles:{type:Array,default:()=>[]}},setup(e){return(n,i)=>{const t=Se,s=C;return r(),f(s,{title:"精選文章"},{default:c(()=>[o(t,{class:"mt-4 pt-3","no-container":"",category:e.category,"not-in-articles":e.notInArticles},null,8,["category","not-in-articles"])]),_:1})}}},Te={__name:"common-layout",props:{reverseOrderWhenMobile:{type:Boolean,default:!1},category:{type:String,default:"all"},selectNotInArticles:{type:Array,default:()=>[]}},setup(e){return(n,i)=>{const t=R,s=ce,l=Q,a=de,d=fe,u=je,m=H;return r(),f(t,{cols:"12"},{default:c(()=>[o(m,null,{default:c(()=>[o(t,{cols:"12",lg:"7",xl:"8",class:p(e.reverseOrderWhenMobile?"order-2 order-lg-1 mt-5 mt-lg-0":"order-1")},{default:c(()=>[I(n.$slots,"default")]),_:3},8,["class"]),o(t,{cols:"12",lg:"5",xl:"4",class:p(e.reverseOrderWhenMobile?"order-1 order-lg-2":"order-2 mt-5 mt-lg-0")},{default:c(()=>[o(m,null,{default:c(()=>[o(t,{cols:"12",class:"mb-4"},{default:c(()=>[o(l,{title:"關於隨機手札與我"},{default:c(()=>[o(s)]),_:1})]),_:1}),o(t,{cols:"12",class:"mb-4"},{default:c(()=>[o(a)]),_:1}),o(t,{cols:"12",class:"mb-4"},{default:c(()=>[o(d)]),_:1}),o(t,{cols:"12"},{default:c(()=>[o(u,{category:e.category,"not-in-articles":e.selectNotInArticles},null,8,["category","not-in-articles"])]),_:1})]),_:1})]),_:1},8,["class"])]),_:3})]),_:3})}}},Re={__name:"articles-list",props:{articles:{type:Array,default:()=>[]},cardComponent:{type:Object,default:F}},setup(e){return(n,i)=>(r(),g("div",null,[(r(!0),g(A,null,b(e.articles,(t,s)=>(r(),f(W(e.cardComponent),{key:s,article:t,class:"mb-4","preload-img":s<=4},null,8,["article","preload-img"]))),128))]))}},Ve=({page:e=1,category:n,limit:i})=>{const{perPage:t}=w().public,s=i||t;return N(`${n}_${e}_${s}`,()=>{const{perPage:l}=w().public;let a=L("articles").only(O.card);return n!=="all"&&(a=a.where({category:n})),a.sort({createdAt:-1}).skip((e-1)*l).limit(s).find()})};export{Te as _,Re as a,ve as b,Ve as u};
