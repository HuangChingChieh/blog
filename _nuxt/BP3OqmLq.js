import{_ as j}from"./CP0SZ2A7.js";import{o as g,c as $,w as i,d as D,b as r,a as e,i as B,t as P,aK as T,aL as V,m as E,l as F,aM as I,aa as H,B as p,v as M,j as v,F as O,k as R,u as o,y as z}from"./Cpe9uTAX.js";import{_ as K}from"./C5WP7eaZ.js";import{u as f,_ as S,a as W}from"./C6w8OGpp.js";import{_ as q}from"./D_GMWZUY.js";const G={class:"px-4 py-4"},J={class:"flex flex-row justify-end items-center mt-3"},Q={__name:"article-card",props:{article:{type:Object,default:()=>({})},preloadImg:{type:Boolean,default:!1},imgBreakPoints:{type:Object,default:()=>({sm:640,md:224,lg:310,xl:400,"2xl":480})}},setup(a){return(t,n)=>{const y=j,x=T,k=V,l=E,m=F,d=I;return g(),$(d,{class:"flex flex-col bg-background dark:bg-background-dark",article:a.article},{default:i(()=>[a.article.img?(g(),$(y,{key:0,img:a.article.img,"break-points":a.imgBreakPoints,class:"rounded-t"},null,8,["img","break-points"])):D("",!0),r("div",G,[e(x,null,{default:i(()=>[B(P(a.article.title),1)]),_:1}),e(k,{description:a.article.description,class:"mt-2"},null,8,["description"]),r("div",J,[e(l,{minutes:a.article.readingTime.minutes,class:"me-6"},null,8,["minutes"]),e(m,{document:a.article},null,8,["document"])])])]),_:1},8,["article"])}}},U={class:"grid grid-cols-1 md:grid-cols-3 gap-normal"},X={class:"text-center"},nt={__name:"index",async setup(a){let t,n;const{appHost:y,description:x,categoriesMap:k}=H().public,{data:l}=([t,n]=p(()=>f({category:"frontend",limit:1})),t=await t,n(),t),{data:m}=([t,n]=p(()=>f({category:"life",limit:1})),t=await t,n(),t),{data:d}=([t,n]=p(()=>f({category:"linux",limit:1})),t=await t,n(),t),w=[{categories:"life",article:m.value[0]},{categories:"frontend",article:l.value[0]},{categories:"linux",article:d.value[0]}],C=(u=[],s=[])=>{const _=[];return u.forEach(c=>{s.find(A=>A.slug===c.slug)||_.push(c)}),_},{data:h}=([t,n]=p(async()=>z("IndexArticlesNewest",async()=>{const{data:u}=await f({page:1,category:"all"});return C(u.value,w.map(({article:s})=>s))})),t=await t,n(),t);return M({title:"",titleTemplate:"隨機手札",meta:[{key:"og:url",property:"og:url",content:y},{key:"og:description",property:"og:description",content:x}]}),(u,s)=>{const _=Q,c=K,A=W,L=q,N=S;return g(),v("div",null,[r("div",U,[(g(),v(O,null,R(w,b=>e(c,{key:b.article.slug,title:o(k)[b.categories]},{default:i(()=>[e(_,{article:b.article},null,8,["article"])]),_:2},1032,["title"])),64))]),s[1]||(s[1]=r("hr",{class:"my-12"},null,-1)),e(N,{"reverse-order-when-mobile":"","select-not-in-articles":[...o(m),...o(l),...o(d)]},{default:i(()=>[e(c,{title:"最新文章"},{default:i(()=>[e(A,{articles:o(h)},null,8,["articles"]),r("div",X,[e(L,{to:{path:"/category/all/1"},size:"large",class:"mt-normal mb-6"},{default:i(()=>s[0]||(s[0]=[B(" 更多文章 ")])),_:1})])]),_:1})]),_:1},8,["select-not-in-articles"])])}}};export{nt as default};
