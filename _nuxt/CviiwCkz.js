import{D as O,o,l as g,F as A,m as $,c as p,V as j,h as S,r as w,w as m,k as x,t as b,d as M,aP as N,b as i,a as _,ai as I,ab as T,C as h,ad as v,u as y,g as q,_ as P,f as V,j as D,af as E,p as W,n as z,ah as F,z as R,A as Q,B as G,L as B}from"./9uk_k_NE.js";import{_ as L}from"./DTdwSkRA.js";import{_ as H}from"./C3xf7Q-d.js";import{_ as J}from"./DsRS4ZMo.js";const K={class:"grid grid-cols-1 gap-normal"},ht={__name:"articles-list",props:{articles:{type:Array,default:()=>[]},cardComponent:{type:Object,default:O},imgBreakPoints:{type:Object,default:()=>({sm:640,md:335,lg:251,xl:335})}},setup(t){return(e,r)=>(o(),g("div",K,[(o(!0),g(A,null,$(t.articles,(a,n)=>(o(),p(j(t.cardComponent),{key:n,article:a,"preload-img":n<=4,"img-break-points":t.imgBreakPoints},null,8,["article","preload-img","img-break-points"]))),128))]))}},U={},X={class:"text-xl mb-4 lg:mb-6 text-center font-bold"};function Y(t,e){return o(),g("div",X,[w(t.$slots,"default")])}const Z=S(U,[["render",Y]]),k={__name:"aside-container",props:{title:{type:String,default:""}},setup(t){return(e,r)=>{const a=Z,n=N;return o(),p(n,{class:"shadow-sm rounded p-4 lg:p-6 border-t-4 border-primary"},{default:m(()=>[t.title?(o(),p(a,{key:0},{default:m(()=>[x(b(t.title),1)]),_:1})):M("",!0),w(e.$slots,"default")]),_:3})}}},tt={class:"mx-auto w-1/3 max-w-[150px]"},et={class:"text-muted text-center"},nt={__name:"aside-about-me",setup(t){const e={path:"/buy_me_a_tea",hash:"#關於我"},r={sm:150};return(a,n)=>{const c=I,s=L,l=k;return o(),p(l,{title:"嗨，我是阿傑！"},{default:m(()=>[i("div",tt,[_(c,{class:"p-1 rounded-full border-2 border-primary mb-6 bg-white w-full aspect-square",img:"922/bqqju1.jpg","break-points":r})]),i("div",et,[n[1]||(n[1]=i("p",{class:"mx-auto mb-normal max-w-[450px]"}," 一名浮沈於前端汪洋的小碼農，主要使用的框架為Vue及其生態系。平常的興趣是喝飲料、玩手遊（鎖鏈戰記、歧路旅人：大陸的霸者）。 ",-1)),_(s,{to:e},{default:m(()=>n[0]||(n[0]=[x(" 關於我 ")])),_:1})])]),_:1})}}},at={class:"flex flex-col mb-0 pl-0"},st={class:"grow"},ot={__name:"aside-categories",async setup(t){let e,r;const{categoriesMap:a}=T().public,{categories:n}=([e,r]=h(()=>v()),e=await e,r(),e),c=P;return(s,l)=>{const d=V,u=k;return o(),p(u,{title:"文章分類"},{default:m(()=>[i("nav",null,[i("ul",at,[(o(!0),g(A,null,$(y(a),(f,C)=>(o(),g("li",{key:C,class:"py-2 border-t first:border-t-0"},[_(d,{tag:y(c),class:"flex flex-row no-decoration",to:("getCategoryLink"in s?s.getCategoryLink:y(q))({category:C})},{default:m(()=>[l[0]||(l[0]=i("span",{class:"text-primary me-1"},"#",-1)),i("span",st,b(f),1),i("span",null,"("+b(y(n)[C].count)+")",1)]),_:2},1032,["tag","to"])]))),128))])])]),_:1})}}},rt={class:"flex flex-wrap gap-2 justify-center mb-normal"},ct={class:"text-center"},lt={__name:"aside-tags",async setup(t){let e,r;const{tagsObj:a}=([e,r]=h(()=>v()),e=await e,r(),e);let n=[];return Object.keys(a).forEach(c=>{const s=a[c];s>1&&n.push({name:c,count:s,to:D({tag:c})})}),n.sort((c,s)=>{let l=s.count-c.count;return l===0&&(l=c.name>s.name?1:-1),l}),n=n.slice(0,15),(c,s)=>{const l=J,d=L,u=k;return o(),p(u,{title:"文章標籤"},{default:m(()=>[i("div",rt,[(o(!0),g(A,null,$(y(n),f=>(o(),p(l,{key:f.name,to:f.to,variant:"outlined",severity:"primary",size:"small",rounded:""},{default:m(()=>[x(b(f.name),1)]),_:2},1032,["to"]))),128))]),i("div",ct,[_(d,{to:"/tags/"},{default:m(()=>s[0]||(s[0]=[x("所有標籤")])),_:1})])]),_:1})}}},it={class:"flex flex-col"},_t={class:"grow flex flex-row justify-end items-end"},mt={__name:"article-card-compact",props:{article:{type:Object,default:null},container:{type:Boolean,default:!0}},setup(t){const e={sm:200};return(r,a)=>{const n=I,c=E,s=W,l=z,d=F;return o(),p(d,{class:"grid grid-cols-[100px_auto] gap-3",article:t.article,container:t.container},{default:m(()=>[_(n,{img:t.article.img,"break-points":e,class:"rounded h-full aspect-square"},null,8,["img"]),i("div",it,[_(c,{class:"mb-1"},{default:m(()=>[x(b(t.article.title),1)]),_:1}),i("div",_t,[_(s,{minutes:t.article.readingTime.minutes,class:"me-6"},null,8,["minutes"]),_(l,{document:t.article},null,8,["document"])])])]),_:1},8,["article","container"])}}},dt={class:"grid grid-rows-3 grid-cols-1 gap-6"},ut={__name:"articles-select",props:{category:{type:String,default:"all"},cardComponent:{type:Object,default:mt},notInArticles:{type:Array,default:()=>[]}},async setup(t){let e,r;const a=t,{categories:n,articlesMetadata:c}=([e,r]=h(()=>v()),e=await e,r(),e),{data:s}=([e,r]=h(()=>R(`ArticlesSelect_${a.category}`,()=>{const{count:l}=a.category==="all"?c:n[a.category];let d=Q("articles").only(G.card).where({category:a.category==="all"?void 0:a.category});const{notInArticles:u}=a;return Array.isArray(u)&&u.length>0&&u.forEach(({slug:f})=>{d=d.where({slug:{$not:f}})}),d.sort({updatedAt:-1}).skip(Math.floor(l/2)).limit(3).find()})),e=await e,r(),e);return(l,d)=>(o(),g("div",dt,[(o(!0),g(A,null,$(y(s),u=>(o(),p(j(t.cardComponent),{key:u.slug,article:u,container:!1},null,8,["article"]))),128))]))}},pt={__name:"aside-select",props:{category:{type:String,default:"all"},notInArticles:{type:Array,default:()=>[]}},setup(t){return(e,r)=>{const a=ut,n=k;return o(),p(n,{title:"精選文章"},{default:m(()=>[_(a,{category:t.category,"not-in-articles":t.notInArticles},null,8,["category","not-in-articles"])]),_:1})}}},gt={class:"grid grid-cols-1 lg:grid-cols-12 lg:gap-normal"},At={__name:"common-layout",props:{reverseOrderWhenMobile:{type:Boolean,default:!1},category:{type:String,default:"all"},selectNotInArticles:{type:Array,default:()=>[]}},setup(t){return(e,r)=>{const a=nt,n=H,c=ot,s=lt,l=pt;return o(),g("div",gt,[i("div",{class:B(["lg:col-span-7 xl:col-span-8",t.reverseOrderWhenMobile?"order-2 lg:order-1 mt-12 lg:mt-0":"order-1"])},[w(e.$slots,"default")],2),i("div",{class:B(["lg:col-span-5 xl:col-span-4 flex flex-col gap-normal",t.reverseOrderWhenMobile?"order-1 lg:order-2":"order-2 mt-12 lg:mt-0"])},[_(n,{title:"關於隨機手札與我"},{default:m(()=>[_(a)]),_:1}),_(c),_(s),_(l,{category:t.category,"not-in-articles":t.selectNotInArticles,class:"lg:sticky lg:top-24"},null,8,["category","not-in-articles"])],2)])}}};export{At as _,ht as a};
