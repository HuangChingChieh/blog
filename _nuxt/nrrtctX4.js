import{C as j,o as r,j as p,F as $,k as h,c as g,U as B,h as O,r as C,w as i,i as k,t as y,d as P,aH as q,b as o,a as c,aN as I,aa as M,B as b,aI as N,u as f,g as L,_ as T,f as V,aK as W,m as D,l as E,aM as z,y as S,z as F,A as K,K as v,aO as R}from"./DrDuR_zy.js";import{_ as H}from"./Cd8bRMjk.js";import{_ as Q}from"./BjjOtPJc.js";const U={class:"grid grid-cols-1 gap-normal"},gt={__name:"articles-list",props:{articles:{type:Array,default:()=>[]},cardComponent:{type:Object,default:j},imgBreakPoints:{type:Object,default:()=>({sm:640,md:335,lg:251,xl:335})}},setup(t){return(e,s)=>(r(),p("div",U,[(r(!0),p($,null,h(t.articles,(n,a)=>(r(),g(B(t.cardComponent),{key:a,article:n,"preload-img":a<=4,"img-break-points":t.imgBreakPoints},null,8,["article","preload-img","img-break-points"]))),128))]))}},G={},J={class:"text-xl mb-4 lg:mb-6 text-center font-bold"};function X(t,e){return r(),p("div",J,[C(t.$slots,"default")])}const Y=O(G,[["render",X]]),w={__name:"aside-container",props:{title:{type:String,default:""}},setup(t){return(e,s)=>{const n=Y,a=q;return r(),g(a,{class:"shadow-sm rounded p-4 lg:p-6 border-t-4 border-primary"},{default:i(()=>[t.title?(r(),g(n,{key:0},{default:i(()=>[k(y(t.title),1)]),_:1})):P("",!0),C(e.$slots,"default")]),_:3})}}},Z={class:"mx-auto w-1/3 max-w-[150px]"},tt={class:"text-muted text-center"},et={__name:"aside-about-me",setup(t){const e={path:"/buy_me_a_tea",hash:"#關於我"},s={sm:150};return(n,a)=>{const _=I,l=H,m=w;return r(),g(m,{title:"嗨，我是阿傑！"},{default:i(()=>[o("div",Z,[c(_,{class:"p-1 rounded-full border-2 border-primary mb-6 bg-white w-full aspect-square",img:"922/bqqju1.jpg","break-points":s})]),o("div",tt,[a[1]||(a[1]=o("p",{class:"mx-auto mb-normal max-w-[450px]"}," 一名浮沈於前端汪洋的小碼農，主要使用的框架為Vue及其生態系。平常的興趣是喝飲料、玩手遊（鎖鏈戰記、歧路旅人：大陸的霸者）。 ",-1)),c(l,{to:e},{default:i(()=>a[0]||(a[0]=[k(" 關於我 ")])),_:1})])]),_:1})}}},at={class:"flex flex-col mb-0 pl-0"},nt={class:"grow"},st={__name:"aside-categories",async setup(t){let e,s;const{categoriesMap:n}=M().public,{categories:a}=([e,s]=b(()=>N()),e=await e,s(),e),_=T;return(l,m)=>{const d=V,u=w;return r(),g(u,{title:"文章分類"},{default:i(()=>[o("nav",null,[o("ul",at,[(r(!0),p($,null,h(f(n),(x,A)=>(r(),p("li",{key:A,class:"py-2 border-t first:border-t-0"},[c(d,{tag:f(_),class:"flex flex-row no-decoration",to:("getCategoryLink"in l?l.getCategoryLink:f(L))({category:A})},{default:i(()=>[m[0]||(m[0]=o("span",{class:"text-primary me-1"},"#",-1)),o("span",nt,y(x),1),o("span",null,"("+y(f(a)[A].count)+")",1)]),_:2},1032,["tag","to"])]))),128))])])]),_:1})}}},rt={class:"flex flex-col"},ot={class:"grow flex flex-row justify-end items-end"},ct={__name:"article-card-compact",props:{article:{type:Object,default:null},container:{type:Boolean,default:!0}},setup(t){const e={sm:200};return(s,n)=>{const a=I,_=W,l=D,m=E,d=z;return r(),g(d,{class:"grid grid-cols-[100px_auto] gap-3",article:t.article,container:t.container},{default:i(()=>[c(a,{img:t.article.img,"break-points":e,class:"rounded h-full aspect-square"},null,8,["img"]),o("div",rt,[c(_,{class:"mb-1"},{default:i(()=>[k(y(t.article.title),1)]),_:1}),o("div",ot,[c(l,{minutes:t.article.readingTime.minutes,class:"me-6"},null,8,["minutes"]),c(m,{document:t.article},null,8,["document"])])])]),_:1},8,["article","container"])}}},lt={class:"grid grid-rows-3 grid-cols-1 gap-6"},it={__name:"articles-select",props:{category:{type:String,default:"all"},cardComponent:{type:Object,default:ct},notInArticles:{type:Array,default:()=>[]}},async setup(t){let e,s;const n=t,{categories:a,articlesMetadata:_}=([e,s]=b(()=>N()),e=await e,s(),e),{data:l}=([e,s]=b(()=>S(`ArticlesSelect_${n.category}`,()=>{const{count:m}=n.category==="all"?_:a[n.category];let d=F("articles").only(K.card).where({category:n.category==="all"?void 0:n.category});const{notInArticles:u}=n;return Array.isArray(u)&&u.length>0&&u.forEach(({slug:x})=>{d=d.where({slug:{$not:x}})}),d.sort({updatedAt:-1}).skip(Math.floor(m/2)).limit(3).find()})),e=await e,s(),e);return(m,d)=>(r(),p("div",lt,[(r(!0),p($,null,h(f(l),u=>(r(),g(B(t.cardComponent),{key:u.slug,article:u,container:!1},null,8,["article"]))),128))]))}},_t={__name:"aside-select",props:{category:{type:String,default:"all"},notInArticles:{type:Array,default:()=>[]}},setup(t){return(e,s)=>{const n=it,a=w;return r(),g(a,{title:"精選文章"},{default:i(()=>[c(n,{category:t.category,"not-in-articles":t.notInArticles},null,8,["category","not-in-articles"])]),_:1})}}},mt={class:"grid grid-cols-1 lg:grid-cols-12 lg:gap-normal"},ft={__name:"common-layout",props:{reverseOrderWhenMobile:{type:Boolean,default:!1},category:{type:String,default:"all"},selectNotInArticles:{type:Array,default:()=>[]}},setup(t){return(e,s)=>{const n=et,a=Q,_=st,l=_t;return r(),p("div",mt,[o("div",{class:v(["lg:col-span-7 xl:col-span-8",t.reverseOrderWhenMobile?"order-2 lg:order-1 mt-12 lg:mt-0":"order-1"])},[C(e.$slots,"default")],2),o("div",{class:v(["lg:col-span-5 xl:col-span-4 flex flex-col gap-normal",t.reverseOrderWhenMobile?"order-1 lg:order-2":"order-2 mt-12 lg:mt-0"])},[c(a,{title:"關於隨機手札與我"},{default:i(()=>[c(n)]),_:1}),c(_),c(l,{category:t.category,"not-in-articles":t.selectNotInArticles,class:"lg:sticky lg:top-24"},null,8,["category","not-in-articles"])],2)])}}},yt=({page:t=1,category:e,limit:s})=>{const{perPage:n}=M().public,a=s||n;return S(`${e}_${t}_${a}`,()=>R({page:t,category:e,limit:a}))};export{ft as _,gt as a,yt as u};
