const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BIqsR2OH.js","./CIMwKean.js"])))=>i.map(i=>d[i]);
import{m as z,av as I,a4 as Ke,af as Ye,aw as Xe,z as pe,o as y,a as E,w as v,r as D,n as $,u as S,H as Le,N as Ze,_ as U,I as ee,c as k,d as m,e as je,f as A,F as X,l as _e,i as we,t as J,al as et,X as Ee,Z as tt,a7 as st,ao as te,y as Se,s as j,ax as nt,Y as se,an as ot,ay as it,az as oe,E as Me,h as ge,p as rt,b as T,g as at,D as lt,q as ct,aA as ut,S as dt,J as ht,aB as ft,aC as mt,x as pt,aq as _t,ad as gt}from"./Cjq5mJ1X.js";import{a as De,u as yt}from"./CMyqEcpg.js";import{_ as Ne}from"./DG_WL5dg.js";import{_ as ke}from"./C_UHuf1H.js";import{I as bt}from"./ehxphKh0.js";import{_ as vt}from"./CW3mDXf4.js";function Oe(n,e,t){const[s={},o]=typeof e=="string"?[{},e]:[e,t],i=z(()=>I(n)),r=s.key||Ke([o,typeof i.value=="string"?i.value:"",...wt(s)]);if(!r||typeof r!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+r);if(!n)throw new Error("[nuxt] [useFetch] request is missing.");const a=r===o?"$f"+r:r;if(!s.baseURL&&typeof i.value=="string"&&i.value[0]==="/"&&i.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:l,lazy:c,default:u,transform:d,pick:h,watch:p,immediate:_,getCachedData:f,deep:g,dedupe:C,...x}=s,R=Ye({...Xe,...x,cache:typeof s.cache=="boolean"?void 0:s.cache}),w={server:l,lazy:c,default:u,transform:d,pick:h,immediate:_,getCachedData:f,deep:g,dedupe:C,watch:p===!1?[]:[R,i,...p||[]]};let b;return pe(a,()=>{var N;(N=b==null?void 0:b.abort)==null||N.call(b,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),b=typeof AbortController<"u"?new AbortController:{};const V=I(s.timeout);let M;return V&&(M=setTimeout(()=>b.abort(new DOMException("Request aborted due to timeout.","AbortError")),V),b.signal.onabort=()=>clearTimeout(M)),(s.$fetch||globalThis.$fetch)(i.value,{signal:b.signal,...R}).finally(()=>{clearTimeout(M)})},w)}function wt(n){var t;const e=[((t=I(n.method))==null?void 0:t.toUpperCase())||"GET",I(n.baseURL)];for(const s of[n.params||n.query]){const o=I(s);if(!o)continue;const i={};for(const[r,a]of Object.entries(o))i[I(r)]=I(a);e.push(i)}return e}const xe={__name:"interface-container",props:{tag:{type:String,default:"div"}},setup(n){return(e,t)=>(y(),E(Ze(n.tag),{class:$(`container-${S(Le)}`)},{default:v(()=>[D(e.$slots,"default")]),_:3},8,["class"]))}},St="_bordered_t6qrn_2",kt={bordered:St},xt=["src","height","width"],Ve=[64,192,512],$t={},Ct=Object.assign($t,{__name:"common-icon",props:{height:{type:[String,Number],default:Ve[0]},bordered:{type:Boolean,default:!1}},setup(n){const e=n,{base:t}=ee().public,s=z(()=>{const{height:o}=e,i=Ve.find(r=>r>=Number(o));return`${t}pwa-${i}x${i}.png`});return(o,i)=>(y(),k("img",{src:s.value,height:n.height,width:n.height,class:$(["common-icon rounded-circle shadow-sm",{bordered:n.bordered,[o.$style.bordered]:n.bordered}])},null,10,xt))}}),Mt={$style:kt},Re=U(Ct,[["__cssModules",Mt]]),Ot={class:"ps-1"},ne={__name:"common-header-icon",props:{icon:{type:String,default:""}},setup(n){return(e,t)=>(y(),E(Ne,{variant:"link",class:"d-flex align-items-center text-decoration-none ms-3 ms-lg-4"},{default:v(()=>[m(je,{icon:n.icon,class:"h5 mb-0 d-flex"},null,8,["icon"]),A("span",Ot,[D(e.$slots,"default")])]),_:3}))}},Be={__name:"interface-nav",props:{vertical:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},activeClass:{type:[String,Array],default:""},linkClasses:{type:[String,Array],default:""},itemClass:{type:[String,Array],default:""},linkGenerateFunc:{type:Function,default:()=>""}},emits:["click-item"],setup(n,{emit:e}){const t=e;return(s,o)=>{const i=we;return y(),k("ul",{class:$(["nav",n.vertical?"flex-column":""])},[(y(!0),k(X,null,_e(n.items,(r,a)=>(y(),k("li",{key:a,class:$(["nav-item",n.itemClass])},[m(i,{to:n.linkGenerateFunc(r),class:$(["nav-link",n.linkClasses]),"active-class":n.activeClass,onClick:l=>t("click-item",r)},{default:v(()=>[D(s.$slots,"item",{item:r})]),_:2},1032,["to","class","active-class","onClick"]),D(s.$slots,"default",{item:r})],2))),128))],2)}}},Vt={__name:"modal-toc-item",props:{minDepth:{type:Number,default:2},item:{type:Object,default:()=>({text:"",depth:2})}},emits:["scroll-to"],setup(n,{emit:e}){const t=n,s=e,o=()=>{tt(()=>{const{id:r}=t.item,a=document.querySelector(`#${r}`);a instanceof HTMLElement&&a.scrollIntoView({behavior:"smooth",block:"start",inline:"center"})}),s("scroll-to")},i=z(()=>{const r=t.item.depth-t.minDepth;return{"padding-left":`${r}rem`,opacity:1-r*.1,"font-size":`${(1-r*.1)*100}%`}});return(r,a)=>(y(),k("span",{class:"d-block px-3 py-2",onClick:Ee(o,["prevent","stop"])},[A("span",{style:et(i.value),class:"d-block"},J(n.item.text),5)]))}},It="_navLink_y0bey_2",zt={navLink:It},Ft={__name:"modal-toc-nav",props:{items:{type:Array,default:()=>[]},minDepth:{type:Number,default:2}},emits:["scroll-to"],setup(n,{emit:e}){const t=e,s=({id:o})=>({hash:`#${o}`});return(o,i)=>(y(),E(Be,{items:n.items,"link-generate-func":s,"link-classes":["p-0 border-start",o.$style.navLink],vertical:""},{item:v(({item:r})=>[m(Vt,{item:r,"min-depth":n.minDepth,onScrollTo:i[0]||(i[0]=a=>t("scroll-to"))},null,8,["item","min-depth"])]),default:v(({item:r})=>[D(o.$slots,"default",{item:r})]),_:3},8,["items","link-classes"]))}},Tt={$style:zt},Ie=U(Ft,[["__cssModules",Tt]]);let ie=null,re=null;const At={async mounted(n){ie||(ie=(await st(async()=>{const{default:e}=await import("./BIqsR2OH.js").then(t=>t.s);return{default:e}},__vite__mapDeps([0,1]),import.meta.url)).default),re=new ie(document.body,{target:n})},beforeUnmount(){re.dispose()},updated(){re.refresh()}},Lt={__name:"modal-toc",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=te(n,"modelValue"),t=()=>{},s=De(),o=z(()=>{const{toc:r}=s;return Array.isArray(r)&&r.length>0?r.reduce((a,l)=>Math.min(a,l.depth),r[0].depth):2}),i=()=>{e.value=!1};return(r,a)=>(y(),E(ke,{modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value=l),title:"摘要","modal-class":"modal-toc",onHidden:t},{default:v(()=>[Se((y(),E(Ie,{items:S(s).toc,"min-depth":o.value,onScrollTo:i},{default:v(({item:l})=>[m(Ie,{items:l.children,"min-depth":o.value,onScrollTo:i},null,8,["items","min-depth"])]),_:1},8,["items","min-depth"])),[[S(At)]])]),_:1},8,["modelValue"]))}},jt={__name:"header-icon-toc",props:{iconClass:{type:[String,Array],default:""}},setup(n){const e=j(!1),t=De(),s=z(()=>{const{toc:o}=t;return Array.isArray(o)&&o.length>0});return(o,i)=>Se((y(),k("div",null,[m(ne,{icon:"card-list",title:"文章摘要",class:$(n.iconClass),onClick:i[0]||(i[0]=r=>e.value=!0)},null,8,["class"]),m(Lt,{modelValue:S(e),"onUpdate:modelValue":i[1]||(i[1]=r=>se(e)?e.value=r:null)},null,8,["modelValue"])],512)),[[nt,s.value]])}},Et=["placeholder","disabled"],Dt={__name:"interface-form-input",props:ot({placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1}},{modelValue:{type:String,default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const e=te(n,"modelValue");return(t,s)=>Se((y(),k("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o),placeholder:n.placeholder,type:"text",class:"form-control",disabled:n.disabled},null,8,Et)),[[it,e.value,void 0,{trim:!0}]])}};function Y(n,e,t,s){function o(i){return i instanceof t?i:new t(function(r){r(i)})}return new(t||(t=Promise))(function(i,r){function a(u){try{c(s.next(u))}catch(d){r(d)}}function l(u){try{c(s.throw(u))}catch(d){r(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((s=s.apply(n,[])).next())})}const Nt="ENTRIES",Ue="KEYS",We="VALUES",O="";class ae{constructor(e,t){const s=e._tree,o=Array.from(s.keys());this.set=e,this._type=t,this._path=o.length>0?[{node:s,keys:o}]:[]}next(){const e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:e,keys:t}=P(this._path);if(P(t)===O)return{done:!1,value:this.result()};const s=e.get(P(t));return this._path.push({node:s,keys:Array.from(s.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const e=P(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>P(e)).filter(e=>e!==O).join("")}value(){return P(this._path).node.get(O)}result(){switch(this._type){case We:return this.value();case Ue:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const P=n=>n[n.length-1],Rt=(n,e,t)=>{const s=new Map;if(e===void 0)return s;const o=e.length+1,i=o+t,r=new Uint8Array(i*o).fill(t+1);for(let a=0;a<o;++a)r[a]=a;for(let a=1;a<i;++a)r[a*o]=a;return Pe(n,e,t,s,r,1,o,""),s},Pe=(n,e,t,s,o,i,r,a)=>{const l=i*r;e:for(const c of n.keys())if(c===O){const u=o[l-1];u<=t&&s.set(a,[n.get(c),u])}else{let u=i;for(let d=0;d<c.length;++d,++u){const h=c[d],p=r*u,_=p-r;let f=o[p];const g=Math.max(0,u-t-1),C=Math.min(r-1,u+t);for(let x=g;x<C;++x){const R=h!==e[x],w=o[_+x]+ +R,b=o[_+x+1]+1,F=o[p+x]+1,V=o[p+x+1]=Math.min(w,b,F);V<f&&(f=V)}if(f>t)continue e}Pe(n.get(c),e,t,s,o,u,r,a+c)}};class B{constructor(e=new Map,t=""){this._size=void 0,this._tree=e,this._prefix=t}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");const[t,s]=Z(this._tree,e.slice(this._prefix.length));if(t===void 0){const[o,i]=$e(s);for(const r of o.keys())if(r!==O&&r.startsWith(i)){const a=new Map;return a.set(r.slice(i.length),o.get(r)),new B(a,e)}}return new B(t,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,Bt(this._tree,e)}entries(){return new ae(this,Nt)}forEach(e){for(const[t,s]of this)e(t,s,this)}fuzzyGet(e,t){return Rt(this._tree,e,t)}get(e){const t=ye(this._tree,e);return t!==void 0?t.get(O):void 0}has(e){const t=ye(this._tree,e);return t!==void 0&&t.has(O)}keys(){return new ae(this,Ue)}set(e,t){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,le(this._tree,e).set(O,t),this}get size(){if(this._size)return this._size;this._size=0;const e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=le(this._tree,e);return s.set(O,t(s.get(O))),this}fetch(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const s=le(this._tree,e);let o=s.get(O);return o===void 0&&s.set(O,o=t()),o}values(){return new ae(this,We)}[Symbol.iterator](){return this.entries()}static from(e){const t=new B;for(const[s,o]of e)t.set(s,o);return t}static fromObject(e){return B.from(Object.entries(e))}}const Z=(n,e,t=[])=>{if(e.length===0||n==null)return[n,t];for(const s of n.keys())if(s!==O&&e.startsWith(s))return t.push([n,s]),Z(n.get(s),e.slice(s.length),t);return t.push([n,e]),Z(void 0,"",t)},ye=(n,e)=>{if(e.length===0||n==null)return n;for(const t of n.keys())if(t!==O&&e.startsWith(t))return ye(n.get(t),e.slice(t.length))},le=(n,e)=>{const t=e.length;e:for(let s=0;n&&s<t;){for(const i of n.keys())if(i!==O&&e[s]===i[0]){const r=Math.min(t-s,i.length);let a=1;for(;a<r&&e[s+a]===i[a];)++a;const l=n.get(i);if(a===i.length)n=l;else{const c=new Map;c.set(i.slice(a),l),n.set(e.slice(s,s+a),c),n.delete(i),n=c}s+=a;continue e}const o=new Map;return n.set(e.slice(s),o),o}return n},Bt=(n,e)=>{const[t,s]=Z(n,e);if(t!==void 0){if(t.delete(O),t.size===0)Je(s);else if(t.size===1){const[o,i]=t.entries().next().value;qe(s,o,i)}}},Je=n=>{if(n.length===0)return;const[e,t]=$e(n);if(e.delete(t),e.size===0)Je(n.slice(0,-1));else if(e.size===1){const[s,o]=e.entries().next().value;s!==O&&qe(n.slice(0,-1),s,o)}},qe=(n,e,t)=>{if(n.length===0)return;const[s,o]=$e(n);s.set(o+e,t),s.delete(o)},$e=n=>n[n.length-1],Ce="or",Ge="and",Ut="and_not";class W{constructor(e){if((e==null?void 0:e.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const t=e.autoVacuum==null||e.autoVacuum===!0?de:e.autoVacuum;this._options=Object.assign(Object.assign(Object.assign({},ue),e),{autoVacuum:t,searchOptions:Object.assign(Object.assign({},ze),e.searchOptions||{}),autoSuggestOptions:Object.assign(Object.assign({},Gt),e.autoSuggestOptions||{})}),this._index=new B,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=ve,this.addFields(this._options.fields)}add(e){const{extractField:t,tokenize:s,processTerm:o,fields:i,idField:r}=this._options,a=t(e,r);if(a==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);if(this._idToShortId.has(a))throw new Error(`MiniSearch: duplicate ID ${a}`);const l=this.addDocumentId(a);this.saveStoredFields(l,e);for(const c of i){const u=t(e,c);if(u==null)continue;const d=s(u.toString(),c),h=this._fieldIds[c],p=new Set(d).size;this.addFieldLength(l,h,this._documentCount-1,p);for(const _ of d){const f=o(_,c);if(Array.isArray(f))for(const g of f)this.addTerm(h,l,g);else f&&this.addTerm(h,l,f)}}}addAll(e){for(const t of e)this.add(t)}addAllAsync(e,t={}){const{chunkSize:s=10}=t,o={chunk:[],promise:Promise.resolve()},{chunk:i,promise:r}=e.reduce(({chunk:a,promise:l},c,u)=>(a.push(c),(u+1)%s===0?{chunk:[],promise:l.then(()=>new Promise(d=>setTimeout(d,0))).then(()=>this.addAll(a))}:{chunk:a,promise:l}),o);return r.then(()=>this.addAll(i))}remove(e){const{tokenize:t,processTerm:s,extractField:o,fields:i,idField:r}=this._options,a=o(e,r);if(a==null)throw new Error(`MiniSearch: document does not have ID field "${r}"`);const l=this._idToShortId.get(a);if(l==null)throw new Error(`MiniSearch: cannot remove document with ID ${a}: it is not in the index`);for(const c of i){const u=o(e,c);if(u==null)continue;const d=t(u.toString(),c),h=this._fieldIds[c],p=new Set(d).size;this.removeFieldLength(l,h,this._documentCount,p);for(const _ of d){const f=s(_,c);if(Array.isArray(f))for(const g of f)this.removeTerm(h,l,g);else f&&this.removeTerm(h,l,f)}}this._storedFields.delete(l),this._documentIds.delete(l),this._idToShortId.delete(a),this._fieldLength.delete(l),this._documentCount-=1}removeAll(e){if(e)for(const t of e)this.remove(t);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new B,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){const t=this._idToShortId.get(e);if(t==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(t),this._storedFields.delete(t),(this._fieldLength.get(t)||[]).forEach((s,o)=>{this.removeFieldLength(t,o,this._documentCount,s)}),this._fieldLength.delete(t),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:e,minDirtCount:t,batchSize:s,batchWait:o}=this._options.autoVacuum;this.conditionalVacuum({batchSize:s,batchWait:o},{minDirtCount:t,minDirtFactor:e})}discardAll(e){const t=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const s of e)this.discard(s)}finally{this._options.autoVacuum=t}this.maybeAutoVacuum()}replace(e){const{idField:t,extractField:s}=this._options,o=s(e,t);this.discard(o),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,t){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&t,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const s=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=ve,this.performVacuuming(e,s)}),this._enqueuedVacuum)):this.vacuumConditionsMet(t)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}performVacuuming(e,t){return Y(this,void 0,void 0,function*(){const s=this._dirtCount;if(this.vacuumConditionsMet(t)){const o=e.batchSize||be.batchSize,i=e.batchWait||be.batchWait;let r=1;for(const[a,l]of this._index){for(const[c,u]of l)for(const[d]of u)this._documentIds.has(d)||(u.size<=1?l.delete(c):u.delete(d));this._index.get(a).size===0&&this._index.delete(a),r%o===0&&(yield new Promise(c=>setTimeout(c,i))),r+=1}this._dirtCount-=s}yield null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null})}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:t,minDirtFactor:s}=e;return t=t||de.minDirtCount,s=s||de.minDirtFactor,this.dirtCount>=t&&this.dirtFactor>=s}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){const t=this._idToShortId.get(e);if(t!=null)return this._storedFields.get(t)}search(e,t={}){const{searchOptions:s}=this._options,o=Object.assign(Object.assign({},s),t),i=this.executeQuery(e,t),r=[];for(const[a,{score:l,terms:c,match:u}]of i){const d=c.length||1,h={id:this._documentIds.get(a),score:l*d,terms:Object.keys(u),queryTerms:c,match:u};Object.assign(h,this._storedFields.get(a)),(o.filter==null||o.filter(h))&&r.push(h)}return e===W.wildcard&&o.boostDocument==null||r.sort(Te),r}autoSuggest(e,t={}){t=Object.assign(Object.assign({},this._options.autoSuggestOptions),t);const s=new Map;for(const{score:i,terms:r}of this.search(e,t)){const a=r.join(" "),l=s.get(a);l!=null?(l.score+=i,l.count+=1):s.set(a,{score:i,terms:r,count:1})}const o=[];for(const[i,{score:r,terms:a,count:l}]of s)o.push({suggestion:i,terms:a,score:r/l});return o.sort(Te),o}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),t)}static loadJSONAsync(e,t){return Y(this,void 0,void 0,function*(){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),t)})}static getDefault(e){if(ue.hasOwnProperty(e))return ce(ue,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,t){const{index:s,documentIds:o,fieldLength:i,storedFields:r,serializationVersion:a}=e,l=this.instantiateMiniSearch(e,t);l._documentIds=H(o),l._fieldLength=H(i),l._storedFields=H(r);for(const[c,u]of l._documentIds)l._idToShortId.set(u,c);for(const[c,u]of s){const d=new Map;for(const h of Object.keys(u)){let p=u[h];a===1&&(p=p.ds),d.set(parseInt(h,10),H(p))}l._index.set(c,d)}return l}static loadJSAsync(e,t){return Y(this,void 0,void 0,function*(){const{index:s,documentIds:o,fieldLength:i,storedFields:r,serializationVersion:a}=e,l=this.instantiateMiniSearch(e,t);l._documentIds=yield Q(o),l._fieldLength=yield Q(i),l._storedFields=yield Q(r);for(const[u,d]of l._documentIds)l._idToShortId.set(d,u);let c=0;for(const[u,d]of s){const h=new Map;for(const p of Object.keys(d)){let _=d[p];a===1&&(_=_.ds),h.set(parseInt(p,10),yield Q(_))}++c%1e3===0&&(yield He(0)),l._index.set(u,h)}return l})}static instantiateMiniSearch(e,t){const{documentCount:s,nextId:o,fieldIds:i,averageFieldLength:r,dirtCount:a,serializationVersion:l}=e;if(l!==1&&l!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const c=new W(t);return c._documentCount=s,c._nextId=o,c._idToShortId=new Map,c._fieldIds=i,c._avgFieldLength=r,c._dirtCount=a||0,c._index=new B,c}executeQuery(e,t={}){if(e===W.wildcard)return this.executeWildcardQuery(t);if(typeof e!="string"){const h=Object.assign(Object.assign(Object.assign({},t),e),{queries:void 0}),p=e.queries.map(_=>this.executeQuery(_,h));return this.combineResults(p,h.combineWith)}const{tokenize:s,processTerm:o,searchOptions:i}=this._options,r=Object.assign(Object.assign({tokenize:s,processTerm:o},i),t),{tokenize:a,processTerm:l}=r,d=a(e).flatMap(h=>l(h)).filter(h=>!!h).map(qt(r)).map(h=>this.executeQuerySpec(h,r));return this.combineResults(d,r.combineWith)}executeQuerySpec(e,t){const s=Object.assign(Object.assign({},this._options.searchOptions),t),o=(s.fields||this._options.fields).reduce((f,g)=>Object.assign(Object.assign({},f),{[g]:ce(s.boost,g)||1}),{}),{boostDocument:i,weights:r,maxFuzzy:a,bm25:l}=s,{fuzzy:c,prefix:u}=Object.assign(Object.assign({},ze.weights),r),d=this._index.get(e.term),h=this.termResults(e.term,e.term,1,e.termBoost,d,o,i,l);let p,_;if(e.prefix&&(p=this._index.atPrefix(e.term)),e.fuzzy){const f=e.fuzzy===!0?.2:e.fuzzy,g=f<1?Math.min(a,Math.round(e.term.length*f)):f;g&&(_=this._index.fuzzyGet(e.term,g))}if(p)for(const[f,g]of p){const C=f.length-e.term.length;if(!C)continue;_==null||_.delete(f);const x=u*f.length/(f.length+.3*C);this.termResults(e.term,f,x,e.termBoost,g,o,i,l,h)}if(_)for(const f of _.keys()){const[g,C]=_.get(f);if(!C)continue;const x=c*f.length/(f.length+C);this.termResults(e.term,f,x,e.termBoost,g,o,i,l,h)}return h}executeWildcardQuery(e){const t=new Map,s=Object.assign(Object.assign({},this._options.searchOptions),e);for(const[o,i]of this._documentIds){const r=s.boostDocument?s.boostDocument(i,"",this._storedFields.get(o)):1;t.set(o,{score:r,terms:[],match:{}})}return t}combineResults(e,t=Ce){if(e.length===0)return new Map;const s=t.toLowerCase(),o=Wt[s];if(!o)throw new Error(`Invalid combination operator: ${t}`);return e.reduce(o)||new Map}toJSON(){const e=[];for(const[t,s]of this._index){const o={};for(const[i,r]of s)o[i]=Object.fromEntries(r);e.push([t,o])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,t,s,o,i,r,a,l,c=new Map){if(i==null)return c;for(const u of Object.keys(r)){const d=r[u],h=this._fieldIds[u],p=i.get(h);if(p==null)continue;let _=p.size;const f=this._avgFieldLength[h];for(const g of p.keys()){if(!this._documentIds.has(g)){this.removeTerm(h,g,t),_-=1;continue}const C=a?a(this._documentIds.get(g),t,this._storedFields.get(g)):1;if(!C)continue;const x=p.get(g),R=this._fieldLength.get(g)[h],w=Jt(x,_,this._documentCount,R,f,l),b=s*o*d*C*w,F=c.get(g);if(F){F.score+=b,Ht(F.terms,e);const V=ce(F.match,t);V?V.push(u):F.match[t]=[u]}else c.set(g,{score:b,terms:[e],match:{[t]:[u]}})}}return c}addTerm(e,t,s){const o=this._index.fetch(s,Ae);let i=o.get(e);if(i==null)i=new Map,i.set(t,1),o.set(e,i);else{const r=i.get(t);i.set(t,(r||0)+1)}}removeTerm(e,t,s){if(!this._index.has(s)){this.warnDocumentChanged(t,e,s);return}const o=this._index.fetch(s,Ae),i=o.get(e);i==null||i.get(t)==null?this.warnDocumentChanged(t,e,s):i.get(t)<=1?i.size<=1?o.delete(e):i.delete(t):i.set(t,i.get(t)-1),this._index.get(s).size===0&&this._index.delete(s)}warnDocumentChanged(e,t,s){for(const o of Object.keys(this._fieldIds))if(this._fieldIds[o]===t){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${s}" was not present in field "${o}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){const t=this._nextId;return this._idToShortId.set(e,t),this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t}addFields(e){for(let t=0;t<e.length;t++)this._fieldIds[e[t]]=t}addFieldLength(e,t,s,o){let i=this._fieldLength.get(e);i==null&&this._fieldLength.set(e,i=[]),i[t]=o;const a=(this._avgFieldLength[t]||0)*s+o;this._avgFieldLength[t]=a/(s+1)}removeFieldLength(e,t,s,o){if(s===1){this._avgFieldLength[t]=0;return}const i=this._avgFieldLength[t]*s-o;this._avgFieldLength[t]=i/(s-1)}saveStoredFields(e,t){const{storeFields:s,extractField:o}=this._options;if(s==null||s.length===0)return;let i=this._storedFields.get(e);i==null&&this._storedFields.set(e,i={});for(const r of s){const a=o(t,r);a!==void 0&&(i[r]=a)}}}W.wildcard=Symbol("*");const ce=(n,e)=>Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0,Wt={[Ce]:(n,e)=>{for(const t of e.keys()){const s=n.get(t);if(s==null)n.set(t,e.get(t));else{const{score:o,terms:i,match:r}=e.get(t);s.score=s.score+o,s.match=Object.assign(s.match,r),Fe(s.terms,i)}}return n},[Ge]:(n,e)=>{const t=new Map;for(const s of e.keys()){const o=n.get(s);if(o==null)continue;const{score:i,terms:r,match:a}=e.get(s);Fe(o.terms,r),t.set(s,{score:o.score+i,terms:o.terms,match:Object.assign(o.match,a)})}return t},[Ut]:(n,e)=>{for(const t of e.keys())n.delete(t);return n}},Pt={k:1.2,b:.7,d:.5},Jt=(n,e,t,s,o,i)=>{const{k:r,b:a,d:l}=i;return Math.log(1+(t-e+.5)/(e+.5))*(l+n*(r+1)/(n+r*(1-a+a*s/o)))},qt=n=>(e,t,s)=>{const o=typeof n.fuzzy=="function"?n.fuzzy(e,t,s):n.fuzzy||!1,i=typeof n.prefix=="function"?n.prefix(e,t,s):n.prefix===!0,r=typeof n.boostTerm=="function"?n.boostTerm(e,t,s):1;return{term:e,fuzzy:o,prefix:i,termBoost:r}},ue={idField:"id",extractField:(n,e)=>n[e],tokenize:n=>n.split(Qt),processTerm:n=>n.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(n,e)=>{typeof(console==null?void 0:console[n])=="function"&&console[n](e)},autoVacuum:!0},ze={combineWith:Ce,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Pt},Gt={combineWith:Ge,prefix:(n,e,t)=>e===t.length-1},be={batchSize:1e3,batchWait:10},ve={minDirtFactor:.1,minDirtCount:20},de=Object.assign(Object.assign({},be),ve),Ht=(n,e)=>{n.includes(e)||n.push(e)},Fe=(n,e)=>{for(const t of e)n.includes(t)||n.push(t)},Te=({score:n},{score:e})=>e-n,Ae=()=>new Map,H=n=>{const e=new Map;for(const t of Object.keys(n))e.set(parseInt(t,10),n[t]);return e},Q=n=>Y(void 0,void 0,void 0,function*(){const e=new Map;let t=0;for(const s of Object.keys(n))e.set(parseInt(s,10),n[s]),++t%1e3===0&&(yield He(0));return e}),He=n=>new Promise(e=>setTimeout(e,n)),Qt=/[\n\r\p{Z}\p{P}]+/u,Kt=async(n,e={})=>{const t=ee(),{content:s}=t.public,{integrity:o,api:{baseURL:i},search:r}=s,{indexed:a}=r||{},l=`${i}/search${o?"-"+o:""}`;if(a){const{options:d}=r||{},{data:h}=await Oe(l,{responseType:"text"},"$1gpCpwXPVC");if(!h.value)throw oe({statusCode:500,message:"Missing search data"});return Yt(n,h,d)}if(!e.miniSearch)throw oe({statusCode:500,message:"Missing miniSearch options"});const{data:c}=await Oe(l,"$K0H4ck8p9J");if(!c.value)throw oe({statusCode:500,message:"Missing search data"});return Xt(n,c,e.miniSearch)},Yt=(n,e,t)=>{const s=z(()=>W.loadJSON(I(e),I(t)));return z(()=>s.value.search(I(n)))},Xt=function(n,e,t){const s=z(()=>new W(I(t)));return s.value.addAll(I(e)),z(()=>s.value.search(I(n)))},Zt="_results_1fbza_2",es={results:Zt},ts={class:"d-flex flex-column"},ss=["disabled"],ns={key:0},os=["onClick"],is={key:1,class:"text-center h-100 d-flex align-items-center justify-content-center"},rs={__name:"modal-search",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],async setup(n){let e,t;const s=te(n,"modelValue"),o=j(""),i=j(""),r=j(!1),a=z(()=>Object.keys(S(u)).length===0&&S(g).length===0&&r.value),l=()=>{},c=()=>{o.value="",i.value="",r.value=!1},{data:u,status:d,refresh:h}=([e,t]=Me(async()=>pe("search",async()=>{const w={},b=S(await Kt(o));return Array.isArray(b)&&b.length>0&&b.forEach(F=>{const{id:V,score:M,match:L}=F,q=V.split("/").pop().split("#")[0];Object.keys(L).forEach(G=>{w[G]||(w[G]={}),w[G][q]||(w[G][q]=0),w[G][q]+=M})}),w},{lazy:!0,server:!1,default:()=>({})})),e=await e,t(),e),p=z(()=>d.value==="pending"),_=async()=>{await h(),i.value=Object.keys(u.value)[0],r.value=!0},f={},{data:g}=([e,t]=Me(async()=>pe("search_articles_by_match",async()=>{var M,L;const w=i.value;if(!w)return[];if((M=f[w])!=null&&M.articles)return(L=f[w])==null?void 0:L.articles;const b=u.value[w],F=Object.keys(b).filter(N=>N!=="articles"),V=await Promise.all(F.map(N=>yt(N)));return V.sort(({slug:N},{slug:q})=>b[N]>b[q]?-1:1),f[w]||(f[w]={}),f[w].articles=V,V},{watch:[i],lazy:!0,server:!1,default:()=>[]})),e=await e,t(),e),C=w=>{i.value=w},x=j(null),R=()=>{x.value.$el.focus()};return(w,b)=>{const F=Ne,V=rt;return y(),E(ke,{modelValue:s.value,"onUpdate:modelValue":b[2]||(b[2]=M=>s.value=M),title:"搜尋文章",size:"lg",onShown:R,onHidden:c},{default:v(()=>[A("div",ts,[A("form",{onSubmit:Ee(_,["prevent"])},[A("fieldset",{class:"input-group",disabled:S(p)},[m(Dt,{ref_key:"input",ref:x,modelValue:S(o),"onUpdate:modelValue":b[0]||(b[0]=M=>se(o)?o.value=M:null),placeholder:"請輸入關鍵字",class:$(w.$style.input),onInput:l},null,8,["modelValue","class"]),m(F,{variant:"primary",type:"submit",disabled:!S(o)},{default:v(()=>[m(je,{icon:"search"})]),_:1},8,["disabled"])],8,ss)],32),A("div",{class:$(["mt-2",w.$style.results])},[S(r)?(y(),k("div",ns,[(y(!0),k(X,null,_e(S(u),(M,L)=>(y(),k("button",{key:L,type:"button",class:$(["btn btn-sm rounded-pill me-1 mt-1",L===S(i)?"btn-primary":"btn-outline-secondary"]),onClick:N=>C(L)},J(L),11,os))),128)),(y(!0),k(X,null,_e(S(g),M=>(y(),k("div",{key:M.slug},[b[3]||(b[3]=A("hr",{class:"my-3"},null,-1)),(y(),E(V,{key:M.slug,article:M,container:!1,onClick:b[1]||(b[1]=L=>s.value=!1)},null,8,["article"]))]))),128))])):ge("",!0),S(a)?(y(),k("div",is,J("哎呀～找不到文章"))):ge("",!0)],2)])]),_:1},8,["modelValue"])}}},as={$style:es},ls=U(rs,[["__cssModules",as]]),cs={__name:"header-icon-search",props:{iconClass:{type:[String,Array],default:""}},setup(n){const e=j(!1);return(t,s)=>(y(),k("div",null,[m(ne,{icon:"search",title:"搜尋文章",class:$(n.iconClass),onClick:s[0]||(s[0]=o=>e.value=!0)},null,8,["class"]),m(ls,{modelValue:S(e),"onUpdate:modelValue":s[1]||(s[1]=o=>se(e)?e.value=o:null)},null,8,["modelValue"])]))}},us={__name:"modal-categories",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(n){const e=te(n,"modelValue"),{categoriesMap:t}=ee().public,s=z(()=>Object.keys(t).map(i=>({name:t[i],value:i}))),o=({value:i})=>at({category:i});return(i,r)=>(y(),E(ke,{modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=a=>e.value=a),title:"文章分類"},{default:v(()=>[m(Be,{"active-class":"fw-bold",vertical:"",items:s.value,"link-generate-func":o,onClickItem:r[0]||(r[0]=a=>e.value=!1)},{item:v(({item:a})=>[T(J(a.name),1)]),_:1},8,["items"])]),_:1},8,["modelValue"]))}},ds={key:0},hs={__name:"header-icon-categories",props:{showText:{type:Boolean,default:!1},iconClass:{type:[String,Array],default:""}},setup(n){const e=j(!1),{categoriesMap:t}=ee().public,s=lt(),o=z(()=>t[s.params.category]);return(i,r)=>(y(),k("div",null,[m(ne,{icon:"folder",title:"文章分類",class:$(n.iconClass),onClick:r[0]||(r[0]=a=>e.value=!0)},{default:v(()=>[n.showText&&o.value?(y(),k("span",ds,J(o.value),1)):ge("",!0)]),_:1},8,["class"]),m(us,{modelValue:S(e),"onUpdate:modelValue":r[1]||(r[1]=a=>se(e)?e.value=a:null)},null,8,["modelValue"])]))}},fs={__name:"header-icon-theme",props:{iconClass:{type:[String,Array],default:""}},setup(n){const e=ct(),t=z(()=>e.icon);return(s,o)=>(y(),E(ne,{icon:S(t),class:$(n.iconClass),onClick:S(e).toggle},null,8,["icon","class","onClick"]))}},ms="_logo_bi43o_2",ps="_header_bi43o_6",_s="_container_bi43o_7",gs="_hint_bi43o_25",ys="_shrink_bi43o_45",bs={logo:ms,header:ps,container:_s,hint:gs,shrink:ys},vs={class:"ms-3 flex-grow-1"},ws={class:"d-flex align-items-center justify-content-end"},Ss={__name:"common-header",props:{shrink:{type:Boolean,default:!1}},setup(n){return(e,t)=>{const s=we;return y(),k("header",{class:$([[e.$style.header,n.shrink?e.$style.shrink:""],"border-bottom border-primary border-2 position-fixed shadow-sm bg-foreground w-100"])},[m(xe,{class:$([e.$style.container,"d-flex flex-row align-items-center"])},{default:v(()=>[m(Re,{bordered:"",class:$(e.$style.logo)},null,8,["class"]),A("div",vs,[m(s,{class:"fw-bold text-body d-block text-decoration-none",to:"/"},{default:v(()=>t[0]||(t[0]=[T(" 隨機手札 ")])),_:1}),A("small",{class:$(["text-muted",e.$style.hint])},"雜七雜八之地",2)]),A("div",ws,[m(hs,{"icon-class":"d-flex p-0","show-text":""}),m(jt,{"icon-class":"d-flex p-0"}),m(fs,{"icon-class":"d-flex p-0"}),m(cs,{"icon-class":"d-flex p-0"})])]),_:1},8,["class"])],2)}}},ks={$style:bs},xs=U(Ss,[["__cssModules",ks]]),$s={},Cs={class:"fw-bold mb-2 d-flex align-items-center h6 text-primary"};function Ms(n,e){return y(),k("div",Cs,[D(n.$slots,"default")])}const Os=U($s,[["render",Ms]]),Vs={},Is={class:"small"};function zs(n,e){return y(),k("div",Is,[D(n.$slots,"default")])}const Fs=U(Vs,[["render",zs]]),he={__name:"footer-block",props:{title:{type:String,default:""},titleTo:{type:[String,Object],default:""}},setup(n){return(e,t)=>{const s=we;return y(),E(ht,ut({[S(Le)||""]:S(dt)/3,class:"mt-3 mt-lg-5"}),{default:v(()=>[m(Os,null,{default:v(()=>[m(s,{to:n.titleTo,class:"text-primary"},{default:v(()=>[T(J(n.title),1)]),_:1},8,["to"]),D(e.$slots,"title")]),_:3}),m(Fs,null,{default:v(()=>[D(e.$slots,"default")]),_:3})]),_:3},16)}}},K={__name:"footer-link",props:{href:{type:String,default:""}},setup(n){return(e,t)=>(y(),E(vt,{href:n.href,class:"text-white"},{default:v(()=>[D(e.$slots,"default")]),_:3},8,["href"]))}},Ts="_footer_4zxf0_2",As={footer:Ts},Ls={__name:"common-footer",setup(n){return(e,t)=>(y(),k("footer",{class:$(["pb-3 pb-lg-5",e.$style.footer])},[m(xe,{class:"text-white"},{default:v(()=>[m(bt,null,{default:v(()=>[m(he,{title:"關於我","title-to":{path:"/buy_me_a_tea",hash:"#關於我"}},{title:v(()=>[m(Re,{height:"16",class:"ms-2"})]),default:v(()=>[t[0]||(t[0]=T(" 工作時若不喝上一杯飲料就無法做事的前端小碼農。三大前端框架陣營中屬於 Vue 陣營。 "))]),_:1}),m(he,{title:"關於隨機手札","title-to":{path:"/buy_me_a_tea",hash:"#關於隨機手札"}},{default:v(()=>[t[4]||(t[4]=T(" 使用 ")),m(K,{href:"https://v2.nuxt.com/"},{default:v(()=>t[1]||(t[1]=[T(" Nuxt 2 ")])),_:1}),t[5]||(t[5]=T(" 建置於 ")),m(K,{href:"https://pages.github.com/"},{default:v(()=>t[2]||(t[2]=[T(" Github Pages ")])),_:1}),t[6]||(t[6]=T(" 上，全站文字皆在 ")),m(K,{href:"https://creativecommons.org/licenses/by-nd/4.0/legalcode.zh-hant"},{default:v(()=>t[3]||(t[3]=[T(" 創用CC BY-ND 4.0 條款 ")])),_:1}),t[7]||(t[7]=T(" 下提供。 "))]),_:1}),m(he,{title:"請我喝杯手搖飲吧！","title-to":{path:"/buy_me_a_tea",hash:"#請我喝杯手搖飲吧！"}},{default:v(()=>[t[9]||(t[9]=T(" 若這裡的經驗分享有幫助到你，可以透過")),m(K,{href:"https://ko-fi.com/chaoschaoshuang"},{default:v(()=>t[8]||(t[8]=[T(" Ko-fi ")])),_:1}),t[10]||(t[10]=T("請我喝杯手搖飲哦！ "))]),_:1})]),_:1})]),_:1})],2))}},js={$style:As},Es=U(Ls,[["__cssModules",js]]);function Ds(n){return ft()?(mt(n),!0):!1}const Ns=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Rs=n=>n!=null,fe=()=>{};function Bs(n){return Array.isArray(n)?n:[n]}const Qe=Ns?window:void 0;function me(n){var e;const t=I(n);return(e=t==null?void 0:t.$el)!=null?e:t}function Us(){const n=j(!1),e=gt();return e&&_t(()=>{n.value=!0},e),n}function Ws(n){const e=Us();return z(()=>(e.value,!!n()))}function Ps(n,e,t={}){const{root:s,rootMargin:o="0px",threshold:i=0,window:r=Qe,immediate:a=!0}=t,l=Ws(()=>r&&"IntersectionObserver"in r),c=z(()=>{const _=I(n);return Bs(_).map(me).filter(Rs)});let u=fe;const d=j(a),h=l.value?pt(()=>[c.value,me(s),d.value],([_,f])=>{if(u(),!d.value||!_.length)return;const g=new IntersectionObserver(e,{root:me(f),rootMargin:o,threshold:i});_.forEach(C=>C&&g.observe(C)),u=()=>{g.disconnect(),u=fe}},{immediate:a,flush:"post"}):fe,p=()=>{u(),h(),d.value=!1};return Ds(p),{isSupported:l,isActive:d,pause(){u(),d.value=!1},resume(){d.value=!0},stop:p}}function Js(n,e={}){const{window:t=Qe,scrollTarget:s,threshold:o=0,rootMargin:i}=e,r=j(!1);return Ps(n,a=>{let l=r.value,c=0;for(const u of a)u.time>=c&&(c=u.time,l=u.isIntersecting);r.value=l},{root:s,window:t,threshold:o,rootMargin:I(i)}),r}const qs="_container_16ffe_2",Gs={container:qs},Hs={__name:"default",setup(n){const e=j(null),t=Js(e);return(s,o)=>(y(),k(X,null,[A("div",{ref_key:"scrollDetect",ref:e,class:"d-none d-lg-block"},null,512),m(xs,{shrink:!S(t)},null,8,["shrink"]),A("div",{class:$(["mt-0 mt-lg-4",s.$style.container])},[m(xe,{tag:"main",class:"py-4"},{default:v(()=>[D(s.$slots,"default")]),_:3})],2),m(Es,{class:"mt-4"})],64))}},Qs={$style:Gs},sn=U(Hs,[["__cssModules",Qs]]);export{sn as default};
