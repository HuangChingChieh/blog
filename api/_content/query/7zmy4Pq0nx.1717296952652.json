{"_path":"/articles/2023/fedora_disable_turbo_boost","_dir":"2023","_draft":false,"_partial":false,"_locale":"","title":"在Fedora 38中關閉Intel Turbo Boost","description":"在 Macbook Air 2013 上 安裝 Fedora後，發現會有容易過熱的問題（溫度直上 90°C 甚至 100 °C），找到了一個解決方式是直接關閉 Intel Turbo Boost。因為過程稍微複雜一些，所以就把他紀錄下來了。","img":"922/JKLlrl.png","tags":["fedora","intel turbo boost"],"category":"linux","readingTime":{"text":"6 min read","minutes":5.15,"time":309000,"words":1030},"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"article-inner-link","props":{"slug":"macbook_air_2013_fedora"},"children":[{"type":"text","value":"Macbook Air 2013 上 安裝 Fedora"}]},{"type":"text","value":"後，發現會有容易過熱的問題（溫度直上 90°C 甚至 100 °C），找到了一個解決方式是直接關閉 Intel Turbo Boost。因為過程稍微複雜一些，所以就把他紀錄下來了。"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 "},{"type":"element","tag":"article-inner-link","props":{"slug":"macbook_air_2013_fedora"},"children":[{"type":"text","value":"Macbook Air 2013 上 安裝 Fedora"}]},{"type":"text","value":"後，發現會有容易過熱的問題（溫度直上 90°C 甚至 100 °C），找到了一個解決方式是直接關閉 Intel Turbo Boost。因為過程稍微複雜一些，所以就把他紀錄下來了。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"什麼是-intel-turbo-boost"},"children":[{"type":"text","value":"什麼是 Intel Turbo Boost"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"簡單說呢，就是讓處理器在沒事做的時候維持低頻率，有事做的時候變為高頻率但卻又不超過安全值。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因為 CPU 頻率決定了特定時間內能夠吞吐的工作量，CPU 工作時的頻率越高，發熱量也越大，所以網路上就會出現關閉 Intel Turbo Boost 讓 CPU 不論有沒有事做都維持在基本頻率，以降低消耗電量以及發熱度的作法，雖然通常是在筆電上設定，但若想要桌機不要那麼熱情（？），也是可以設定的。"}]},{"type":"element","tag":"article-note","props":{},"children":[{"type":"text","value":"\n關於 Intel Turbo Boost 可參考\n"},{"type":"element","tag":"a","props":{"href":"https://www.intel.com.tw/content/www/tw/zh/gaming/resources/turbo-boost.html","rel":["nofollow"]},"children":[{"type":"text","value":"官方說明"}]}]},{"type":"element","tag":"h3","props":{"id":"關閉的方式"},"children":[{"type":"text","value":"關閉的方式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在我所查到的資料裡， Fedora 38 中有兩種關閉 Intel Turbo Boost 的方式。一個是透過別人寫的 GNOME 擴充套件，一個則是直接修改設定值並把他設定成開機時自動關閉。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"自己比較喜歡後者，因為前者須依靠別人更新的 GNOME 擴充套件，在迭代速度較快的 Fedora 中，常常升上新版本之後 GNOME 也會跟著升級，然後導致比較少見的擴充套件掛掉。但前者設定相對容易也不需要輸入什麼指令，大家可以自己挑自己喜歡的。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"透過-gnome-擴充套件關閉"},"children":[{"type":"text","value":"透過 GNOME 擴充套件關閉"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第一個方式就是透過"},{"type":"element","tag":"a","props":{"href":"https://extensions.gnome.org/extension/1082/cpufreq/","rel":["nofollow"]},"children":[{"type":"text","value":"cpufreq"}]},{"type":"text","value":"這個擴充套件來完成，這個套件甚至可以調整 CPU 的最低／最高頻率以及可使用的 CPU 核心數量。"}]},{"type":"element","tag":"article-img","props":{"img":"922/5do1r7.png"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但這個套件不在 Fedora 官方套件庫內，要從"},{"type":"element","tag":"a","props":{"href":"https://extensions.gnome.org/","rel":["nofollow"]},"children":[{"type":"text","value":"GNOMe Extensions 網站"}]},{"type":"text","value":"自行安裝。安裝後在頂端列將「Turbo Boost」這個選項關閉就可以了。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"透過修改系統設定值關閉"},"children":[{"type":"text","value":"透過修改系統設定值關閉"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第二個方式就是我採用的方式了，自行修改設定值並設定為開機時自動開啟。首先建立一個 system service 檔案，可使用自己喜歡的文字編輯器："}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"# 建立一個system service\nsudo gnome-text-editor /etc/systemd/system/disable-intel-turboboost.service\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"# 建立一個system service\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" gnome-text-editor"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" /etc/systemd/system/disable-intel-turboboost.service\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接著貼上如下的內容："}]},{"type":"element","tag":"pre","props":{"className":"language-ini shiki shiki-themes github-dark","code":"[Unit]\nDescription=Disable Intel Turbo Boost using pstate driver\n\n[Service]\nExecStart=/bin/sh -c \"/usr/bin/echo 1 > /sys/devices/system/cpu/intel_pstate/no_turbo\"\nExecStop=/bin/sh -c \"/usr/bin/echo 0 > /sys/devices/system/cpu/intel_pstate/no_turbo\"\nRemainAfterExit=yes\n\n[Install]\nWantedBy=sysinit.target\n","filename":"disable-intel-turboboost.service","language":"ini","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[Unit]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"Description=Disable Intel Turbo Boost using pstate driver\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[Service]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ExecStart=/bin/sh -c \"/usr/bin/echo 1 > /sys/devices/system/cpu/intel_pstate/no_turbo\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"ExecStop=/bin/sh -c \"/usr/bin/echo 0 > /sys/devices/system/cpu/intel_pstate/no_turbo\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"RemainAfterExit=yes\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[Install]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"WantedBy=sysinit.target\n"}]}]}]}]},{"type":"element","tag":"article-note","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.fedoraproject.org/en-US/quick-docs/systemd-understanding-and-administering/#_common_service_parameters","rel":["nofollow"]},"children":[{"type":"text","value":"關於 system service 檔案的詳細說明，可參考 Fedora 官方文件。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最後啟用這個我們自己寫的服務，就完成囉。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"sudo systemctl daemon-reload\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" daemon-reload\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"sudo systemctl enable disable-intel-turboboost\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" enable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" disable-intel-turboboost\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"sudo systemctl start disable-intel-turboboost\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" start"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" disable-intel-turboboost\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"sudo systemctl status disable-intel-turboboost\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" status"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" disable-intel-turboboost\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果想要恢復使用，可以用下面兩個指令。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"# 永久性恢復使用Turbo Boost\nsudo systemctl disable disable-intel-turboboost\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"# 永久性恢復使用Turbo Boost\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" disable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" disable-intel-turboboost\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"# 暫時恢復使用Turbo Boost（重開後仍停用）\nsudo systemctl stop disable-intel-turboboost\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"# 暫時恢復使用Turbo Boost（重開後仍停用）\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" systemctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" stop"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" disable-intel-turboboost\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"檢驗"},"children":[{"type":"text","value":"檢驗"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"其實也說不上是「檢驗」，就是做一些會讓電腦很忙的事情，比如說開一些很複雜的網站啊、工程師編譯一些專案啊……之類的，然後去感受一下溫度、使用可以看到溫度的 GNOME 擴充套件（例如"},{"type":"element","tag":"a","props":{"href":"https://extensions.gnome.org/extension/841/freon/","rel":["nofollow"]},"children":[{"type":"text","value":"Freon"}]},{"type":"text","value":"）或是直接看系統監控程式。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"以我的"},{"type":"element","tag":"a","props":{"href":"https://www.intel.com.tw/content/www/tw/zh/products/sku/124967/intel-core-i58250u-processor-6m-cache-up-to-3-40-ghz/specifications.html","rel":["nofollow"]},"children":[{"type":"text","value":"i5-8250U"}]},{"type":"text","value":"來說，原本最高可以跑到 3.40 GHz，關掉 turbo 會直接剩 1.60 GHz，將近一半的效能損失想必是非常明顯的。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"若想更精確地確認，也可以使用這個指令："}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"lscpu | grep \"MHz\"\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"lscpu"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" grep"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" \"MHz\"\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然後看輸出的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"CPU(s) scaling MHz"}]},{"type":"text","value":"項目，這可以解讀為 CPU 目前輸出的頻率佔最大輸出的比例，像我的就會被鎖在 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"1.6 / 3.4 ≒ 47%"}]},{"type":"text","value":"就上不去。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"CPU(s) scaling MHz: 47%\nCPU max MHz:        3400.0000\nCPU min MHz:        400.0000\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"CPU(s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":") scaling MHz: 47%\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"CPU"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" max"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" MHz:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"        3400.0000\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"CPU"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" min"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" MHz:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"        400.0000\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"後記"},"children":[{"type":"text","value":"後記"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這種作法是用效率去交換發熱降低以及省電，若不是像我使用 2013 年的 Macbook Air 這種特殊情境或是真的比較老的裝置上，應該是都用不太到，但了解了一些事情的感覺還是不錯啦。希望這個作法可以讓那台 MBA 活久一點，環保嘛～不過物盡其用而已。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"參考文獻"},"children":[{"type":"text","value":"參考文獻"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.gadgethow2.com/2021/05/05/how-to-disable-intel-turboboost-using-systemd/","rel":["nofollow"]},"children":[{"type":"text","value":"How To: Disable Intel Turbo Boost on Linux using systemd + intel_pstate"}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"什麼是-intel-turbo-boost","depth":2,"text":"什麼是 Intel Turbo Boost","children":[{"id":"關閉的方式","depth":3,"text":"關閉的方式"}]},{"id":"透過-gnome-擴充套件關閉","depth":2,"text":"透過 GNOME 擴充套件關閉"},{"id":"透過修改系統設定值關閉","depth":2,"text":"透過修改系統設定值關閉"},{"id":"檢驗","depth":2,"text":"檢驗"},{"id":"後記","depth":2,"text":"後記"},{"id":"參考文獻","depth":2,"text":"參考文獻"}]}},"_type":"markdown","_id":"content:articles:2023:fedora_disable_turbo_boost.md","_source":"content","_file":"articles/2023/fedora_disable_turbo_boost.md","_extension":"md","createdAt":"2023-10-31T00:01:43.000Z","updatedAt":"2024-02-19T10:00:23.000Z","slug":"fedora_disable_turbo_boost","plainTexts":["在","Macbook Air 2013 上 安裝 Fedora","後，發現會有容易過熱的問題（溫度直上 90°C 甚至 100 °C），找到了一個解決方式是直接關閉 Intel Turbo Boost。因為過程稍微複雜一些，所以就把他紀錄下來了。","什麼是 Intel Turbo Boost","簡單說呢，就是讓處理器在沒事做的時候維持低頻率，有事做的時候變為高頻率但卻又不超過安全值。","因為 CPU 頻率決定了特定時間內能夠吞吐的工作量，CPU 工作時的頻率越高，發熱量也越大，所以網路上就會出現關閉 Intel Turbo Boost 讓 CPU 不論有沒有事做都維持在基本頻率，以降低消耗電量以及發熱度的作法，雖然通常是在筆電上設定，但若想要桌機不要那麼熱情（？），也是可以設定的。","關於 Intel Turbo Boost 可參考","官方說明","關閉的方式","在我所查到的資料裡， Fedora 38 中有兩種關閉 Intel Turbo Boost 的方式。一個是透過別人寫的 GNOME 擴充套件，一個則是直接修改設定值並把他設定成開機時自動關閉。","自己比較喜歡後者，因為前者須依靠別人更新的 GNOME 擴充套件，在迭代速度較快的 Fedora 中，常常升上新版本之後 GNOME 也會跟著升級，然後導致比較少見的擴充套件掛掉。但前者設定相對容易也不需要輸入什麼指令，大家可以自己挑自己喜歡的。","透過 GNOME 擴充套件關閉","第一個方式就是透過","cpufreq","這個擴充套件來完成，這個套件甚至可以調整 CPU 的最低／最高頻率以及可使用的 CPU 核心數量。","但這個套件不在 Fedora 官方套件庫內，要從","GNOMe Extensions 網站","自行安裝。安裝後在頂端列將「Turbo Boost」這個選項關閉就可以了。","透過修改系統設定值關閉","第二個方式就是我採用的方式了，自行修改設定值並設定為開機時自動開啟。首先建立一個 system service 檔案，可使用自己喜歡的文字編輯器：","# 建立一個system service","sudo","gnome-text-editor","/etc/systemd/system/disable-intel-turboboost.service","接著貼上如下的內容：","[Unit]","Description=Disable Intel Turbo Boost using pstate driver","","[Service]","ExecStart=/bin/sh -c \"/usr/bin/echo 1 > /sys/devices/system/cpu/intel_pstate/no_turbo\"","ExecStop=/bin/sh -c \"/usr/bin/echo 0 > /sys/devices/system/cpu/intel_pstate/no_turbo\"","RemainAfterExit=yes","","[Install]","WantedBy=sysinit.target","關於 system service 檔案的詳細說明，可參考 Fedora 官方文件。","最後啟用這個我們自己寫的服務，就完成囉。","sudo","systemctl","daemon-reload","sudo","systemctl","enable","disable-intel-turboboost","sudo","systemctl","start","disable-intel-turboboost","sudo","systemctl","status","disable-intel-turboboost","如果想要恢復使用，可以用下面兩個指令。","# 永久性恢復使用Turbo Boost","sudo","systemctl","disable","disable-intel-turboboost","# 暫時恢復使用Turbo Boost（重開後仍停用）","sudo","systemctl","stop","disable-intel-turboboost","檢驗","其實也說不上是「檢驗」，就是做一些會讓電腦很忙的事情，比如說開一些很複雜的網站啊、工程師編譯一些專案啊……之類的，然後去感受一下溫度、使用可以看到溫度的 GNOME 擴充套件（例如","Freon","）或是直接看系統監控程式。","以我的","i5-8250U","來說，原本最高可以跑到 3.40 GHz，關掉 turbo 會直接剩 1.60 GHz，將近一半的效能損失想必是非常明顯的。","若想更精確地確認，也可以使用這個指令：","lscpu","|","grep","\"MHz\"","然後看輸出的","CPU(s) scaling MHz","項目，這可以解讀為 CPU 目前輸出的頻率佔最大輸出的比例，像我的就會被鎖在","1.6 / 3.4 ≒ 47%","就上不去。","CPU(s",") scaling MHz: 47%","CPU","max","MHz:","3400.0000","CPU","min","MHz:","400.0000","後記","這種作法是用效率去交換發熱降低以及省電，若不是像我使用 2013 年的 Macbook Air 這種特殊情境或是真的比較老的裝置上，應該是都用不太到，但了解了一些事情的感覺還是不錯啦。希望這個作法可以讓那台 MBA 活久一點，環保嘛～不過物盡其用而已。","參考文獻","How To: Disable Intel Turbo Boost on Linux using systemd + intel_pstate","html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"]}