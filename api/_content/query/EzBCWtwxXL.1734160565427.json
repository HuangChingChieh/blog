{"tags":["nuxt","nuxt3","vue","tailwindcss","scss","pinia","eslint","commitlint","lint-staged","husky","prettier"],"category":"frontend","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本系列是紀錄自己平常建立新的 Nuxt 3 專案時會引入的一些設定，覺得之前 Nuxt 2 在建立時有很多選項可以選，選好之後都自動設定好真的是很棒……。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"建立-nuxt-3-專案"},"children":[{"type":"text","value":"建立 Nuxt 3 專案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先就是建立一個新的 Nuxt 3 專案。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npx nuxi@latest init <project-name>\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" nuxi@latest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" init"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"project-nam"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"css-管理"},"children":[{"type":"text","value":"CSS 管理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"自己在 CSS 相關處理上，比較常用的是 scss 以及 Tailwind CSS，這邊分別紀錄。"}]},{"type":"element","tag":"h3","props":{"id":"設定-css-獨立編譯"},"children":[{"type":"text","value":"設定 css 獨立編譯"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nuxt 3 預設會將頁面內元件的 css 整個編譯在 HTML 裡面，但這樣會失去重複利用樣式表的優勢，所以自己習慣都是關掉這功能："}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes github-dark","code":"export default defineNuxtConfig({\n  features: {\n    inlineStyles: false,\n  },\n})\n","filename":"nuxt.config.ts","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  features: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"    inlineStyles: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"})\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"scss"},"children":[{"type":"text","value":"SCSS"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npm install -D sass\n","filename":"首先安裝SCSS支援","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" -D"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" sass\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這邊我習慣會建立兩個檔案："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"~/assets/scss/main.scss"}]},{"type":"text","value":"：放置總樣式表，也是編譯的進入點，若需要引用 UI 框架的 scss 會寫在這。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"~/assets/scss/custom.scss"}]},{"type":"text","value":"：放置變數或是修改 UI 框架預設變數的檔案"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"官方有兩種方式可以引入"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"main.scss"}]},{"type":"text","value":"檔案，自己習慣是寫在"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":"中："}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes github-dark","code":"export default defineNuxtConfig({\n  css: ['~/assets/scss/main.scss'],\n  vite: {\n    css: {\n      preprocessorOptions: {\n        // 將放置變數的scss檔案全域注入到component中\n        scss: {\n          additionalData: '@use \"~/assets/scss/custom.scss\" as *;',\n        },\n      },\n    },\n  },\n})\n","filename":"nuxt.config.ts","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  css: ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"'~/assets/scss/main.scss'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  vite: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"    css: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"      preprocessorOptions: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"        // 將放置變數的scss檔案全域注入到component中\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"        scss: {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"          additionalData: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"'@use \"~/assets/scss/custom.scss\" as *;'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"        },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"      },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"    },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  },\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"})\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"tailwind-css"},"children":[{"type":"text","value":"Tailwind CSS"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npx nuxi@latest module add tailwindcss\n","filename":"Tailwind CSS 可以直接使用 Nuxt 模組來引入","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" nuxi@latest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" tailwindcss\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面指令執行完，就會自動在"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":"中引入模組："}]},{"type":"element","tag":"pre","props":{"className":"language-ts shiki shiki-themes github-dark","code":"export default defineNuxtConfig({\n  modules: ['@nuxtjs/tailwindcss'],\n})\n","filename":"nuxt.config.ts","language":"ts","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  modules: ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"'@nuxtjs/tailwindcss'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"})\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"之後利用官方指令建立預設的 config 檔案："}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npx tailwindcss init\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" tailwindcss"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" init\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"pinia"},"children":[{"type":"text","value":"Pinia"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pinia 是 Nuxt 3 之後官方建議使用的狀態管理模組，自己上了 Nuxt 3 之後也都是用 Pinia。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npx nuxi@latest module add pinia\n","filename":"直接使用 Nuxt 模組來引入","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" nuxi@latest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" pinia\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"之後只要在資料夾"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"stores"}]},{"type":"text","value":"下的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"js"}]},{"type":"text","value":"或"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ts"}]},{"type":"text","value":"檔案，都會被預設自動 import。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"linters"},"children":[{"type":"text","value":"Linters"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"所謂的 "},{"type":"element","tag":"a","props":{"href":"https://zh.wikipedia.org/zh-tw/Lint","rel":["nofollow"]},"children":[{"type":"text","value":"linter"}]},{"type":"text","value":"，就是能在既定的規則下檢查程式碼中違反規則的段落（通常是有錯誤或是可能造成效能問題的部份）。在開發過程中，自己常用的 linter 有兩個：eslint 與 commitlint。"}]},{"type":"element","tag":"h3","props":{"id":"eslint"},"children":[{"type":"text","value":"eslint"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"eslint 是一種 js / ts 的 "},{"type":"element","tag":"a","props":{"href":"https://zh.wikipedia.org/zh-tw/Lint","rel":["nofollow"]},"children":[{"type":"text","value":"linter"}]},{"type":"text","value":" 工具，他能檢查程式碼中一些有錯誤或是可能造成效能問題的段落，例如："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"不小心重新賦值 const 變數"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在作用域中不更改的變數卻使用了 let 宣告"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"宣告了變數卻完全沒用到"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"而 Vue 也針對 eslint 貢獻了自己的 lint 規則，讓 eslint 不僅限於用在 js / ts 上，例如："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在元件上重複使用了相同的屬性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"沒有內容的 CustomComponent 沒有自我關閉（例如："},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<CustomComponent></CustomComponent>"}]},{"type":"text","value":"應該寫成"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<CustomComponent />"}]},{"type":"text","value":"）"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"諸如此類。搭配編輯器的套件，更可以在寫程式的時候就先標示出來修改，以免 commit 之後才發現。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npx nuxi module add eslint\n","filename":"透過Nuxt模組安裝eslint","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" nuxi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" module"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" eslint\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這個模組除了協助安裝 eslint 以外，也會自動設定跟 Nuxt 專案相關的各種 eslint 設定，開箱即用也幾乎不需要修改，非常方便。"}]},{"type":"element","tag":"h3","props":{"id":"commitlint"},"children":[{"type":"text","value":"commitlint"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"commitlint 則是規定 git commit 訊息要如何寫的套件，他可以在一定程度上管理專案的 commit 訊息，以免大家各寫各的格式導致很混亂。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npm install --save-dev @commitlint/{cli,config-conventional}\n","filename":"安裝commitlint","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --save-dev"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" @commitlint/{cli,config-conventional}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"之後建立 commitlint 的設定檔於專案根目錄下："}]},{"type":"element","tag":"pre","props":{"className":"language-js shiki shiki-themes github-dark","code":"export default {\n  extends: ['@commitlint/config-conventional'],\n}\n","filename":"commitlint.config.js","language":"js","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#F97583"},"children":[{"type":"text","value":" default"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  extends: ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"'@commitlint/config-conventional'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"prettier"},"children":[{"type":"text","value":"Prettier"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"相較於 linter，Prettier 則是一種格式化工具，只關心程式碼「格式」的部份，例如："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"字串要雙引號或單引號"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"程式碼後面要不要加分號"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"匿名方法單個參數要不要加括號"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"縮排要幾個空格寬"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"專案若能自帶格式化設定規則，對於開發者彼此之間統一也會很有幫助。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npm install --save-dev --save-exact prettier\n","filename":"首先安裝Prettier","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --save-dev"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --save-exact"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" prettier\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"設定檔"},"children":[{"type":"text","value":"設定檔"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"建立空白設定檔"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".prettierrc"}]},{"type":"text","value":"於專案根目錄下："}]},{"type":"element","tag":"pre","props":{"className":"language-json shiki shiki-themes github-dark","code":"{}\n","filename":".prettierrc","language":"json","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"{}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這可以強迫 Prettier 使用"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".prettierrc"}]},{"type":"text","value":"的設定（在這邊就是使用 Prettier 內建的預設值）而非編輯器內的設定值，"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"就算沒有要修改設定值，也要建立這個檔案以保證專案在不同開發環境中的一致性。"}]}]},{"type":"element","tag":"h3","props":{"id":"忽略檔案"},"children":[{"type":"text","value":"忽略檔案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有些檔案我們不需要 prettier 的話，可以透過新增"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".prettierignore"}]},{"type":"text","value":"檔案來處理（類似"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".gitignore"}]},{"type":"text","value":"），Prettier 會抓同目錄中的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".gitignore"}]},{"type":"text","value":"作為預設易排除的檔案及目錄基底，再加上"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".prettierignore"}]},{"type":"text","value":"中標示的檔案及目錄，若是已經寫在"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".gitignore"}]},{"type":"text","value":"裡面的就不需要再寫到"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".prettierignore"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這個檔案就會依據專案而有很大差異了，這邊就只寫出本篇紀錄會用到的"}]},{"type":"element","tag":"pre","props":{"className":"language-ini shiki shiki-themes github-dark","code":".gitignore\n.prettierignore\n\n## Nuxt 3 static directory\npublic\n\n## husky\n.husky\n","filename":".prettierignore","language":"ini","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":".gitignore\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":".prettierignore\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"## Nuxt 3 static directory\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"public\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"## husky\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":".husky\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"husky-lint-staged"},"children":[{"type":"text","value":"husky + lint-staged"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前面使用的 linters 以及 Prettier，只會在修改程式碼時，或是手動執行檢查時才會作用，你硬要 commit 他們其實也是可以的。那如果能在 commit 之前就檢查他們，有問題不給 commit 的話不是更好嗎？因此就要使用像 husky 與 lint-staged 的工具，來在特定的 git hook 時執行指令來自動檢查，若不通過就不准 commit。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"husky 是管理 "},{"type":"element","tag":"a","props":{"href":"https://git-scm.com/book/zh-tw/v2/Customizing-Git-Git-Hooks","rel":["nofollow"]},"children":[{"type":"text","value":"git hooks"}]},{"type":"text","value":" 的工具，他能在特定的 git hook 執行程式碼；而 lint-staged，則是可以針對狀態為「staged」的檔案（也就是鎖定了目前變更並準備要提交到分支的檔案）進行 lint。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"結合這兩者，就可以作到剛剛說的效果。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npm install --save-dev husky lint-staged\n","filename":"首先安裝husky與lint-staged","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --save-dev"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" husky"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" lint-staged\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npx husky init\n","filename":"接著初始化husky的設定值","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" husky"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" init\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這邊 husky 會預設建立一個"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".husky/pre-commit"}]},{"type":"text","value":"檔案，裡面預設會執行"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"npm test"}]},{"type":"text","value":"若不需要的話可以移除。"}]},{"type":"element","tag":"h3","props":{"id":"commitlint-1"},"children":[{"type":"text","value":"commitlint"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"建立"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"commit-msg"}]},{"type":"text","value":" 的 hook 設定檔於"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".husky"}]},{"type":"text","value":"資料夾下，並放入 commitlint 的指令。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"npx --no -- commitlint --edit $1\n","filename":".husky/commit-msg","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"npx"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --no"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" commitlint"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --edit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#FFAB70"},"children":[{"type":"text","value":" $1\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"eslint-prettier"},"children":[{"type":"text","value":"eslint + prettier"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/lint-staged/lint-staged?tab=readme-ov-file#configuration","rel":["nofollow"]},"children":[{"type":"text","value":"lint-staged 的設定方式有許多種"}]},{"type":"text","value":"，這邊是建立"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".lintstagedrc"}]},{"type":"text","value":"檔案於專案的根目錄下："}]},{"type":"element","tag":"pre","props":{"className":"language-json shiki shiki-themes github-dark","code":"{\n  \"*\": [\"eslint\", \"prettier --write\"]\n}\n","filename":".lintstagedrc","language":"json","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"  \"*\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"\"eslint\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"\"prettier --write\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面是直接設定針對所有檔案，先執行"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"eslint"}]},{"type":"text","value":"再執行"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prettier --write"}]},{"type":"text","value":"，所有不被"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"eslint"}]},{"type":"text","value":"或"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prettier"}]},{"type":"text","value":"自己的設定值排除的檔案都會被檢查。"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"prettier --write"}]},{"type":"text","value":"則是自動格式化後儲存。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"後記"},"children":[{"type":"text","value":"後記"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"大概就是這樣，還是覺得 Nuxt 2 那種一開始建立專案就可以讓你各種選好直接設定好的界面，還可以選 UI 框架直接引入……。這邊的設定除了 scss 檔案以外，我有建立一個 "},{"type":"element","tag":"a","props":{"href":"https://github.com/HuangChingChieh/nuxt3_starter","rel":["nofollow"]},"children":[{"type":"text","value":"nuxt3_starter repository"}]},{"type":"text","value":"，歡迎大家參考使用。"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"建立-nuxt-3-專案","depth":2,"text":"建立 Nuxt 3 專案"},{"id":"css-管理","depth":2,"text":"CSS 管理","children":[{"id":"設定-css-獨立編譯","depth":3,"text":"設定 css 獨立編譯"},{"id":"scss","depth":3,"text":"SCSS"},{"id":"tailwind-css","depth":3,"text":"Tailwind CSS"}]},{"id":"pinia","depth":2,"text":"Pinia"},{"id":"linters","depth":2,"text":"Linters","children":[{"id":"eslint","depth":3,"text":"eslint"},{"id":"commitlint","depth":3,"text":"commitlint"}]},{"id":"prettier","depth":2,"text":"Prettier","children":[{"id":"設定檔","depth":3,"text":"設定檔"},{"id":"忽略檔案","depth":3,"text":"忽略檔案"}]},{"id":"husky-lint-staged","depth":2,"text":"husky + lint-staged","children":[{"id":"commitlint-1","depth":3,"text":"commitlint"},{"id":"eslint-prettier","depth":3,"text":"eslint + prettier"}]},{"id":"後記","depth":2,"text":"後記"}]}}}