{"_path":"/articles/2023/woeusb","_dir":"2023","_draft":false,"_partial":false,"_locale":"","title":"使用WoeUSB在Fedora中製作Windows安裝USB","description":"雖然脫離 Windows 很久，但有時候還是會需要幫朋友重灌電腦什麼的，所以就研究了一下如何在 Fedora 裡面製作 Windows 的安裝媒體。後來在網路上找到WoeUSB這個套件。","img":"923/OleVsx.jpg","tags":["fedora","windows","usb","安裝","重灌"],"category":"linux","readingTime":{"text":"4 min read","minutes":3.54,"time":212400,"words":708},"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"雖然脫離 Windows 很久，但有時候還是會需要幫朋友重灌電腦什麼的，所以就研究了一下如何在 Fedora 裡面製作 Windows 的安裝媒體。後來在網路上找到"},{"type":"element","tag":"a","props":{"href":"https://github.com/WoeUSB/WoeUSB","rel":["nofollow"]},"children":[{"type":"text","value":"WoeUSB"}]},{"type":"text","value":"這個套件。"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"雖然脫離 Windows 很久，但有時候還是會需要幫朋友重灌電腦什麼的，所以就研究了一下如何在 Fedora 裡面製作 Windows 的安裝媒體。後來在網路上找到"},{"type":"element","tag":"a","props":{"href":"https://github.com/WoeUSB/WoeUSB","rel":["nofollow"]},"children":[{"type":"text","value":"WoeUSB"}]},{"type":"text","value":"這個套件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本篇會紀錄使用 WoeUSB 在 Fedora 中製作 Windows 安裝 USB 的過程。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"前置作業"},"children":[{"type":"text","value":"前置作業"}]},{"type":"element","tag":"h3","props":{"id":"下載-windows-iso-檔案"},"children":[{"type":"text","value":"下載 Windows ISO 檔案"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先當然事先準備 Windows 的 ISO 檔案，從 Windows 10 之後，已經可以直接從"},{"type":"element","tag":"a","props":{"href":"https://www.microsoft.com/zh-tw/software-download/windows11","rel":["nofollow"]},"children":[{"type":"text","value":"微軟官網"}]},{"type":"text","value":"下載了，記得要從最下方的「下載 Windows 11 磁碟映像 (ISO)」下載。"}]},{"type":"element","tag":"h3","props":{"id":"準備-usb"},"children":[{"type":"text","value":"準備 USB"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"準備一個 8GB 以上的 USB，就隨便拿一個吧，建議拿 USB 3.0 以上的。"}]},{"type":"element","tag":"h3","props":{"id":"安裝-woeusb-套件"},"children":[{"type":"text","value":"安裝 WoeUSB 套件"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"sudo dnf install WoeUSB\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" dnf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" WoeUSB\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"使用-woeusb"},"children":[{"type":"text","value":"使用 WoeUSB"}]},{"type":"element","tag":"h3","props":{"id":"確認-usb-掛載路徑"},"children":[{"type":"text","value":"確認 USB 掛載路徑"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先要找出 USB 的掛載路徑，可以透過 Gnome 內建的「磁碟」軟體去看，如果顯示出來的是有數字的，把數字去掉後記起來。像我的 USB 顯示是"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/dev/sda1"}]},{"type":"text","value":"，就要記"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/dev/sda"}]},{"type":"text","value":"。使用 WoeUSB 指令時會用到。"}]},{"type":"element","tag":"article-img","props":{"img":"924/APs9I0.png"},"children":[]},{"type":"element","tag":"h3","props":{"id":"卸載-usb"},"children":[{"type":"text","value":"卸載 USB"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"大部分的 USB 連接到 Fedora 之後，分割區都會被自動掛載。需要手動把這些被掛載的分割區全部卸下，同樣可使用 Gnome 內建的「磁碟」軟體去做。選擇分去然後選擇分區左下角的類似停止播放音樂的「停止」按鈕就可以了。"}]},{"type":"element","tag":"h3","props":{"id":"使用指令"},"children":[{"type":"text","value":"使用指令"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"都確認好後，就可以打開終端機了。WoeUSB 沒有 GUI 界面，只能使用指令。使用方式很多種，這邊僅介紹最直觀的把整個 USB 製作成 Windows 安裝碟的指令："}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"sudo woeusb --device Windows7_x64.iso /dev/sdX\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" woeusb"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --device"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Windows7_x64.iso"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" /dev/sdX\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上面的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Windows7_x64.iso"}]},{"type":"text","value":"要置換成自己存放下載回來的 Windows 安裝檔（可以使用拖拉的方式從檔案拉進去終端機，終端機會直接讀取檔案的路徑。），"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/dev/sdX"}]},{"type":"text","value":"則要換成剛剛我們看到的 USB 裝置掛載的路徑。整個整理完大概會長這樣："}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"sudo woeusb --device '/home/{{someuser}}/下載/Win11_22H2_Chinese_Traditional_x64v1.iso' /dev/sda\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" woeusb"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" --device"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" '/home/{{someuser}}/下載/Win11_22H2_Chinese_Traditional_x64v1.iso'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" /dev/sda\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"執行並輸入管理者密碼後，若有錯誤就會自動停止，可能要看一下錯誤訊息來排解。若正確，會看類似這樣的訊息："}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"Info: Mounting source filesystem...\nInfo: Wiping all existing partition table and filesystem signatures in /dev/sda...\n/dev/sda: 8 bytes were erased at offset 0x00000200 (gpt): 45 46 49 20 50 41 52 54\n/dev/sda: 8 bytes were erased at offset 0x39c7ffe00 (gpt): 45 46 49 20 50 41 52 54\n/dev/sda: 2 bytes were erased at offset 0x000001fe (PMBR): 55 aa\n/dev/sda: calling ioctl to re-read partition table: 成功\nInfo: Ensure that /dev/sda is really wiped...\nInfo: Creating new partition table on /dev/sda...\nInfo: Creating target partition...\nInfo: Making system realize that partition table has changed...\nblockdev: ioctl error on BLKRRPART: 裝置或系統資源忙碌中\nInfo: Wait 3 seconds for block device nodes to populate...\nmkfs.fat 4.2 (2021-01-31)\nmkfs.fat: Warning: lowercase labels might not work properly on some systems\nInfo: Mounting target filesystem...\nInfo: Copying files from source media...\nSplitting WIM: 2100 MiB of 4499 MiB (46%) written, part 1 of 250%\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Info:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Mounting"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" source"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" filesystem...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Info:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Wiping"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" all"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" existing"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" partition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" table"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" and"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" filesystem"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" signatures"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" /dev/sda...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"/dev/sda:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 8"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" bytes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" were"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" erased"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" offset"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 0x00000200"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" (gpt): 45 46 49 20 50 41 52 54\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"/dev/sda:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 8"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" bytes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" were"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" erased"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" offset"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 0x39c7ffe00"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" (gpt): 45 46 49 20 50 41 52 54\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"/dev/sda:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" bytes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" were"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" erased"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" at"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" offset"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 0x000001fe"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" (PMBR): 55 aa\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"/dev/sda:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" calling"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" ioctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" to"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" re-read"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" partition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" table:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" 成功\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Info:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Ensure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" that"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" /dev/sda"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" is"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" really"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" wiped...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Info:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Creating"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" new"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" partition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" table"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" on"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" /dev/sda...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Info:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Creating"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" partition...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Info:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Making"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" system"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" realize"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" that"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" partition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" table"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" has"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" changed...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"blockdev:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" ioctl"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" error"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" on"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" BLKRRPART:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" 裝置或系統資源忙碌中\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Info:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Wait"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" seconds"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" block"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" device"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" nodes"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" to"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" populate...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"mkfs.fat"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 4.2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" (2021-01-31)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"mkfs.fat:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Warning:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" lowercase"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" labels"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" might"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" not"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" work"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" properly"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" on"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" some"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" systems\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Info:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Mounting"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" target"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" filesystem...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Info:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" Copying"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" files"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" source"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" media...\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"Splitting"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" WIM:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 2100"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" MiB"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" of"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":" 4499"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" MiB"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":" (46%) written, part 1 of 250%\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接下來就等它跑完囉！"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前置作業","depth":2,"text":"前置作業","children":[{"id":"下載-windows-iso-檔案","depth":3,"text":"下載 Windows ISO 檔案"},{"id":"準備-usb","depth":3,"text":"準備 USB"},{"id":"安裝-woeusb-套件","depth":3,"text":"安裝 WoeUSB 套件"}]},{"id":"使用-woeusb","depth":2,"text":"使用 WoeUSB","children":[{"id":"確認-usb-掛載路徑","depth":3,"text":"確認 USB 掛載路徑"},{"id":"卸載-usb","depth":3,"text":"卸載 USB"},{"id":"使用指令","depth":3,"text":"使用指令"}]}]}},"_type":"markdown","_id":"content:articles:2023:woeusb.md","_source":"content","_file":"articles/2023/woeusb.md","_extension":"md","createdAt":"2023-02-20T12:33:39.000Z","updatedAt":"2023-12-11T10:19:13.000Z","slug":"woeusb","plainTexts":["雖然脫離 Windows 很久，但有時候還是會需要幫朋友重灌電腦什麼的，所以就研究了一下如何在 Fedora 裡面製作 Windows 的安裝媒體。後來在網路上找到","WoeUSB","這個套件。","本篇會紀錄使用 WoeUSB 在 Fedora 中製作 Windows 安裝 USB 的過程。","前置作業","下載 Windows ISO 檔案","首先當然事先準備 Windows 的 ISO 檔案，從 Windows 10 之後，已經可以直接從","微軟官網","下載了，記得要從最下方的「下載 Windows 11 磁碟映像 (ISO)」下載。","準備 USB","準備一個 8GB 以上的 USB，就隨便拿一個吧，建議拿 USB 3.0 以上的。","安裝 WoeUSB 套件","sudo","dnf","install","WoeUSB","使用 WoeUSB","確認 USB 掛載路徑","首先要找出 USB 的掛載路徑，可以透過 Gnome 內建的「磁碟」軟體去看，如果顯示出來的是有數字的，把數字去掉後記起來。像我的 USB 顯示是","/dev/sda1","，就要記","/dev/sda","。使用 WoeUSB 指令時會用到。","卸載 USB","大部分的 USB 連接到 Fedora 之後，分割區都會被自動掛載。需要手動把這些被掛載的分割區全部卸下，同樣可使用 Gnome 內建的「磁碟」軟體去做。選擇分去然後選擇分區左下角的類似停止播放音樂的「停止」按鈕就可以了。","使用指令","都確認好後，就可以打開終端機了。WoeUSB 沒有 GUI 界面，只能使用指令。使用方式很多種，這邊僅介紹最直觀的把整個 USB 製作成 Windows 安裝碟的指令：","sudo","woeusb","--device","Windows7_x64.iso","/dev/sdX","上面的","Windows7_x64.iso","要置換成自己存放下載回來的 Windows 安裝檔（可以使用拖拉的方式從檔案拉進去終端機，終端機會直接讀取檔案的路徑。），","/dev/sdX","則要換成剛剛我們看到的 USB 裝置掛載的路徑。整個整理完大概會長這樣：","sudo","woeusb","--device","'/home/{{someuser}}/下載/Win11_22H2_Chinese_Traditional_x64v1.iso'","/dev/sda","執行並輸入管理者密碼後，若有錯誤就會自動停止，可能要看一下錯誤訊息來排解。若正確，會看類似這樣的訊息：","Info:","Mounting","source","filesystem...","Info:","Wiping","all","existing","partition","table","and","filesystem","signatures","in","/dev/sda...","/dev/sda:","8","bytes","were","erased","at","offset","0x00000200","(gpt): 45 46 49 20 50 41 52 54","/dev/sda:","8","bytes","were","erased","at","offset","0x39c7ffe00","(gpt): 45 46 49 20 50 41 52 54","/dev/sda:","2","bytes","were","erased","at","offset","0x000001fe","(PMBR): 55 aa","/dev/sda:","calling","ioctl","to","re-read","partition","table:","成功","Info:","Ensure","that","/dev/sda","is","really","wiped...","Info:","Creating","new","partition","table","on","/dev/sda...","Info:","Creating","target","partition...","Info:","Making","system","realize","that","partition","table","has","changed...","blockdev:","ioctl","error","on","BLKRRPART:","裝置或系統資源忙碌中","Info:","Wait","3","seconds","for","block","device","nodes","to","populate...","mkfs.fat","4.2","(2021-01-31)","mkfs.fat:","Warning:","lowercase","labels","might","not","work","properly","on","some","systems","Info:","Mounting","target","filesystem...","Info:","Copying","files","from","source","media...","Splitting","WIM:","2100","MiB","of","4499","MiB","(46%) written, part 1 of 250%","接下來就等它跑完囉！","html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"]}