{"_path":"/articles/2024/vue_stack_development_devcontainer","_dir":"2024","_draft":false,"_partial":false,"_locale":"","title":"使用VSCode搭配DevContainer容器化開發Vue專案","description":"在這個什麼都可以容器化的年代，開發也是可以容器化的。容器化的好處多多，其中自己覺得最重要的部份就是不再需要寫繁雜的設定步驟文件流傳後代（？），只要寫好 dockerfile，就能 1:1 重製開發環境。","img":"924/uCCnpK.jpg","tags":["docker","vscode","devcontainer"],"category":"frontend","readingTime":{"text":"4 min read","minutes":3.225,"time":193500,"words":645},"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在這個什麼都可以容器化的年代，開發也是可以容器化的。容器化的好處多多，其中自己覺得最重要的部份就是不再需要寫繁雜的設定步驟文件流傳後代（？），只要寫好 dockerfile，就能 1:1 重製開發環境。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這篇文章要紀錄的就是自己使用 VScode 搭配 DevContainer 來容器化開發的過程。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"若你平常用的系統跟我一樣是 Fedora 的話，可使用內建的 Podman 來取代 Docker 作為 DevContainer 的底層引擎，不過最後會需要稍微調整一下"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"devcontainer.json"}]},{"type":"text","value":"，這部份可以參考"},{"type":"element","tag":"article-inner-link","props":{"slug":"fedora_vscode_devcontainer_podman"},"children":[]},{"type":"text","value":"。"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在這個什麼都可以容器化的年代，開發也是可以容器化的。容器化的好處多多，其中自己覺得最重要的部份就是不再需要寫繁雜的設定步驟文件流傳後代（？），只要寫好 dockerfile，就能 1:1 重製開發環境。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這篇文章要紀錄的就是自己使用 VScode 搭配 DevContainer 來容器化開發的過程。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"若你平常用的系統跟我一樣是 Fedora 的話，可使用內建的 Podman 來取代 Docker 作為 DevContainer 的底層引擎，不過最後會需要稍微調整一下"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"devcontainer.json"}]},{"type":"text","value":"，這部份可以參考"},{"type":"element","tag":"article-inner-link","props":{"slug":"fedora_vscode_devcontainer_podman"},"children":[]},{"type":"text","value":"。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"前置準備"},"children":[{"type":"text","value":"前置準備"}]},{"type":"element","tag":"h3","props":{"id":"安裝-docker"},"children":[{"type":"text","value":"安裝 Docker"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"第一步當然是安裝容器引擎囉！關於 Docker 的安裝可以參閱"},{"type":"element","tag":"a","props":{"href":"https://docs.docker.com/engine/install/","rel":["nofollow"]},"children":[{"type":"text","value":"官方文件"}]},{"type":"text","value":"，若同是使用 Fedora 的朋友，可以參考我整理的簡單筆記："},{"type":"element","tag":"article-inner-link","props":{"slug":"fedora_docker_startup"},"children":[]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"安裝-devcontainer-擴充套件"},"children":[{"type":"text","value":"安裝 DevContainer 擴充套件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接著是安裝整合 VSCode 與 DevContainer 的擴充套件："},{"type":"element","tag":"a","props":{"href":"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers","rel":["nofollow"]},"children":[{"type":"text","value":"Dev Containers"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"設定-devcontainer"},"children":[{"type":"text","value":"設定 DevContainer"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這邊建議透過 VSCode 中 F1 的快速指令來新增設定檔，若要自行編寫 Dockerfile 最好也先以官方支援的映像檔為基礎。可以參考"},{"type":"element","tag":"a","props":{"href":"https://code.visualstudio.com/docs/devcontainers/tutorial#_get-the-sample","rel":["nofollow"]},"children":[{"type":"text","value":"Dev Containers tutorial"}]},{"type":"text","value":"。否則可能會遇到在容器內編輯檔案後，回到本機卻無法編輯的權限問題。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"建立好後，會看到專案多了一個"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".devcontainer"}]},{"type":"text","value":"資料夾，其中會有"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"devcontainer.json"}]},{"type":"text","value":"檔案："}]},{"type":"element","tag":"pre","props":{"className":"language-json shiki shiki-themes github-dark","code":"// For format details, see https://aka.ms/devcontainer.json. For config options, see the\n// README at: https://github.com/devcontainers/templates/tree/main/src/javascript-node\n{\n  \"name\": \"Node.js\",\n  // Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile\n  \"image\": \"mcr.microsoft.com/devcontainers/javascript-node:1-20-bookworm\"\n\n  // Features to add to the dev container. More info: https://containers.dev/features.\n  // \"features\": {},\n\n  // Use 'forwardPorts' to make a list of ports inside the container available locally.\n  // \"forwardPorts\": [],\n\n  // Use 'postCreateCommand' to run commands after the container is created.\n  // \"postCreateCommand\": \"yarn install\",\n\n  // Configure tool-specific properties.\n  // \"customizations\": {},\n\n  // Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.\n  // \"remoteUser\": \"root\"\n}\n","filename":"devcontainer.json","language":"json","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// For format details, see https://aka.ms/devcontainer.json. For config options, see the\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"// README at: https://github.com/devcontainers/templates/tree/main/src/javascript-node\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"  \"name\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"\"Node.js\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"  \"image\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"\"mcr.microsoft.com/devcontainers/javascript-node:1-20-bookworm\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Features to add to the dev container. More info: https://containers.dev/features.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // \"features\": {},\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Use 'forwardPorts' to make a list of ports inside the container available locally.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // \"forwardPorts\": [],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Use 'postCreateCommand' to run commands after the container is created.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // \"postCreateCommand\": \"yarn install\",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Configure tool-specific properties.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // \"customizations\": {},\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // \"remoteUser\": \"root\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"詳細設定的參考文件，官方都幫你寫在註解了，可以點網址進去查看，下面補充幾個自己會做的設定。"}]},{"type":"element","tag":"pre","props":{"className":"language-json shiki shiki-themes github-dark","code":"{\n  // 安裝node依賴項\n  \"postCreateCommand\": \"npm install\",\n  \"customizations\": {\n    // 可以指定一些vscode專用的設定\n    \"vscode\": {\n      // VScode的設定值\n      \"settings\": {},\n      // 新增要安裝在容器內的VSCode擴充套件，像是格式化之類的工具。\n      \"extensions\": [\n        \"esbenp.prettier-vscode\",\n        \"donjayamanne.githistory\",\n        \"Vue.volar\",\n        \"dbaeumer.vscode-eslint\"\n      ]\n    }\n  }\n}\n","filename":"devcontainer.json","language":"json","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"  // 安裝node依賴項\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"  \"postCreateCommand\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"\"npm install\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"  \"customizations\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"    // 可以指定一些vscode專用的設定\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"    \"vscode\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"      // VScode的設定值\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"      \"settings\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": {},\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"      // 新增要安裝在容器內的VSCode擴充套件，像是格式化之類的工具。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"      \"extensions\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"        \"esbenp.prettier-vscode\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"        \"donjayamanne.githistory\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"        \"Vue.volar\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"        \"dbaeumer.vscode-eslint\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"      ]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"    }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"錯誤處理"},"children":[{"type":"text","value":"錯誤處理"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果你像我一樣在 DevContainer 中開發 Nuxt 網站時遇到"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ERR_CONTENT_LENGTH_MISMATCH"}]},{"type":"text","value":"問題，可以在"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":"中的"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"dev"}]},{"type":"text","value":"指令加上"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--no-fork"}]},{"type":"text","value":"參數。不過研究"},{"type":"element","tag":"a","props":{"href":"https://github.com/nuxt/cli/issues/181","rel":["nofollow"]},"children":[{"type":"text","value":"官方 Gihub 的 Issue"}]},{"type":"text","value":"我也不知道是什麼原因，然後也不知道為什麼加這個參數可以解決就是了……。"}]},{"type":"element","tag":"pre","props":{"className":"language-json shiki shiki-themes github-dark","code":"{\n  \"scripts\": {\n    \"dev\": \"nuxt dev --no-fork\"\n  }\n}\n","filename":"package.json","language":"json","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"{\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"  \"scripts\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"    \"dev\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"\"nuxt dev --no-fork\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"參考文獻"},"children":[{"type":"text","value":"參考文獻"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://code.visualstudio.com/docs/devcontainers/containers","rel":["nofollow"]},"children":[{"type":"text","value":"Developing inside a Container"}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"前置準備","depth":2,"text":"前置準備","children":[{"id":"安裝-docker","depth":3,"text":"安裝 Docker"},{"id":"安裝-devcontainer-擴充套件","depth":3,"text":"安裝 DevContainer 擴充套件"}]},{"id":"設定-devcontainer","depth":2,"text":"設定 DevContainer"},{"id":"錯誤處理","depth":2,"text":"錯誤處理"},{"id":"參考文獻","depth":2,"text":"參考文獻"}]}},"_type":"markdown","_id":"content:articles:2024:vue_stack_development_devcontainer.md","_source":"content","_file":"articles/2024/vue_stack_development_devcontainer.md","_stem":"articles/2024/vue_stack_development_devcontainer","_extension":"md","createdAt":"2024-06-02T12:48:40.000Z","updatedAt":"2024-11-03T03:26:44.000Z","slug":"vue_stack_development_devcontainer"}