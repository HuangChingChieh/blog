{"_path":"/articles/2023/mobile_chrome_sticky_bottom","_dir":"2023","_draft":false,"_partial":false,"_locale":"","title":"解決底部Sticky元素在Android Chrome滾動時渲染位置錯誤的問題","description":"如果不是複雜的需求，對於在元素流中有滾動後要固定的元素，像是頂部 header 滾動後要固定或底部 footer 在滾動前要固定，我都會偏好用position: sticky這個方式去處理，簡單粗暴，不像position: fixed那樣要去計算高度來給其他元素 padding 以防遮住主要內容，或是滾動後要用 JS 去偵測來修改，瀏覽器會幫你做好運算。","img":"922/iRFPQu.jpg","tags":["css","html","android","chrome"],"category":"frontend","readingTime":{"text":"2 min read","minutes":1.685,"time":101100,"words":337},"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果不是複雜的需求，對於在元素流中有滾動後要固定的元素，像是頂部 header 滾動後要固定或底部 footer 在滾動前要固定，我都會偏好用"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"position: sticky"}]},{"type":"text","value":"這個方式去處理，簡單粗暴，不像"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"position: fixed"}]},{"type":"text","value":"那樣要去計算高度來給其他元素 padding 以防遮住主要內容，或是滾動後要用 JS 去偵測來修改，瀏覽器會幫你做好運算。"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果不是複雜的需求，對於在元素流中有滾動後要固定的元素，像是頂部 header 滾動後要固定或底部 footer 在滾動前要固定，我都會偏好用"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"position: sticky"}]},{"type":"text","value":"這個方式去處理，簡單粗暴，不像"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"position: fixed"}]},{"type":"text","value":"那樣要去計算高度來給其他元素 padding 以防遮住主要內容，或是滾動後要用 JS 去偵測來修改，瀏覽器會幫你做好運算。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"把元素 sticky 在頂部似乎沒啥問題，但 sticky 到底部時就在 Android 的 Chrome 遇到問題了（Firefox 不會）。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"問題"},"children":[{"type":"text","value":"問題"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Chrome 上面的網址列在往下滾動會隱藏，這時底部的 Sticky 元素會往上跳一個距離；而在往上滾動時，Chrome 網址列又會出現，這時底部的 Sticky 元素又會回到原本正確的位置。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"解決方式"},"children":[{"type":"text","value":"解決方式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上網嘗試了一些方式後都沒有解決，後來查到這篇文章"},{"type":"element","tag":"a","props":{"href":"https://www.stevefenton.co.uk/blog/2022/12/mobile-position-sticky-issue/","rel":["nofollow"]},"children":[{"type":"text","value":"Mobile browser bars being hidden can affect CSS position sticky bottom"}]},{"type":"text","value":"，發現他用了一個非常輕巧的方式解決。只要加一條"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"position: fixed"}]},{"type":"text","value":"的元素："}]},{"type":"element","tag":"pre","props":{"className":"language-html shiki shiki-themes github-dark","code":"<div style=\"position: fixed;\"></div>\n","language":"html","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#85E89D"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":" style"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"\"position: fixed;\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":"></"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#85E89D"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E1E4E8"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"沒錯，就是這樣而已，我感到各種驚訝。只是這種 HACK 般的處理，讓我覺得這或許比較像是 BUG，但這問題存在許久，也不知道 Google 那邊是否會修改就是了。"}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"問題","depth":2,"text":"問題"},{"id":"解決方式","depth":2,"text":"解決方式"}]}},"_type":"markdown","_id":"content:articles:2023:mobile_chrome_sticky_bottom.md","_source":"content","_file":"articles/2023/mobile_chrome_sticky_bottom.md","_stem":"articles/2023/mobile_chrome_sticky_bottom","_extension":"md","createdAt":"2023-07-14T07:26:50.000Z","updatedAt":"2023-12-11T03:54:57.000Z","slug":"mobile_chrome_sticky_bottom"}