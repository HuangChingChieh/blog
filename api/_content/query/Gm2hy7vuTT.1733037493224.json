{"_path":"/articles/2023/fedora_zram_resize","_dir":"2023","_draft":false,"_partial":false,"_locale":"","title":"調整Fedora中的ZRAM大小","description":"這篇是在 Fedora 環境中編譯 LineageOS時，嘗試複製在 Ubuntu 中可透過增加 SWAP 來補足記憶體不足的作法。後來發現即便把 ZRAM 增大也會編譯失敗，就很乾脆擴充實體 RAM，本篇就當個紀錄這樣。","img":"924/Rj6CAF.jpg","tags":["fedora","zram"],"category":"linux","readingTime":{"text":"2 min read","minutes":1.23,"time":73800,"words":246},"excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這篇是"},{"type":"element","tag":"article-inner-link","props":{"slug":"fedora_lineageos_sargo"},"children":[{"type":"text","value":"在 Fedora 環境中編譯 LineageOS"}]},{"type":"text","value":"時，嘗試複製在 Ubuntu 中可透過增加 SWAP 來補足記憶體不足的作法。後來發現即便把 ZRAM 增大也會編譯失敗，就很乾脆擴充實體 RAM，本篇就當個紀錄這樣。"}]}]},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這篇是"},{"type":"element","tag":"article-inner-link","props":{"slug":"fedora_lineageos_sargo"},"children":[{"type":"text","value":"在 Fedora 環境中編譯 LineageOS"}]},{"type":"text","value":"時，嘗試複製在 Ubuntu 中可透過增加 SWAP 來補足記憶體不足的作法。後來發現即便把 ZRAM 增大也會編譯失敗，就很乾脆擴充實體 RAM，本篇就當個紀錄這樣。"}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"# 首先檢查一下目前的ZRAM大小\nswapon\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"# 首先檢查一下目前的ZRAM大小\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"swapon\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"# 會看到這樣子的輸出，可以看到SIZE是8GB。\nNAME       TYPE      SIZE  USED PRIO\n/dev/zram0 partition   8G 15.8M  100\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"# 會看到這樣子的輸出，可以看到SIZE是8GB。\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"NAME"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"       TYPE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"      SIZE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"  USED"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" PRIO\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"/dev/zram0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" partition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"   8G"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" 15.8M"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"  100\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"# 透過管理權限使用文字編輯器開啟設定檔\nsudo gedit /usr/lib/systemd/zram-generator.conf\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"# 透過管理權限使用文字編輯器開啟設定檔\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"sudo"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" gedit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" /usr/lib/systemd/zram-generator.conf\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"開啟這個檔案後，會看到如下的設定："}]},{"type":"element","tag":"pre","props":{"className":"language-ini shiki shiki-themes github-dark","code":"# This config file enables a /dev/zram0 device with the default settings:\n# — size — same as available RAM or 8GB, whichever is less\n# — compression — most likely lzo-rle\n#\n# To disable, uninstall zram-generator-defaults or create empty\n# /etc/systemd/zram-generator.conf file.\n[zram0]\nzram-size = min(ram, 8192)\n","filename":"zram-generator.conf","language":"ini","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# This config file enables a /dev/zram0 device with the default settings:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# — size — same as available RAM or 8GB, whichever is less\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# — compression — most likely lzo-rle\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"#\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# To disable, uninstall zram-generator-defaults or create empty\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"# /etc/systemd/zram-generator.conf file.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"[zram0]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"zram-size = min(ram, 8192)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"把"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"min(ram, 8192)"}]},{"type":"text","value":"改為 16384(16GB)就可以了，改完存檔後重啟。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"# 檢查一下調整後的大小\nswapon\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"# 檢查一下調整後的大小\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"swapon\n"}]}]}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-dark","code":"# SIZE變成16GB就對囉\nNAME       TYPE      SIZE USED PRIO\n/dev/zram0 partition  16G   0B  100\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D"},"children":[{"type":"text","value":"# SIZE變成16GB就對囉\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"NAME"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"       TYPE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"      SIZE"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" USED"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" PRIO\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#B392F0"},"children":[{"type":"text","value":"/dev/zram0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":" partition"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"  16G"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9ECBFF"},"children":[{"type":"text","value":"   0B"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#79B8FF"},"children":[{"type":"text","value":"  100\n"}]}]}]}]},{"type":"element","tag":"hr","props":{},"children":[]},{"type":"element","tag":"h2","props":{"id":"參考文獻"},"children":[{"type":"text","value":"參考文獻"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/systemd/zram-generator","rel":["nofollow"]},"children":[{"type":"text","value":"zram-generator"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/systemd/zram-generator/blob/main/zram-generator.conf.example","rel":["nofollow"]},"children":[{"type":"text","value":"zram-generator.conf.example"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://fedoraproject.org/wiki/Changes/Scale_ZRAM_to_full_memory_size","rel":["nofollow"]},"children":[{"type":"text","value":"Changes/Scale ZRAM to full memory size"}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"參考文獻","depth":2,"text":"參考文獻"}]}},"_type":"markdown","_id":"content:articles:2023:fedora_zram_resize.md","_source":"content","_file":"articles/2023/fedora_zram_resize.md","_stem":"articles/2023/fedora_zram_resize","_extension":"md","createdAt":"2023-04-08T08:01:46.000Z","updatedAt":"2024-01-24T07:26:04.000Z","slug":"fedora_zram_resize"}