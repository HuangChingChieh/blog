[{"data":1,"prerenderedAt":1588},["ShallowReactive",2],{"nuxt2_to_nuxt3_blog_2_settings":3,"Related_nuxt2_to_nuxt3_blog_2_settings":1552,"title|nuxt2_to_nuxt3_blog_1_ui":1554,"title|mobile_chrome_sticky_bottom":1587},{"title":4,"description":5,"img":6,"readingTime":7,"createdAt":12,"updatedAt":12,"slug":13,"tags":14,"category":20,"body":21},"部落格Nuxt 2升級Nuxt 3（二）：基本架構與設定值","在抽換 UI 框架之後，接下來就開始真正的升級之旅了。參考官方的升級指南，第一步就是先修改設定值。","924/Ia2nWi.png",{"text":8,"minutes":9,"time":10,"words":11},"4 min read",3.835,230100,767,"2024-01-24T07:26:04.000Z","nuxt2_to_nuxt3_blog_2_settings",[15,16,17,18,19],"blog","nuxt","vue","nuxt2","nuxt3","frontend",{"type":22,"children":23,"toc":1542},"root",[24,52,56,62,76,82,96,805,811,848,969,972,978,999,1005,1018,1295,1300,1342,1536],{"type":25,"tag":26,"props":27,"children":28},"element","p",{},[29,32,39,41,50],{"type":30,"value":31},"text","在",{"type":25,"tag":33,"props":34,"children":36},"article-inner-link",{"slug":35},"nuxt2_to_nuxt3_blog_1_ui",[37],{"type":30,"value":38},"抽換 UI 框架",{"type":30,"value":40},"之後，接下來就開始真正的升級之旅了。參考",{"type":25,"tag":42,"props":43,"children":47},"a",{"href":44,"rel":45},"https://nuxt.com/docs/migration/overview",[46],"nofollow",[48],{"type":30,"value":49},"官方的升級指南",{"type":30,"value":51},"，第一步就是先修改設定值。",{"type":25,"tag":53,"props":54,"children":55},"hr",{},[],{"type":25,"tag":57,"props":58,"children":60},"h2",{"id":59},"非模組的設定值",[61],{"type":30,"value":59},{"type":25,"tag":26,"props":63,"children":64},{},[65,67,74],{"type":30,"value":66},"那麼，首先從原本的",{"type":25,"tag":68,"props":69,"children":71},"code",{"className":70},[],[72],{"type":30,"value":73},"nuxt.config.js",{"type":30,"value":75},"中轉移非模組的設定值。",{"type":25,"tag":77,"props":78,"children":80},"h3",{"id":79},"基本設定",[81],{"type":30,"value":79},{"type":25,"tag":26,"props":83,"children":84},{},[85,87,94],{"type":30,"value":86},"網站用到的基本設定值不多，變動也不大，就一起整理在這邊。雖然官方有 ",{"type":25,"tag":42,"props":88,"children":91},{"href":89,"rel":90},"https://nuxt.com/docs/getting-started/upgrade#nuxt-2-to-nuxt-3",[46],[92],{"type":30,"value":93},"Upgrade Guide",{"type":30,"value":95}," 可以看，但有些設定值沒有提到，我最終還是打開兩個版本的文件自己去對應起來。",{"type":25,"tag":97,"props":98,"children":103},"pre",{"className":99,"code":100,"language":101,"meta":102,"style":102},"language-js shiki shiki-themes github-dark","export default defineNuxtConfig({\n  /* Nuxt 3 只要直接使用generate指令就可以了，不用指定target。 */\n  // target: 'static',\n\n  /* Nuxt 3 若使用Vite預設就是modern build，不須額外指定。 */\n  // modern: 'client',\n\n  /* Nuxt 3 預設會自動解析components/資料夾下的元件 */\n  // components: true,\n\n  /* publicRuntimeConfig要改用runtimeConfig.public */\n  //   publicRuntimeConfig: {},\n  runtimeConfig: {\n    public: {},\n  },\n\n  /* router.base要改成app.baseURL */\n  //   router: {\n  //     base,\n  //   },\n  app: {\n    baseURL,\n  },\n\n  /* 原本的static可以選擇改名成public或是於設定值中指定，這邊保留資料夾名稱並設定。 */\n  dir: {\n    public: 'static',\n  },\n\n  /* global css直接平移即可 */\n  css: [\n    // SCSS file in the project\n    '~/assets/css/main.scss',\n  ],\n\n  /* 原本的style-resources模組可透過vite內建功能完成 */\n  // styleResources: {\n  //   // your settings here\n  //   scss: ['~/assets/css/custom.scss'],\n  //   // hoistUseStatements: true  // Hoists the \"@use\" imports. Applies only to \"sass\", \"scss\" and \"less\". Default: false.\n  // },\n  vite: {\n    css: {\n      preprocessorOptions: {\n        scss: {\n          additionalData(source: string, fp: string) {\n            // 由於這個設定值也會影響編譯scss檔案，需要排除。\n            return fp.endsWith('scss')\n              ? source\n              : `@import \"~/assets/css/custom.module.scss\"; ${source}`\n          },\n        },\n      },\n    },\n  },\n\n  /* 原本Webpack中的extractCSS對應的設定是將features.inlineStyles設為false */\n  // build: {\n  //   extractCSS: true,\n  // },\n  features: {\n    inlineStyles: false,\n  },\n})\n","js","",[104],{"type":25,"tag":68,"props":105,"children":106},{"__ignoreMap":102},[107,136,146,155,165,174,183,191,200,209,217,226,235,244,253,262,270,279,288,297,306,315,324,332,340,349,358,378,386,394,403,412,421,434,443,451,460,469,478,487,496,505,514,523,532,541,595,604,637,651,674,683,692,701,710,718,726,735,744,753,761,770,788,796],{"type":25,"tag":108,"props":109,"children":112},"span",{"class":110,"line":111},"line",1,[113,119,124,130],{"type":25,"tag":108,"props":114,"children":116},{"style":115},"--shiki-default:#F97583",[117],{"type":30,"value":118},"export",{"type":25,"tag":108,"props":120,"children":121},{"style":115},[122],{"type":30,"value":123}," default",{"type":25,"tag":108,"props":125,"children":127},{"style":126},"--shiki-default:#B392F0",[128],{"type":30,"value":129}," defineNuxtConfig",{"type":25,"tag":108,"props":131,"children":133},{"style":132},"--shiki-default:#E1E4E8",[134],{"type":30,"value":135},"({\n",{"type":25,"tag":108,"props":137,"children":139},{"class":110,"line":138},2,[140],{"type":25,"tag":108,"props":141,"children":143},{"style":142},"--shiki-default:#6A737D",[144],{"type":30,"value":145},"  /* Nuxt 3 只要直接使用generate指令就可以了，不用指定target。 */\n",{"type":25,"tag":108,"props":147,"children":149},{"class":110,"line":148},3,[150],{"type":25,"tag":108,"props":151,"children":152},{"style":142},[153],{"type":30,"value":154},"  // target: 'static',\n",{"type":25,"tag":108,"props":156,"children":158},{"class":110,"line":157},4,[159],{"type":25,"tag":108,"props":160,"children":162},{"emptyLinePlaceholder":161},true,[163],{"type":30,"value":164},"\n",{"type":25,"tag":108,"props":166,"children":168},{"class":110,"line":167},5,[169],{"type":25,"tag":108,"props":170,"children":171},{"style":142},[172],{"type":30,"value":173},"  /* Nuxt 3 若使用Vite預設就是modern build，不須額外指定。 */\n",{"type":25,"tag":108,"props":175,"children":177},{"class":110,"line":176},6,[178],{"type":25,"tag":108,"props":179,"children":180},{"style":142},[181],{"type":30,"value":182},"  // modern: 'client',\n",{"type":25,"tag":108,"props":184,"children":186},{"class":110,"line":185},7,[187],{"type":25,"tag":108,"props":188,"children":189},{"emptyLinePlaceholder":161},[190],{"type":30,"value":164},{"type":25,"tag":108,"props":192,"children":194},{"class":110,"line":193},8,[195],{"type":25,"tag":108,"props":196,"children":197},{"style":142},[198],{"type":30,"value":199},"  /* Nuxt 3 預設會自動解析components/資料夾下的元件 */\n",{"type":25,"tag":108,"props":201,"children":203},{"class":110,"line":202},9,[204],{"type":25,"tag":108,"props":205,"children":206},{"style":142},[207],{"type":30,"value":208},"  // components: true,\n",{"type":25,"tag":108,"props":210,"children":212},{"class":110,"line":211},10,[213],{"type":25,"tag":108,"props":214,"children":215},{"emptyLinePlaceholder":161},[216],{"type":30,"value":164},{"type":25,"tag":108,"props":218,"children":220},{"class":110,"line":219},11,[221],{"type":25,"tag":108,"props":222,"children":223},{"style":142},[224],{"type":30,"value":225},"  /* publicRuntimeConfig要改用runtimeConfig.public */\n",{"type":25,"tag":108,"props":227,"children":229},{"class":110,"line":228},12,[230],{"type":25,"tag":108,"props":231,"children":232},{"style":142},[233],{"type":30,"value":234},"  //   publicRuntimeConfig: {},\n",{"type":25,"tag":108,"props":236,"children":238},{"class":110,"line":237},13,[239],{"type":25,"tag":108,"props":240,"children":241},{"style":132},[242],{"type":30,"value":243},"  runtimeConfig: {\n",{"type":25,"tag":108,"props":245,"children":247},{"class":110,"line":246},14,[248],{"type":25,"tag":108,"props":249,"children":250},{"style":132},[251],{"type":30,"value":252},"    public: {},\n",{"type":25,"tag":108,"props":254,"children":256},{"class":110,"line":255},15,[257],{"type":25,"tag":108,"props":258,"children":259},{"style":132},[260],{"type":30,"value":261},"  },\n",{"type":25,"tag":108,"props":263,"children":265},{"class":110,"line":264},16,[266],{"type":25,"tag":108,"props":267,"children":268},{"emptyLinePlaceholder":161},[269],{"type":30,"value":164},{"type":25,"tag":108,"props":271,"children":273},{"class":110,"line":272},17,[274],{"type":25,"tag":108,"props":275,"children":276},{"style":142},[277],{"type":30,"value":278},"  /* router.base要改成app.baseURL */\n",{"type":25,"tag":108,"props":280,"children":282},{"class":110,"line":281},18,[283],{"type":25,"tag":108,"props":284,"children":285},{"style":142},[286],{"type":30,"value":287},"  //   router: {\n",{"type":25,"tag":108,"props":289,"children":291},{"class":110,"line":290},19,[292],{"type":25,"tag":108,"props":293,"children":294},{"style":142},[295],{"type":30,"value":296},"  //     base,\n",{"type":25,"tag":108,"props":298,"children":300},{"class":110,"line":299},20,[301],{"type":25,"tag":108,"props":302,"children":303},{"style":142},[304],{"type":30,"value":305},"  //   },\n",{"type":25,"tag":108,"props":307,"children":309},{"class":110,"line":308},21,[310],{"type":25,"tag":108,"props":311,"children":312},{"style":132},[313],{"type":30,"value":314},"  app: {\n",{"type":25,"tag":108,"props":316,"children":318},{"class":110,"line":317},22,[319],{"type":25,"tag":108,"props":320,"children":321},{"style":132},[322],{"type":30,"value":323},"    baseURL,\n",{"type":25,"tag":108,"props":325,"children":327},{"class":110,"line":326},23,[328],{"type":25,"tag":108,"props":329,"children":330},{"style":132},[331],{"type":30,"value":261},{"type":25,"tag":108,"props":333,"children":335},{"class":110,"line":334},24,[336],{"type":25,"tag":108,"props":337,"children":338},{"emptyLinePlaceholder":161},[339],{"type":30,"value":164},{"type":25,"tag":108,"props":341,"children":343},{"class":110,"line":342},25,[344],{"type":25,"tag":108,"props":345,"children":346},{"style":142},[347],{"type":30,"value":348},"  /* 原本的static可以選擇改名成public或是於設定值中指定，這邊保留資料夾名稱並設定。 */\n",{"type":25,"tag":108,"props":350,"children":352},{"class":110,"line":351},26,[353],{"type":25,"tag":108,"props":354,"children":355},{"style":132},[356],{"type":30,"value":357},"  dir: {\n",{"type":25,"tag":108,"props":359,"children":361},{"class":110,"line":360},27,[362,367,373],{"type":25,"tag":108,"props":363,"children":364},{"style":132},[365],{"type":30,"value":366},"    public: ",{"type":25,"tag":108,"props":368,"children":370},{"style":369},"--shiki-default:#9ECBFF",[371],{"type":30,"value":372},"'static'",{"type":25,"tag":108,"props":374,"children":375},{"style":132},[376],{"type":30,"value":377},",\n",{"type":25,"tag":108,"props":379,"children":381},{"class":110,"line":380},28,[382],{"type":25,"tag":108,"props":383,"children":384},{"style":132},[385],{"type":30,"value":261},{"type":25,"tag":108,"props":387,"children":389},{"class":110,"line":388},29,[390],{"type":25,"tag":108,"props":391,"children":392},{"emptyLinePlaceholder":161},[393],{"type":30,"value":164},{"type":25,"tag":108,"props":395,"children":397},{"class":110,"line":396},30,[398],{"type":25,"tag":108,"props":399,"children":400},{"style":142},[401],{"type":30,"value":402},"  /* global css直接平移即可 */\n",{"type":25,"tag":108,"props":404,"children":406},{"class":110,"line":405},31,[407],{"type":25,"tag":108,"props":408,"children":409},{"style":132},[410],{"type":30,"value":411},"  css: [\n",{"type":25,"tag":108,"props":413,"children":415},{"class":110,"line":414},32,[416],{"type":25,"tag":108,"props":417,"children":418},{"style":142},[419],{"type":30,"value":420},"    // SCSS file in the project\n",{"type":25,"tag":108,"props":422,"children":424},{"class":110,"line":423},33,[425,430],{"type":25,"tag":108,"props":426,"children":427},{"style":369},[428],{"type":30,"value":429},"    '~/assets/css/main.scss'",{"type":25,"tag":108,"props":431,"children":432},{"style":132},[433],{"type":30,"value":377},{"type":25,"tag":108,"props":435,"children":437},{"class":110,"line":436},34,[438],{"type":25,"tag":108,"props":439,"children":440},{"style":132},[441],{"type":30,"value":442},"  ],\n",{"type":25,"tag":108,"props":444,"children":446},{"class":110,"line":445},35,[447],{"type":25,"tag":108,"props":448,"children":449},{"emptyLinePlaceholder":161},[450],{"type":30,"value":164},{"type":25,"tag":108,"props":452,"children":454},{"class":110,"line":453},36,[455],{"type":25,"tag":108,"props":456,"children":457},{"style":142},[458],{"type":30,"value":459},"  /* 原本的style-resources模組可透過vite內建功能完成 */\n",{"type":25,"tag":108,"props":461,"children":463},{"class":110,"line":462},37,[464],{"type":25,"tag":108,"props":465,"children":466},{"style":142},[467],{"type":30,"value":468},"  // styleResources: {\n",{"type":25,"tag":108,"props":470,"children":472},{"class":110,"line":471},38,[473],{"type":25,"tag":108,"props":474,"children":475},{"style":142},[476],{"type":30,"value":477},"  //   // your settings here\n",{"type":25,"tag":108,"props":479,"children":481},{"class":110,"line":480},39,[482],{"type":25,"tag":108,"props":483,"children":484},{"style":142},[485],{"type":30,"value":486},"  //   scss: ['~/assets/css/custom.scss'],\n",{"type":25,"tag":108,"props":488,"children":490},{"class":110,"line":489},40,[491],{"type":25,"tag":108,"props":492,"children":493},{"style":142},[494],{"type":30,"value":495},"  //   // hoistUseStatements: true  // Hoists the \"@use\" imports. Applies only to \"sass\", \"scss\" and \"less\". Default: false.\n",{"type":25,"tag":108,"props":497,"children":499},{"class":110,"line":498},41,[500],{"type":25,"tag":108,"props":501,"children":502},{"style":142},[503],{"type":30,"value":504},"  // },\n",{"type":25,"tag":108,"props":506,"children":508},{"class":110,"line":507},42,[509],{"type":25,"tag":108,"props":510,"children":511},{"style":132},[512],{"type":30,"value":513},"  vite: {\n",{"type":25,"tag":108,"props":515,"children":517},{"class":110,"line":516},43,[518],{"type":25,"tag":108,"props":519,"children":520},{"style":132},[521],{"type":30,"value":522},"    css: {\n",{"type":25,"tag":108,"props":524,"children":526},{"class":110,"line":525},44,[527],{"type":25,"tag":108,"props":528,"children":529},{"style":132},[530],{"type":30,"value":531},"      preprocessorOptions: {\n",{"type":25,"tag":108,"props":533,"children":535},{"class":110,"line":534},45,[536],{"type":25,"tag":108,"props":537,"children":538},{"style":132},[539],{"type":30,"value":540},"        scss: {\n",{"type":25,"tag":108,"props":542,"children":544},{"class":110,"line":543},46,[545,550,555,561,566,572,577,582,586,590],{"type":25,"tag":108,"props":546,"children":547},{"style":126},[548],{"type":30,"value":549},"          additionalData",{"type":25,"tag":108,"props":551,"children":552},{"style":132},[553],{"type":30,"value":554},"(",{"type":25,"tag":108,"props":556,"children":558},{"style":557},"--shiki-default:#FFAB70",[559],{"type":30,"value":560},"source",{"type":25,"tag":108,"props":562,"children":563},{"style":115},[564],{"type":30,"value":565},":",{"type":25,"tag":108,"props":567,"children":569},{"style":568},"--shiki-default:#79B8FF",[570],{"type":30,"value":571}," string",{"type":25,"tag":108,"props":573,"children":574},{"style":132},[575],{"type":30,"value":576},", ",{"type":25,"tag":108,"props":578,"children":579},{"style":557},[580],{"type":30,"value":581},"fp",{"type":25,"tag":108,"props":583,"children":584},{"style":115},[585],{"type":30,"value":565},{"type":25,"tag":108,"props":587,"children":588},{"style":568},[589],{"type":30,"value":571},{"type":25,"tag":108,"props":591,"children":592},{"style":132},[593],{"type":30,"value":594},") {\n",{"type":25,"tag":108,"props":596,"children":598},{"class":110,"line":597},47,[599],{"type":25,"tag":108,"props":600,"children":601},{"style":142},[602],{"type":30,"value":603},"            // 由於這個設定值也會影響編譯scss檔案，需要排除。\n",{"type":25,"tag":108,"props":605,"children":607},{"class":110,"line":606},48,[608,613,618,623,627,632],{"type":25,"tag":108,"props":609,"children":610},{"style":115},[611],{"type":30,"value":612},"            return",{"type":25,"tag":108,"props":614,"children":615},{"style":132},[616],{"type":30,"value":617}," fp.",{"type":25,"tag":108,"props":619,"children":620},{"style":126},[621],{"type":30,"value":622},"endsWith",{"type":25,"tag":108,"props":624,"children":625},{"style":132},[626],{"type":30,"value":554},{"type":25,"tag":108,"props":628,"children":629},{"style":369},[630],{"type":30,"value":631},"'scss'",{"type":25,"tag":108,"props":633,"children":634},{"style":132},[635],{"type":30,"value":636},")\n",{"type":25,"tag":108,"props":638,"children":640},{"class":110,"line":639},49,[641,646],{"type":25,"tag":108,"props":642,"children":643},{"style":115},[644],{"type":30,"value":645},"              ?",{"type":25,"tag":108,"props":647,"children":648},{"style":132},[649],{"type":30,"value":650}," source\n",{"type":25,"tag":108,"props":652,"children":654},{"class":110,"line":653},50,[655,660,665,669],{"type":25,"tag":108,"props":656,"children":657},{"style":115},[658],{"type":30,"value":659},"              :",{"type":25,"tag":108,"props":661,"children":662},{"style":369},[663],{"type":30,"value":664}," `@import \"~/assets/css/custom.module.scss\"; ${",{"type":25,"tag":108,"props":666,"children":667},{"style":132},[668],{"type":30,"value":560},{"type":25,"tag":108,"props":670,"children":671},{"style":369},[672],{"type":30,"value":673},"}`\n",{"type":25,"tag":108,"props":675,"children":677},{"class":110,"line":676},51,[678],{"type":25,"tag":108,"props":679,"children":680},{"style":132},[681],{"type":30,"value":682},"          },\n",{"type":25,"tag":108,"props":684,"children":686},{"class":110,"line":685},52,[687],{"type":25,"tag":108,"props":688,"children":689},{"style":132},[690],{"type":30,"value":691},"        },\n",{"type":25,"tag":108,"props":693,"children":695},{"class":110,"line":694},53,[696],{"type":25,"tag":108,"props":697,"children":698},{"style":132},[699],{"type":30,"value":700},"      },\n",{"type":25,"tag":108,"props":702,"children":704},{"class":110,"line":703},54,[705],{"type":25,"tag":108,"props":706,"children":707},{"style":132},[708],{"type":30,"value":709},"    },\n",{"type":25,"tag":108,"props":711,"children":713},{"class":110,"line":712},55,[714],{"type":25,"tag":108,"props":715,"children":716},{"style":132},[717],{"type":30,"value":261},{"type":25,"tag":108,"props":719,"children":721},{"class":110,"line":720},56,[722],{"type":25,"tag":108,"props":723,"children":724},{"emptyLinePlaceholder":161},[725],{"type":30,"value":164},{"type":25,"tag":108,"props":727,"children":729},{"class":110,"line":728},57,[730],{"type":25,"tag":108,"props":731,"children":732},{"style":142},[733],{"type":30,"value":734},"  /* 原本Webpack中的extractCSS對應的設定是將features.inlineStyles設為false */\n",{"type":25,"tag":108,"props":736,"children":738},{"class":110,"line":737},58,[739],{"type":25,"tag":108,"props":740,"children":741},{"style":142},[742],{"type":30,"value":743},"  // build: {\n",{"type":25,"tag":108,"props":745,"children":747},{"class":110,"line":746},59,[748],{"type":25,"tag":108,"props":749,"children":750},{"style":142},[751],{"type":30,"value":752},"  //   extractCSS: true,\n",{"type":25,"tag":108,"props":754,"children":756},{"class":110,"line":755},60,[757],{"type":25,"tag":108,"props":758,"children":759},{"style":142},[760],{"type":30,"value":504},{"type":25,"tag":108,"props":762,"children":764},{"class":110,"line":763},61,[765],{"type":25,"tag":108,"props":766,"children":767},{"style":132},[768],{"type":30,"value":769},"  features: {\n",{"type":25,"tag":108,"props":771,"children":773},{"class":110,"line":772},62,[774,779,784],{"type":25,"tag":108,"props":775,"children":776},{"style":132},[777],{"type":30,"value":778},"    inlineStyles: ",{"type":25,"tag":108,"props":780,"children":781},{"style":568},[782],{"type":30,"value":783},"false",{"type":25,"tag":108,"props":785,"children":786},{"style":132},[787],{"type":30,"value":377},{"type":25,"tag":108,"props":789,"children":791},{"class":110,"line":790},63,[792],{"type":25,"tag":108,"props":793,"children":794},{"style":132},[795],{"type":30,"value":261},{"type":25,"tag":108,"props":797,"children":799},{"class":110,"line":798},64,[800],{"type":25,"tag":108,"props":801,"children":802},{"style":132},[803],{"type":30,"value":804},"})\n",{"type":25,"tag":77,"props":806,"children":808},{"id":807},"head-設定",[809],{"type":30,"value":810},"Head 設定",{"type":25,"tag":26,"props":812,"children":813},{},[814,816,822,824,830,832,838,840,846],{"type":30,"value":815},"這部份也沒什麼太大差異，網站有用到的部份除了原本 Nuxt 2 中的",{"type":25,"tag":68,"props":817,"children":819},{"className":818},[],[820],{"type":30,"value":821},"head",{"type":30,"value":823},"移到 Nuxt 3 之後要用",{"type":25,"tag":68,"props":825,"children":827},{"className":826},[],[828],{"type":30,"value":829},"app",{"type":30,"value":831},"包起來以外，就是 meta 標籤的",{"type":25,"tag":68,"props":833,"children":835},{"className":834},[],[836],{"type":30,"value":837},"hid",{"type":30,"value":839},"要改成使用",{"type":25,"tag":68,"props":841,"children":843},{"className":842},[],[844],{"type":30,"value":845},"key",{"type":30,"value":847},"。",{"type":25,"tag":97,"props":849,"children":851},{"className":99,"code":850,"language":101,"meta":102,"style":102},"export default defineNuxtConfig({\n  //   head: {\n  //     meta: [{ hid: 'charset', charset: 'utf-8' }],\n  //   },\n  app: {\n    head: {\n      /* 一些其他的設定值 */\n      meta: [{ key: 'charset', charset: 'utf-8' }],\n    },\n  },\n})\n",[852],{"type":25,"tag":68,"props":853,"children":854},{"__ignoreMap":102},[855,874,882,890,897,904,912,920,948,955,962],{"type":25,"tag":108,"props":856,"children":857},{"class":110,"line":111},[858,862,866,870],{"type":25,"tag":108,"props":859,"children":860},{"style":115},[861],{"type":30,"value":118},{"type":25,"tag":108,"props":863,"children":864},{"style":115},[865],{"type":30,"value":123},{"type":25,"tag":108,"props":867,"children":868},{"style":126},[869],{"type":30,"value":129},{"type":25,"tag":108,"props":871,"children":872},{"style":132},[873],{"type":30,"value":135},{"type":25,"tag":108,"props":875,"children":876},{"class":110,"line":138},[877],{"type":25,"tag":108,"props":878,"children":879},{"style":142},[880],{"type":30,"value":881},"  //   head: {\n",{"type":25,"tag":108,"props":883,"children":884},{"class":110,"line":148},[885],{"type":25,"tag":108,"props":886,"children":887},{"style":142},[888],{"type":30,"value":889},"  //     meta: [{ hid: 'charset', charset: 'utf-8' }],\n",{"type":25,"tag":108,"props":891,"children":892},{"class":110,"line":157},[893],{"type":25,"tag":108,"props":894,"children":895},{"style":142},[896],{"type":30,"value":305},{"type":25,"tag":108,"props":898,"children":899},{"class":110,"line":167},[900],{"type":25,"tag":108,"props":901,"children":902},{"style":132},[903],{"type":30,"value":314},{"type":25,"tag":108,"props":905,"children":906},{"class":110,"line":176},[907],{"type":25,"tag":108,"props":908,"children":909},{"style":132},[910],{"type":30,"value":911},"    head: {\n",{"type":25,"tag":108,"props":913,"children":914},{"class":110,"line":185},[915],{"type":25,"tag":108,"props":916,"children":917},{"style":142},[918],{"type":30,"value":919},"      /* 一些其他的設定值 */\n",{"type":25,"tag":108,"props":921,"children":922},{"class":110,"line":193},[923,928,933,938,943],{"type":25,"tag":108,"props":924,"children":925},{"style":132},[926],{"type":30,"value":927},"      meta: [{ key: ",{"type":25,"tag":108,"props":929,"children":930},{"style":369},[931],{"type":30,"value":932},"'charset'",{"type":25,"tag":108,"props":934,"children":935},{"style":132},[936],{"type":30,"value":937},", charset: ",{"type":25,"tag":108,"props":939,"children":940},{"style":369},[941],{"type":30,"value":942},"'utf-8'",{"type":25,"tag":108,"props":944,"children":945},{"style":132},[946],{"type":30,"value":947}," }],\n",{"type":25,"tag":108,"props":949,"children":950},{"class":110,"line":202},[951],{"type":25,"tag":108,"props":952,"children":953},{"style":132},[954],{"type":30,"value":709},{"type":25,"tag":108,"props":956,"children":957},{"class":110,"line":211},[958],{"type":25,"tag":108,"props":959,"children":960},{"style":132},[961],{"type":30,"value":261},{"type":25,"tag":108,"props":963,"children":964},{"class":110,"line":219},[965],{"type":25,"tag":108,"props":966,"children":967},{"style":132},[968],{"type":30,"value":804},{"type":25,"tag":53,"props":970,"children":971},{},[],{"type":25,"tag":57,"props":973,"children":975},{"id":974},"apphtml-appvue",[976],{"type":30,"value":977},"app.html → app.vue",{"type":25,"tag":26,"props":979,"children":980},{},[981,983,989,991,997],{"type":30,"value":982},"Nuxt 2 有一個可自訂的",{"type":25,"tag":68,"props":984,"children":986},{"className":985},[],[987],{"type":30,"value":988},"app.html",{"type":30,"value":990},"檔案，如果要簡單新增一些靜態檔案，可以透過直接新增並編輯這個檔案來完成，但 Nuxt3 之後只有",{"type":25,"tag":68,"props":992,"children":994},{"className":993},[],[995],{"type":30,"value":996},"app.vue",{"type":30,"value":998},"可以使用，要稍微調整一下。",{"type":25,"tag":77,"props":1000,"children":1002},{"id":1001},"gtm-google-analytics",[1003],{"type":30,"value":1004},"GTM / Google Analytics",{"type":25,"tag":26,"props":1006,"children":1007},{},[1008,1010,1016],{"type":30,"value":1009},"第一個通常會用到這檔案的功能就是第三方的數據分析了，這個可以直接使用設定值中的",{"type":25,"tag":68,"props":1011,"children":1013},{"className":1012},[],[1014],{"type":30,"value":1015},"app.head",{"type":30,"value":1017},"來處理：",{"type":25,"tag":97,"props":1019,"children":1023},{"className":1020,"code":1021,"language":1022,"meta":102,"style":102},"language-ts shiki shiki-themes github-dark","import { defineNuxtConfig } from 'nuxt/config'\nexport default defineNuxtConfig({\n  app: {\n    head: {\n      script: [\n        {\n          async: true,\n          src: 'https://www.googletagmanager.com/gtag/js?id=G-ABCDEFGHI1',\n          // 設定script優先順序以滿足GTM設置的要求\n          tagPriority: 'critical',\n        },\n        {\n          innerHTML: `window.dataLayer = window.dataLayer || []\n          function gtag() {\n            dataLayer.push(arguments)\n          }\n          gtag('js', new Date())\n    \n          gtag('config', 'G-ABCDEFGHI1')`,\n          // 設定script優先順序以滿足GTM設置的要求\n          tagPriority: 'critical',\n        },\n      ],\n    },\n  },\n})\n","ts",[1024],{"type":25,"tag":68,"props":1025,"children":1026},{"__ignoreMap":102},[1027,1050,1069,1076,1083,1091,1099,1116,1133,1141,1158,1165,1172,1185,1193,1201,1209,1217,1225,1237,1244,1259,1266,1274,1281,1288],{"type":25,"tag":108,"props":1028,"children":1029},{"class":110,"line":111},[1030,1035,1040,1045],{"type":25,"tag":108,"props":1031,"children":1032},{"style":115},[1033],{"type":30,"value":1034},"import",{"type":25,"tag":108,"props":1036,"children":1037},{"style":132},[1038],{"type":30,"value":1039}," { defineNuxtConfig } ",{"type":25,"tag":108,"props":1041,"children":1042},{"style":115},[1043],{"type":30,"value":1044},"from",{"type":25,"tag":108,"props":1046,"children":1047},{"style":369},[1048],{"type":30,"value":1049}," 'nuxt/config'\n",{"type":25,"tag":108,"props":1051,"children":1052},{"class":110,"line":138},[1053,1057,1061,1065],{"type":25,"tag":108,"props":1054,"children":1055},{"style":115},[1056],{"type":30,"value":118},{"type":25,"tag":108,"props":1058,"children":1059},{"style":115},[1060],{"type":30,"value":123},{"type":25,"tag":108,"props":1062,"children":1063},{"style":126},[1064],{"type":30,"value":129},{"type":25,"tag":108,"props":1066,"children":1067},{"style":132},[1068],{"type":30,"value":135},{"type":25,"tag":108,"props":1070,"children":1071},{"class":110,"line":148},[1072],{"type":25,"tag":108,"props":1073,"children":1074},{"style":132},[1075],{"type":30,"value":314},{"type":25,"tag":108,"props":1077,"children":1078},{"class":110,"line":157},[1079],{"type":25,"tag":108,"props":1080,"children":1081},{"style":132},[1082],{"type":30,"value":911},{"type":25,"tag":108,"props":1084,"children":1085},{"class":110,"line":167},[1086],{"type":25,"tag":108,"props":1087,"children":1088},{"style":132},[1089],{"type":30,"value":1090},"      script: [\n",{"type":25,"tag":108,"props":1092,"children":1093},{"class":110,"line":176},[1094],{"type":25,"tag":108,"props":1095,"children":1096},{"style":132},[1097],{"type":30,"value":1098},"        {\n",{"type":25,"tag":108,"props":1100,"children":1101},{"class":110,"line":185},[1102,1107,1112],{"type":25,"tag":108,"props":1103,"children":1104},{"style":132},[1105],{"type":30,"value":1106},"          async: ",{"type":25,"tag":108,"props":1108,"children":1109},{"style":568},[1110],{"type":30,"value":1111},"true",{"type":25,"tag":108,"props":1113,"children":1114},{"style":132},[1115],{"type":30,"value":377},{"type":25,"tag":108,"props":1117,"children":1118},{"class":110,"line":193},[1119,1124,1129],{"type":25,"tag":108,"props":1120,"children":1121},{"style":132},[1122],{"type":30,"value":1123},"          src: ",{"type":25,"tag":108,"props":1125,"children":1126},{"style":369},[1127],{"type":30,"value":1128},"'https://www.googletagmanager.com/gtag/js?id=G-ABCDEFGHI1'",{"type":25,"tag":108,"props":1130,"children":1131},{"style":132},[1132],{"type":30,"value":377},{"type":25,"tag":108,"props":1134,"children":1135},{"class":110,"line":202},[1136],{"type":25,"tag":108,"props":1137,"children":1138},{"style":142},[1139],{"type":30,"value":1140},"          // 設定script優先順序以滿足GTM設置的要求\n",{"type":25,"tag":108,"props":1142,"children":1143},{"class":110,"line":211},[1144,1149,1154],{"type":25,"tag":108,"props":1145,"children":1146},{"style":132},[1147],{"type":30,"value":1148},"          tagPriority: ",{"type":25,"tag":108,"props":1150,"children":1151},{"style":369},[1152],{"type":30,"value":1153},"'critical'",{"type":25,"tag":108,"props":1155,"children":1156},{"style":132},[1157],{"type":30,"value":377},{"type":25,"tag":108,"props":1159,"children":1160},{"class":110,"line":219},[1161],{"type":25,"tag":108,"props":1162,"children":1163},{"style":132},[1164],{"type":30,"value":691},{"type":25,"tag":108,"props":1166,"children":1167},{"class":110,"line":228},[1168],{"type":25,"tag":108,"props":1169,"children":1170},{"style":132},[1171],{"type":30,"value":1098},{"type":25,"tag":108,"props":1173,"children":1174},{"class":110,"line":237},[1175,1180],{"type":25,"tag":108,"props":1176,"children":1177},{"style":132},[1178],{"type":30,"value":1179},"          innerHTML: ",{"type":25,"tag":108,"props":1181,"children":1182},{"style":369},[1183],{"type":30,"value":1184},"`window.dataLayer = window.dataLayer || []\n",{"type":25,"tag":108,"props":1186,"children":1187},{"class":110,"line":246},[1188],{"type":25,"tag":108,"props":1189,"children":1190},{"style":369},[1191],{"type":30,"value":1192},"          function gtag() {\n",{"type":25,"tag":108,"props":1194,"children":1195},{"class":110,"line":255},[1196],{"type":25,"tag":108,"props":1197,"children":1198},{"style":369},[1199],{"type":30,"value":1200},"            dataLayer.push(arguments)\n",{"type":25,"tag":108,"props":1202,"children":1203},{"class":110,"line":264},[1204],{"type":25,"tag":108,"props":1205,"children":1206},{"style":369},[1207],{"type":30,"value":1208},"          }\n",{"type":25,"tag":108,"props":1210,"children":1211},{"class":110,"line":272},[1212],{"type":25,"tag":108,"props":1213,"children":1214},{"style":369},[1215],{"type":30,"value":1216},"          gtag('js', new Date())\n",{"type":25,"tag":108,"props":1218,"children":1219},{"class":110,"line":281},[1220],{"type":25,"tag":108,"props":1221,"children":1222},{"style":369},[1223],{"type":30,"value":1224},"    \n",{"type":25,"tag":108,"props":1226,"children":1227},{"class":110,"line":290},[1228,1233],{"type":25,"tag":108,"props":1229,"children":1230},{"style":369},[1231],{"type":30,"value":1232},"          gtag('config', 'G-ABCDEFGHI1')`",{"type":25,"tag":108,"props":1234,"children":1235},{"style":132},[1236],{"type":30,"value":377},{"type":25,"tag":108,"props":1238,"children":1239},{"class":110,"line":299},[1240],{"type":25,"tag":108,"props":1241,"children":1242},{"style":142},[1243],{"type":30,"value":1140},{"type":25,"tag":108,"props":1245,"children":1246},{"class":110,"line":308},[1247,1251,1255],{"type":25,"tag":108,"props":1248,"children":1249},{"style":132},[1250],{"type":30,"value":1148},{"type":25,"tag":108,"props":1252,"children":1253},{"style":369},[1254],{"type":30,"value":1153},{"type":25,"tag":108,"props":1256,"children":1257},{"style":132},[1258],{"type":30,"value":377},{"type":25,"tag":108,"props":1260,"children":1261},{"class":110,"line":317},[1262],{"type":25,"tag":108,"props":1263,"children":1264},{"style":132},[1265],{"type":30,"value":691},{"type":25,"tag":108,"props":1267,"children":1268},{"class":110,"line":326},[1269],{"type":25,"tag":108,"props":1270,"children":1271},{"style":132},[1272],{"type":30,"value":1273},"      ],\n",{"type":25,"tag":108,"props":1275,"children":1276},{"class":110,"line":334},[1277],{"type":25,"tag":108,"props":1278,"children":1279},{"style":132},[1280],{"type":30,"value":709},{"type":25,"tag":108,"props":1282,"children":1283},{"class":110,"line":342},[1284],{"type":25,"tag":108,"props":1285,"children":1286},{"style":132},[1287],{"type":30,"value":261},{"type":25,"tag":108,"props":1289,"children":1290},{"class":110,"line":351},[1291],{"type":25,"tag":108,"props":1292,"children":1293},{"style":132},[1294],{"type":30,"value":804},{"type":25,"tag":77,"props":1296,"children":1298},{"id":1297},"額外的元素",[1299],{"type":30,"value":1297},{"type":25,"tag":26,"props":1301,"children":1302},{},[1303,1305,1309,1311,1317,1319,1325,1327,1332,1334,1340],{"type":30,"value":1304},"自己還有用到的就是之前",{"type":25,"tag":33,"props":1306,"children":1308},{"slug":1307},"mobile_chrome_sticky_bottom",[],{"type":30,"value":1310},"提到的解決辦法：在",{"type":25,"tag":68,"props":1312,"children":1314},{"className":1313},[],[1315],{"type":30,"value":1316},"body",{"type":30,"value":1318},"之下新增一個",{"type":25,"tag":68,"props":1320,"children":1322},{"className":1321},[],[1323],{"type":30,"value":1324},"\u003Cdiv style=\"position: fixed;\">\u003C/div>",{"type":30,"value":1326},"。這個在",{"type":25,"tag":68,"props":1328,"children":1330},{"className":1329},[],[1331],{"type":30,"value":996},{"type":30,"value":1333},"中可以直接透過",{"type":25,"tag":68,"props":1335,"children":1337},{"className":1336},[],[1338],{"type":30,"value":1339},"\u003CTeleport />",{"type":30,"value":1341},"元件來處理：",{"type":25,"tag":97,"props":1343,"children":1346},{"className":1344,"code":1345,"language":17,"meta":102,"style":102},"language-vue shiki shiki-themes github-dark","\u003Ctemplate>\n  \u003CNuxtLayout>\n    \u003CNuxtPage />\n  \u003C/NuxtLayout>\n\n  \u003CTeleport to=\"body\">\n    \u003C!-- 解決底部sticky問題 -->\n    \u003Cdiv style=\"position: fixed\">\u003C/div>\n  \u003C/Teleport>\n\u003C/template>\n",[1347],{"type":25,"tag":68,"props":1348,"children":1349},{"__ignoreMap":102},[1350,1369,1386,1404,1420,1427,1458,1466,1505,1520],{"type":25,"tag":108,"props":1351,"children":1352},{"class":110,"line":111},[1353,1358,1364],{"type":25,"tag":108,"props":1354,"children":1355},{"style":132},[1356],{"type":30,"value":1357},"\u003C",{"type":25,"tag":108,"props":1359,"children":1361},{"style":1360},"--shiki-default:#85E89D",[1362],{"type":30,"value":1363},"template",{"type":25,"tag":108,"props":1365,"children":1366},{"style":132},[1367],{"type":30,"value":1368},">\n",{"type":25,"tag":108,"props":1370,"children":1371},{"class":110,"line":138},[1372,1377,1382],{"type":25,"tag":108,"props":1373,"children":1374},{"style":132},[1375],{"type":30,"value":1376},"  \u003C",{"type":25,"tag":108,"props":1378,"children":1379},{"style":1360},[1380],{"type":30,"value":1381},"NuxtLayout",{"type":25,"tag":108,"props":1383,"children":1384},{"style":132},[1385],{"type":30,"value":1368},{"type":25,"tag":108,"props":1387,"children":1388},{"class":110,"line":148},[1389,1394,1399],{"type":25,"tag":108,"props":1390,"children":1391},{"style":132},[1392],{"type":30,"value":1393},"    \u003C",{"type":25,"tag":108,"props":1395,"children":1396},{"style":1360},[1397],{"type":30,"value":1398},"NuxtPage",{"type":25,"tag":108,"props":1400,"children":1401},{"style":132},[1402],{"type":30,"value":1403}," />\n",{"type":25,"tag":108,"props":1405,"children":1406},{"class":110,"line":157},[1407,1412,1416],{"type":25,"tag":108,"props":1408,"children":1409},{"style":132},[1410],{"type":30,"value":1411},"  \u003C/",{"type":25,"tag":108,"props":1413,"children":1414},{"style":1360},[1415],{"type":30,"value":1381},{"type":25,"tag":108,"props":1417,"children":1418},{"style":132},[1419],{"type":30,"value":1368},{"type":25,"tag":108,"props":1421,"children":1422},{"class":110,"line":167},[1423],{"type":25,"tag":108,"props":1424,"children":1425},{"emptyLinePlaceholder":161},[1426],{"type":30,"value":164},{"type":25,"tag":108,"props":1428,"children":1429},{"class":110,"line":176},[1430,1434,1439,1444,1449,1454],{"type":25,"tag":108,"props":1431,"children":1432},{"style":132},[1433],{"type":30,"value":1376},{"type":25,"tag":108,"props":1435,"children":1436},{"style":1360},[1437],{"type":30,"value":1438},"Teleport",{"type":25,"tag":108,"props":1440,"children":1441},{"style":126},[1442],{"type":30,"value":1443}," to",{"type":25,"tag":108,"props":1445,"children":1446},{"style":132},[1447],{"type":30,"value":1448},"=",{"type":25,"tag":108,"props":1450,"children":1451},{"style":369},[1452],{"type":30,"value":1453},"\"body\"",{"type":25,"tag":108,"props":1455,"children":1456},{"style":132},[1457],{"type":30,"value":1368},{"type":25,"tag":108,"props":1459,"children":1460},{"class":110,"line":185},[1461],{"type":25,"tag":108,"props":1462,"children":1463},{"style":142},[1464],{"type":30,"value":1465},"    \u003C!-- 解決底部sticky問題 -->\n",{"type":25,"tag":108,"props":1467,"children":1468},{"class":110,"line":193},[1469,1473,1478,1483,1487,1492,1497,1501],{"type":25,"tag":108,"props":1470,"children":1471},{"style":132},[1472],{"type":30,"value":1393},{"type":25,"tag":108,"props":1474,"children":1475},{"style":1360},[1476],{"type":30,"value":1477},"div",{"type":25,"tag":108,"props":1479,"children":1480},{"style":126},[1481],{"type":30,"value":1482}," style",{"type":25,"tag":108,"props":1484,"children":1485},{"style":132},[1486],{"type":30,"value":1448},{"type":25,"tag":108,"props":1488,"children":1489},{"style":369},[1490],{"type":30,"value":1491},"\"position: fixed\"",{"type":25,"tag":108,"props":1493,"children":1494},{"style":132},[1495],{"type":30,"value":1496},">\u003C/",{"type":25,"tag":108,"props":1498,"children":1499},{"style":1360},[1500],{"type":30,"value":1477},{"type":25,"tag":108,"props":1502,"children":1503},{"style":132},[1504],{"type":30,"value":1368},{"type":25,"tag":108,"props":1506,"children":1507},{"class":110,"line":202},[1508,1512,1516],{"type":25,"tag":108,"props":1509,"children":1510},{"style":132},[1511],{"type":30,"value":1411},{"type":25,"tag":108,"props":1513,"children":1514},{"style":1360},[1515],{"type":30,"value":1438},{"type":25,"tag":108,"props":1517,"children":1518},{"style":132},[1519],{"type":30,"value":1368},{"type":25,"tag":108,"props":1521,"children":1522},{"class":110,"line":211},[1523,1528,1532],{"type":25,"tag":108,"props":1524,"children":1525},{"style":132},[1526],{"type":30,"value":1527},"\u003C/",{"type":25,"tag":108,"props":1529,"children":1530},{"style":1360},[1531],{"type":30,"value":1363},{"type":25,"tag":108,"props":1533,"children":1534},{"style":132},[1535],{"type":30,"value":1368},{"type":25,"tag":1537,"props":1538,"children":1539},"style",{},[1540],{"type":30,"value":1541},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":102,"searchDepth":138,"depth":138,"links":1543},[1544,1548],{"id":59,"depth":138,"text":59,"children":1545},[1546,1547],{"id":79,"depth":148,"text":79},{"id":807,"depth":148,"text":810},{"id":974,"depth":138,"text":977,"children":1549},[1550,1551],{"id":1001,"depth":148,"text":1004},{"id":1297,"depth":148,"text":1297},[1553,1566,1576],{"title":1554,"description":1555,"img":6,"tags":1556,"readingTime":1561,"createdAt":1565,"updatedAt":12,"slug":35},"部落格Nuxt 2升級Nuxt 3（一）：bootstrapVue置換成自製的bootrap5元件","如之前規劃，部落格升級 Nuxt3 的第一步是先把 bootstrapVue 抽換成自己實做的 bootstrap5。這篇是紀錄過程中覺得特別困難或是需要研究的部份。",[15,16,17,18,19,1557,1558,1559,1560],"bootstrapVue","bootstrap 4","bootstrap 5","bootstrap",{"text":8,"minutes":1562,"time":1563,"words":1564},3.53,211800,706,"2024-01-23T05:33:23.000Z",{"title":1567,"description":1568,"img":6,"tags":1569,"readingTime":1570,"createdAt":1565,"updatedAt":12,"slug":1575},"部落格Nuxt 2升級Nuxt 3：前言","從去年年初開始建置的這個部落格網站，邊寫文章的同時陸陸續續補上功能後，大概到上個月才終於像是有個部落格的樣子。但由於 Nuxt2 即將在 2024/06/30 停止官方支援，而作為基底的 Vue2 更是在 2023/12/31 已停止官方支援，所以……想說要做的新功能可能先放著，先把部落格從 Nuxt2 升級到 Nuxt3 比較好。",[15,16,17,18,19],{"text":1571,"minutes":1572,"time":1573,"words":1574},"5 min read",4.28,256800,856,"nuxt2_to_nuxt3_blog_0_intro",{"title":1577,"description":1578,"img":6,"tags":1579,"readingTime":1582,"createdAt":12,"updatedAt":12,"slug":1586},"部落格Nuxt 2升級Nuxt 3（六）：Vuex → Pinia","Nuxt 3 的狀態管理套件從 Nuxt 2 的 Vuex 改成了 Pinia，兩者差異不算大，部落格用到的功能也不多。其中比較要注意的就是 Nuxt 3 不再提供nuxtServerInit方法，若需要在 server 端初始化一些資料的話，就要透過其他作法來完成。",[15,16,17,18,19,1580,1581],"vuex","pinia",{"text":1571,"minutes":1583,"time":1584,"words":1585},4.19,251400,838,"nuxt2_to_nuxt3_blog_6_modules_pinia","解決底部Sticky元素在Android Chrome滾動時渲染位置錯誤的問題",1734076640734]