[{"data":1,"prerenderedAt":966},["ShallowReactive",2],{"vue_stack_deployment_pm2":3,"Related_vue_stack_deployment_pm2":928},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"img":10,"tags":11,"category":15,"readingTime":16,"excerpt":21,"body":72,"_type":920,"_id":921,"_source":922,"_file":923,"_stem":924,"_extension":925,"createdAt":926,"updatedAt":926,"slug":927},"/articles/2024/vue_stack_deployment_pm2","2024",false,"","設定PM2來管理Nuxt SSR網站","最近想整理一下自己在工作中用到的工具集，回頭看發現比較不熟的是 pm2 的初始設定，畢竟設定好之後也只會用到pm2 status、pm2 logs、pm2 monit……這些維護用的指令而已，就決定先從 pm2 開始紀錄了。","924/Crirxh.jpg",[12,13,14],"nuxt","vue","pm2","frontend",{"text":17,"minutes":18,"time":19,"words":20},"4 min read",3.83,229800,766,{"type":22,"children":23},"root",[24,56],{"type":25,"tag":26,"props":27,"children":28},"element","p",{},[29,32,39,41,47,48,54],{"type":30,"value":31},"text","最近想整理一下自己在工作中用到的工具集，回頭看發現比較不熟的是 pm2 的初始設定，畢竟設定好之後也只會用到",{"type":25,"tag":33,"props":34,"children":36},"code",{"className":35},[],[37],{"type":30,"value":38},"pm2 status",{"type":30,"value":40},"、",{"type":25,"tag":33,"props":42,"children":44},{"className":43},[],[45],{"type":30,"value":46},"pm2 logs",{"type":30,"value":40},{"type":25,"tag":33,"props":49,"children":51},{"className":50},[],[52],{"type":30,"value":53},"pm2 monit",{"type":30,"value":55},"……這些維護用的指令而已，就決定先從 pm2 開始紀錄了。",{"type":25,"tag":26,"props":57,"children":58},{},[59,61,70],{"type":30,"value":60},"文章內容都是官方文件就有的東西，這邊是取自己比較常用的部份，可能會延遲更新，還請訪客以",{"type":25,"tag":62,"props":63,"children":67},"a",{"href":64,"rel":65},"https://pm2.keymetrics.io/docs/usage/quick-start/",[66],"nofollow",[68],{"type":30,"value":69},"官方文件",{"type":30,"value":71},"為準。",{"type":22,"children":73,"toc":910},[74,96,106,110,117,122,135,138,143,148,192,205,208,213,234,446,451,475,481,493,664,667,673,678,697,702,829,834,853,858,863,868,887,904],{"type":25,"tag":26,"props":75,"children":76},{},[77,78,83,84,89,90,95],{"type":30,"value":31},{"type":25,"tag":33,"props":79,"children":81},{"className":80},[],[82],{"type":30,"value":38},{"type":30,"value":40},{"type":25,"tag":33,"props":85,"children":87},{"className":86},[],[88],{"type":30,"value":46},{"type":30,"value":40},{"type":25,"tag":33,"props":91,"children":93},{"className":92},[],[94],{"type":30,"value":53},{"type":30,"value":55},{"type":25,"tag":26,"props":97,"children":98},{},[99,100,105],{"type":30,"value":60},{"type":25,"tag":62,"props":101,"children":103},{"href":64,"rel":102},[66],[104],{"type":30,"value":69},{"type":30,"value":71},{"type":25,"tag":107,"props":108,"children":109},"hr",{},[],{"type":25,"tag":111,"props":112,"children":114},"h2",{"id":113},"什麼是-pm2",[115],{"type":30,"value":116},"什麼是 PM2",{"type":25,"tag":26,"props":118,"children":119},{},[120],{"type":30,"value":121},"需要使用即時 SSR 功能的 Nuxt 網站必須跑在 node 環境中成為一個 process，而 pm2 顧名思義就是拿來管理這個 process 的管理器（manager）。",{"type":25,"tag":26,"props":123,"children":124},{},[125,127,133],{"type":30,"value":126},"這個管理器有滿多功能，像是主機重開機時自動重新啟動網站、自動將網站的 process 叢集化以達到可用的最大效能、紀錄 log、監控即時的效能資源耗損……等等，比起直接讓網站",{"type":25,"tag":33,"props":128,"children":130},{"className":129},[],[131],{"type":30,"value":132},"npm run start",{"type":30,"value":134},"來說，會方便許多。",{"type":25,"tag":107,"props":136,"children":137},{},[],{"type":25,"tag":111,"props":139,"children":141},{"id":140},"安裝",[142],{"type":30,"value":140},{"type":25,"tag":26,"props":144,"children":145},{},[146],{"type":30,"value":147},"可以透過 npm 直接安裝：",{"type":25,"tag":149,"props":150,"children":154},"pre",{"className":151,"code":152,"language":153,"meta":7,"style":7},"language-bash shiki shiki-themes github-dark","sudo npm install pm2@latest -g\n","bash",[155],{"type":25,"tag":33,"props":156,"children":157},{"__ignoreMap":7},[158],{"type":25,"tag":159,"props":160,"children":163},"span",{"class":161,"line":162},"line",1,[164,170,176,181,186],{"type":25,"tag":159,"props":165,"children":167},{"style":166},"--shiki-default:#B392F0",[168],{"type":30,"value":169},"sudo",{"type":25,"tag":159,"props":171,"children":173},{"style":172},"--shiki-default:#9ECBFF",[174],{"type":30,"value":175}," npm",{"type":25,"tag":159,"props":177,"children":178},{"style":172},[179],{"type":30,"value":180}," install",{"type":25,"tag":159,"props":182,"children":183},{"style":172},[184],{"type":30,"value":185}," pm2@latest",{"type":25,"tag":159,"props":187,"children":189},{"style":188},"--shiki-default:#79B8FF",[190],{"type":30,"value":191}," -g\n",{"type":25,"tag":193,"props":194,"children":195},"article-note",{},[196,198,203],{"type":30,"value":197},"\n這裡會有\n",{"type":25,"tag":33,"props":199,"children":201},{"className":200},[],[202],{"type":30,"value":169},{"type":30,"value":204},"\n是因為自己工作中是透過 linux 的軟體包管理器來安裝 nodejs，若要全域安裝會需要管理員權限。\n",{"type":25,"tag":107,"props":206,"children":207},{},[],{"type":25,"tag":111,"props":209,"children":211},{"id":210},"設定與執行",[212],{"type":30,"value":210},{"type":25,"tag":26,"props":214,"children":215},{},[216,218,224,226,232],{"type":30,"value":217},"透過建立",{"type":25,"tag":33,"props":219,"children":221},{"className":220},[],[222],{"type":30,"value":223},"ecosystem.config.js",{"type":30,"value":225},"檔案（Nuxt3 中為",{"type":25,"tag":33,"props":227,"children":229},{"className":228},[],[230],{"type":30,"value":231},"ecosystem.config.cjs",{"type":30,"value":233},"）可以控制 pm2 執行網站時的一些設定值，基本內容如下：",{"type":25,"tag":149,"props":235,"children":239},{"className":236,"code":237,"language":238,"meta":7,"style":7},"language-js shiki shiki-themes github-dark","module.exports = {\n  apps: [\n    {\n      name: 'NuxtAppName',\n      exec_mode: 'cluster',\n      instances: 'max',\n      /* Nuxt3 */\n      // port: '3000',\n      // script: './.output/server/index.mjs',\n      /* Nuxt2 */\n      script: './node_modules/nuxt/bin/nuxt.js',\n      args: 'start',\n    },\n  ],\n}\n","js",[240],{"type":25,"tag":33,"props":241,"children":242},{"__ignoreMap":7},[243,273,282,291,310,328,346,356,365,374,383,401,419,428,437],{"type":25,"tag":159,"props":244,"children":245},{"class":161,"line":162},[246,251,257,262,268],{"type":25,"tag":159,"props":247,"children":248},{"style":188},[249],{"type":30,"value":250},"module",{"type":25,"tag":159,"props":252,"children":254},{"style":253},"--shiki-default:#E1E4E8",[255],{"type":30,"value":256},".",{"type":25,"tag":159,"props":258,"children":259},{"style":188},[260],{"type":30,"value":261},"exports",{"type":25,"tag":159,"props":263,"children":265},{"style":264},"--shiki-default:#F97583",[266],{"type":30,"value":267}," =",{"type":25,"tag":159,"props":269,"children":270},{"style":253},[271],{"type":30,"value":272}," {\n",{"type":25,"tag":159,"props":274,"children":276},{"class":161,"line":275},2,[277],{"type":25,"tag":159,"props":278,"children":279},{"style":253},[280],{"type":30,"value":281},"  apps: [\n",{"type":25,"tag":159,"props":283,"children":285},{"class":161,"line":284},3,[286],{"type":25,"tag":159,"props":287,"children":288},{"style":253},[289],{"type":30,"value":290},"    {\n",{"type":25,"tag":159,"props":292,"children":294},{"class":161,"line":293},4,[295,300,305],{"type":25,"tag":159,"props":296,"children":297},{"style":253},[298],{"type":30,"value":299},"      name: ",{"type":25,"tag":159,"props":301,"children":302},{"style":172},[303],{"type":30,"value":304},"'NuxtAppName'",{"type":25,"tag":159,"props":306,"children":307},{"style":253},[308],{"type":30,"value":309},",\n",{"type":25,"tag":159,"props":311,"children":313},{"class":161,"line":312},5,[314,319,324],{"type":25,"tag":159,"props":315,"children":316},{"style":253},[317],{"type":30,"value":318},"      exec_mode: ",{"type":25,"tag":159,"props":320,"children":321},{"style":172},[322],{"type":30,"value":323},"'cluster'",{"type":25,"tag":159,"props":325,"children":326},{"style":253},[327],{"type":30,"value":309},{"type":25,"tag":159,"props":329,"children":331},{"class":161,"line":330},6,[332,337,342],{"type":25,"tag":159,"props":333,"children":334},{"style":253},[335],{"type":30,"value":336},"      instances: ",{"type":25,"tag":159,"props":338,"children":339},{"style":172},[340],{"type":30,"value":341},"'max'",{"type":25,"tag":159,"props":343,"children":344},{"style":253},[345],{"type":30,"value":309},{"type":25,"tag":159,"props":347,"children":349},{"class":161,"line":348},7,[350],{"type":25,"tag":159,"props":351,"children":353},{"style":352},"--shiki-default:#6A737D",[354],{"type":30,"value":355},"      /* Nuxt3 */\n",{"type":25,"tag":159,"props":357,"children":359},{"class":161,"line":358},8,[360],{"type":25,"tag":159,"props":361,"children":362},{"style":352},[363],{"type":30,"value":364},"      // port: '3000',\n",{"type":25,"tag":159,"props":366,"children":368},{"class":161,"line":367},9,[369],{"type":25,"tag":159,"props":370,"children":371},{"style":352},[372],{"type":30,"value":373},"      // script: './.output/server/index.mjs',\n",{"type":25,"tag":159,"props":375,"children":377},{"class":161,"line":376},10,[378],{"type":25,"tag":159,"props":379,"children":380},{"style":352},[381],{"type":30,"value":382},"      /* Nuxt2 */\n",{"type":25,"tag":159,"props":384,"children":386},{"class":161,"line":385},11,[387,392,397],{"type":25,"tag":159,"props":388,"children":389},{"style":253},[390],{"type":30,"value":391},"      script: ",{"type":25,"tag":159,"props":393,"children":394},{"style":172},[395],{"type":30,"value":396},"'./node_modules/nuxt/bin/nuxt.js'",{"type":25,"tag":159,"props":398,"children":399},{"style":253},[400],{"type":30,"value":309},{"type":25,"tag":159,"props":402,"children":404},{"class":161,"line":403},12,[405,410,415],{"type":25,"tag":159,"props":406,"children":407},{"style":253},[408],{"type":30,"value":409},"      args: ",{"type":25,"tag":159,"props":411,"children":412},{"style":172},[413],{"type":30,"value":414},"'start'",{"type":25,"tag":159,"props":416,"children":417},{"style":253},[418],{"type":30,"value":309},{"type":25,"tag":159,"props":420,"children":422},{"class":161,"line":421},13,[423],{"type":25,"tag":159,"props":424,"children":425},{"style":253},[426],{"type":30,"value":427},"    },\n",{"type":25,"tag":159,"props":429,"children":431},{"class":161,"line":430},14,[432],{"type":25,"tag":159,"props":433,"children":434},{"style":253},[435],{"type":30,"value":436},"  ],\n",{"type":25,"tag":159,"props":438,"children":440},{"class":161,"line":439},15,[441],{"type":25,"tag":159,"props":442,"children":443},{"style":253},[444],{"type":30,"value":445},"}\n",{"type":25,"tag":26,"props":447,"children":448},{},[449],{"type":30,"value":450},"接著在網站資料夾中執行下面這個指令，pm2 就會開始執行 Nuxt 網站了：",{"type":25,"tag":149,"props":452,"children":454},{"className":151,"code":453,"language":153,"meta":7,"style":7},"pm2 start ecosystem.config.js\n",[455],{"type":25,"tag":33,"props":456,"children":457},{"__ignoreMap":7},[458],{"type":25,"tag":159,"props":459,"children":460},{"class":161,"line":162},[461,465,470],{"type":25,"tag":159,"props":462,"children":463},{"style":166},[464],{"type":30,"value":14},{"type":25,"tag":159,"props":466,"children":467},{"style":172},[468],{"type":30,"value":469}," start",{"type":25,"tag":159,"props":471,"children":472},{"style":172},[473],{"type":30,"value":474}," ecosystem.config.js\n",{"type":25,"tag":476,"props":477,"children":479},"h3",{"id":478},"自己常用的其他設定",[480],{"type":30,"value":478},{"type":25,"tag":26,"props":482,"children":483},{},[484,486,491],{"type":30,"value":485},"當然",{"type":25,"tag":33,"props":487,"children":489},{"className":488},[],[490],{"type":30,"value":223},{"type":30,"value":492},"還可以設定更多的參數，自己常用的羅列如下：",{"type":25,"tag":149,"props":494,"children":496},{"className":236,"code":495,"language":238,"meta":7,"style":7},"module.exports = {\n  apps: [\n    {\n      // 設定不同環境時的參數，可以區分開發、測試以及正式環境。\n      // 不同環境可以透過pm2 start時以--env production傳入。\n      env_production: {\n        NODE_ENV: 'production',\n      },\n      env_development: {\n        NODE_ENV: 'development',\n      },\n      // 當網站實體佔用超過多少記憶體時便重啟\n      max_memory_restart: '3.75G',\n    },\n  ],\n}\n",[497],{"type":25,"tag":33,"props":498,"children":499},{"__ignoreMap":7},[500,523,530,537,545,553,561,578,586,594,610,617,625,642,649,656],{"type":25,"tag":159,"props":501,"children":502},{"class":161,"line":162},[503,507,511,515,519],{"type":25,"tag":159,"props":504,"children":505},{"style":188},[506],{"type":30,"value":250},{"type":25,"tag":159,"props":508,"children":509},{"style":253},[510],{"type":30,"value":256},{"type":25,"tag":159,"props":512,"children":513},{"style":188},[514],{"type":30,"value":261},{"type":25,"tag":159,"props":516,"children":517},{"style":264},[518],{"type":30,"value":267},{"type":25,"tag":159,"props":520,"children":521},{"style":253},[522],{"type":30,"value":272},{"type":25,"tag":159,"props":524,"children":525},{"class":161,"line":275},[526],{"type":25,"tag":159,"props":527,"children":528},{"style":253},[529],{"type":30,"value":281},{"type":25,"tag":159,"props":531,"children":532},{"class":161,"line":284},[533],{"type":25,"tag":159,"props":534,"children":535},{"style":253},[536],{"type":30,"value":290},{"type":25,"tag":159,"props":538,"children":539},{"class":161,"line":293},[540],{"type":25,"tag":159,"props":541,"children":542},{"style":352},[543],{"type":30,"value":544},"      // 設定不同環境時的參數，可以區分開發、測試以及正式環境。\n",{"type":25,"tag":159,"props":546,"children":547},{"class":161,"line":312},[548],{"type":25,"tag":159,"props":549,"children":550},{"style":352},[551],{"type":30,"value":552},"      // 不同環境可以透過pm2 start時以--env production傳入。\n",{"type":25,"tag":159,"props":554,"children":555},{"class":161,"line":330},[556],{"type":25,"tag":159,"props":557,"children":558},{"style":253},[559],{"type":30,"value":560},"      env_production: {\n",{"type":25,"tag":159,"props":562,"children":563},{"class":161,"line":348},[564,569,574],{"type":25,"tag":159,"props":565,"children":566},{"style":253},[567],{"type":30,"value":568},"        NODE_ENV: ",{"type":25,"tag":159,"props":570,"children":571},{"style":172},[572],{"type":30,"value":573},"'production'",{"type":25,"tag":159,"props":575,"children":576},{"style":253},[577],{"type":30,"value":309},{"type":25,"tag":159,"props":579,"children":580},{"class":161,"line":358},[581],{"type":25,"tag":159,"props":582,"children":583},{"style":253},[584],{"type":30,"value":585},"      },\n",{"type":25,"tag":159,"props":587,"children":588},{"class":161,"line":367},[589],{"type":25,"tag":159,"props":590,"children":591},{"style":253},[592],{"type":30,"value":593},"      env_development: {\n",{"type":25,"tag":159,"props":595,"children":596},{"class":161,"line":376},[597,601,606],{"type":25,"tag":159,"props":598,"children":599},{"style":253},[600],{"type":30,"value":568},{"type":25,"tag":159,"props":602,"children":603},{"style":172},[604],{"type":30,"value":605},"'development'",{"type":25,"tag":159,"props":607,"children":608},{"style":253},[609],{"type":30,"value":309},{"type":25,"tag":159,"props":611,"children":612},{"class":161,"line":385},[613],{"type":25,"tag":159,"props":614,"children":615},{"style":253},[616],{"type":30,"value":585},{"type":25,"tag":159,"props":618,"children":619},{"class":161,"line":403},[620],{"type":25,"tag":159,"props":621,"children":622},{"style":352},[623],{"type":30,"value":624},"      // 當網站實體佔用超過多少記憶體時便重啟\n",{"type":25,"tag":159,"props":626,"children":627},{"class":161,"line":421},[628,633,638],{"type":25,"tag":159,"props":629,"children":630},{"style":253},[631],{"type":30,"value":632},"      max_memory_restart: ",{"type":25,"tag":159,"props":634,"children":635},{"style":172},[636],{"type":30,"value":637},"'3.75G'",{"type":25,"tag":159,"props":639,"children":640},{"style":253},[641],{"type":30,"value":309},{"type":25,"tag":159,"props":643,"children":644},{"class":161,"line":430},[645],{"type":25,"tag":159,"props":646,"children":647},{"style":253},[648],{"type":30,"value":427},{"type":25,"tag":159,"props":650,"children":651},{"class":161,"line":439},[652],{"type":25,"tag":159,"props":653,"children":654},{"style":253},[655],{"type":30,"value":436},{"type":25,"tag":159,"props":657,"children":659},{"class":161,"line":658},16,[660],{"type":25,"tag":159,"props":661,"children":662},{"style":253},[663],{"type":30,"value":445},{"type":25,"tag":107,"props":665,"children":666},{},[],{"type":25,"tag":111,"props":668,"children":670},{"id":669},"設定開機時自動重新啟動-pm2",[671],{"type":30,"value":672},"設定開機時自動重新啟動 pm2",{"type":25,"tag":26,"props":674,"children":675},{},[676],{"type":30,"value":677},"若網站是部署在主機上，而非透過容器方式的話，設定主機重開機時自動重新啟動後，可以防止主機意外重新啟動後網站掛掉的問題。先輸入下列指令：",{"type":25,"tag":149,"props":679,"children":681},{"className":151,"code":680,"language":153,"meta":7,"style":7},"pm2 startup\n",[682],{"type":25,"tag":33,"props":683,"children":684},{"__ignoreMap":7},[685],{"type":25,"tag":159,"props":686,"children":687},{"class":161,"line":162},[688,692],{"type":25,"tag":159,"props":689,"children":690},{"style":166},[691],{"type":30,"value":14},{"type":25,"tag":159,"props":693,"children":694},{"style":172},[695],{"type":30,"value":696}," startup\n",{"type":25,"tag":26,"props":698,"children":699},{},[700],{"type":30,"value":701},"接著終端機會出現像這樣的提示，要你複製一段指令並執行：",{"type":25,"tag":149,"props":703,"children":705},{"className":151,"code":704,"language":153,"meta":7,"style":7},"[PM2] Init System found: systemd\n[PM2] To setup the Startup Script, copy/paste the following command:\nsudo env PATH=$PATH:/home/somuser/.nvm/versions/node/v20.14.0/bin /home/someuser/.nvm/versions/node/v20.14.0/lib/node_modules/pm2/bin/pm2 startup \u003Cdistribution> -u \u003Cuser> --hp \u003Chome-path>\n",[706],{"type":25,"tag":33,"props":707,"children":708},{"__ignoreMap":7},[709,717,725],{"type":25,"tag":159,"props":710,"children":711},{"class":161,"line":162},[712],{"type":25,"tag":159,"props":713,"children":714},{"style":253},[715],{"type":30,"value":716},"[PM2] Init System found: systemd\n",{"type":25,"tag":159,"props":718,"children":719},{"class":161,"line":275},[720],{"type":25,"tag":159,"props":721,"children":722},{"style":253},[723],{"type":30,"value":724},"[PM2] To setup the Startup Script, copy/paste the following command:\n",{"type":25,"tag":159,"props":726,"children":727},{"class":161,"line":284},[728,732,737,742,747,752,757,762,767,772,777,782,787,791,796,801,805,810,814,819,824],{"type":25,"tag":159,"props":729,"children":730},{"style":166},[731],{"type":30,"value":169},{"type":25,"tag":159,"props":733,"children":734},{"style":172},[735],{"type":30,"value":736}," env",{"type":25,"tag":159,"props":738,"children":739},{"style":172},[740],{"type":30,"value":741}," PATH=",{"type":25,"tag":159,"props":743,"children":744},{"style":253},[745],{"type":30,"value":746},"$PATH",{"type":25,"tag":159,"props":748,"children":749},{"style":172},[750],{"type":30,"value":751},":/home/somuser/.nvm/versions/node/v20.14.0/bin",{"type":25,"tag":159,"props":753,"children":754},{"style":172},[755],{"type":30,"value":756}," /home/someuser/.nvm/versions/node/v20.14.0/lib/node_modules/pm2/bin/pm2",{"type":25,"tag":159,"props":758,"children":759},{"style":172},[760],{"type":30,"value":761}," startup",{"type":25,"tag":159,"props":763,"children":764},{"style":264},[765],{"type":30,"value":766}," \u003C",{"type":25,"tag":159,"props":768,"children":769},{"style":172},[770],{"type":30,"value":771},"distributio",{"type":25,"tag":159,"props":773,"children":774},{"style":253},[775],{"type":30,"value":776},"n",{"type":25,"tag":159,"props":778,"children":779},{"style":264},[780],{"type":30,"value":781},">",{"type":25,"tag":159,"props":783,"children":784},{"style":188},[785],{"type":30,"value":786}," -u",{"type":25,"tag":159,"props":788,"children":789},{"style":264},[790],{"type":30,"value":766},{"type":25,"tag":159,"props":792,"children":793},{"style":172},[794],{"type":30,"value":795},"use",{"type":25,"tag":159,"props":797,"children":798},{"style":253},[799],{"type":30,"value":800},"r",{"type":25,"tag":159,"props":802,"children":803},{"style":264},[804],{"type":30,"value":781},{"type":25,"tag":159,"props":806,"children":807},{"style":188},[808],{"type":30,"value":809}," --hp",{"type":25,"tag":159,"props":811,"children":812},{"style":264},[813],{"type":30,"value":766},{"type":25,"tag":159,"props":815,"children":816},{"style":172},[817],{"type":30,"value":818},"home-pat",{"type":25,"tag":159,"props":820,"children":821},{"style":253},[822],{"type":30,"value":823},"h",{"type":25,"tag":159,"props":825,"children":826},{"style":264},[827],{"type":30,"value":828},">\n",{"type":25,"tag":26,"props":830,"children":831},{},[832],{"type":30,"value":833},"指令的內容會根據你目前所在的系統版本、使用的 nodejs 環境而有所不同，總之就複製後執行。最後透過 pm2 執行所有你在重開機時想要自動執行的網站後，再執行下列指令：",{"type":25,"tag":149,"props":835,"children":837},{"className":151,"code":836,"language":153,"meta":7,"style":7},"pm2 save\n",[838],{"type":25,"tag":33,"props":839,"children":840},{"__ignoreMap":7},[841],{"type":25,"tag":159,"props":842,"children":843},{"class":161,"line":162},[844,848],{"type":25,"tag":159,"props":845,"children":846},{"style":166},[847],{"type":30,"value":14},{"type":25,"tag":159,"props":849,"children":850},{"style":172},[851],{"type":30,"value":852}," save\n",{"type":25,"tag":26,"props":854,"children":855},{},[856],{"type":30,"value":857},"這樣就設定完成了。",{"type":25,"tag":476,"props":859,"children":861},{"id":860},"取消自動重新啟動",[862],{"type":30,"value":860},{"type":25,"tag":26,"props":864,"children":865},{},[866],{"type":30,"value":867},"若想要取消自動重新啟動的話，可以透過下列指令：",{"type":25,"tag":149,"props":869,"children":871},{"className":151,"code":870,"language":153,"meta":7,"style":7},"pm2 unstartup\n",[872],{"type":25,"tag":33,"props":873,"children":874},{"__ignoreMap":7},[875],{"type":25,"tag":159,"props":876,"children":877},{"class":161,"line":162},[878,882],{"type":25,"tag":159,"props":879,"children":880},{"style":166},[881],{"type":30,"value":14},{"type":25,"tag":159,"props":883,"children":884},{"style":172},[885],{"type":30,"value":886}," unstartup\n",{"type":25,"tag":26,"props":888,"children":889},{},[890],{"type":25,"tag":891,"props":892,"children":893},"strong",{},[894,896,902],{"type":30,"value":895},"在主機 node 環境有升級的時候，要記得先",{"type":25,"tag":33,"props":897,"children":899},{"className":898},[],[900],{"type":30,"value":901},"unstartup",{"type":30,"value":903},"，再重新設定。",{"type":25,"tag":905,"props":906,"children":907},"style",{},[908],{"type":30,"value":909},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":275,"depth":275,"links":911},[912,913,914,917],{"id":113,"depth":275,"text":116},{"id":140,"depth":275,"text":140},{"id":210,"depth":275,"text":210,"children":915},[916],{"id":478,"depth":284,"text":478},{"id":669,"depth":275,"text":672,"children":918},[919],{"id":860,"depth":284,"text":860},"markdown","content:articles:2024:vue_stack_deployment_pm2.md","content","articles/2024/vue_stack_deployment_pm2.md","articles/2024/vue_stack_deployment_pm2","md","2024-06-02T02:55:15.000Z","vue_stack_deployment_pm2",[929,942,955],{"title":930,"description":931,"img":932,"tags":933,"readingTime":935,"createdAt":939,"updatedAt":940,"slug":941},"Nuxt2中的BootstrapVue TreeShaking","Bootstrap 是個很好用的 UI 框架，在 Vue 生態系中主要由 Bootstrap Vue 去作銜接，然而在專案中幾乎不會完全使用到 Bootstrap 的所有功能，這時如果把不必要的 css / js 編譯移除，可以降低編譯後專案的大小，這種行為也被稱為 Tree shaking。本篇紀錄了自己在 Nuxt2 中使用 Bootstrap Vue 時，Tree Shaking 的一些步驟。","924/Oqxy2g.jpg",[13,12,934],"bootstrap",{"text":17,"minutes":936,"time":937,"words":938},3.56,213600,712,"2023-01-02T08:03:25.000Z","2023-12-11T10:19:13.000Z","nuxt2_bootstrapvue_treeshaking",{"title":943,"description":944,"tags":945,"img":946,"readingTime":947,"createdAt":952,"updatedAt":953,"slug":954},"使用nuxt-content-git取得Nuxt2 Content中正確的檔案時間","建完這個部落格之後，發現好像不太對，怎麼前幾天發的文章，日期卻變成今天。後來發現是因為若從 A 電腦更新文章，在 B 電腦用 git 同步更新檔案之後，檔案的更新日期會變成當下的時間。",[13,12],"924/WCeWkF.jpg",{"text":948,"minutes":949,"time":950,"words":951},"2 min read",1.55,93000,310,"2023-01-06T13:35:19.000Z","2023-10-30T09:24:31.000Z","nuxt2_content_git",{"title":956,"description":957,"img":958,"tags":959,"readingTime":961,"createdAt":953,"updatedAt":953,"slug":965},"在Nuxt 2中建立動態routes的sitemap","Sitemap 雖然對網站來說非必要，但為了 SEO 考量通常都還是會建立。而在 Nuxt 2 中可以透過@nuxt/sitemap模組來簡單建立 sitemap。但若遇到動態頁面，這個模組無法自動新增，官方文件要求使用者必須自行新增，而官方建議的作法以及網路上查到的方式好像都滿麻煩的，所以自己搞了一個小撇步出來，覺得頗方便，所以就紀錄下來。","923/KaAGJw.png",[12,13,960],"sitemap",{"text":17,"minutes":962,"time":963,"words":964},3.37,202200,674,"nuxt2_dynamic_routes_sitemap",1733560827315]