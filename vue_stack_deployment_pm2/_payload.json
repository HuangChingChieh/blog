[{"data":1,"prerenderedAt":923},["ShallowReactive",2],{"vue_stack_deployment_pm2":3,"Related_vue_stack_deployment_pm2":885},{"title":4,"description":5,"img":6,"readingTime":7,"createdAt":12,"updatedAt":12,"slug":13,"tags":14,"category":18,"body":19},"設定PM2來管理Nuxt SSR網站","最近想整理一下自己在工作中用到的工具集，回頭看發現比較不熟的是 pm2 的初始設定，畢竟設定好之後也只會用到pm2 status、pm2 logs、pm2 monit……這些維護用的指令而已，就決定先從 pm2 開始紀錄了。","924/Crirxh.jpg",{"text":8,"minutes":9,"time":10,"words":11},"4 min read",3.83,229800,766,"2024-06-02T02:55:15.000Z","vue_stack_deployment_pm2",[15,16,17],"nuxt","vue","pm2","frontend",{"type":20,"children":21,"toc":875},"root",[22,54,70,74,81,86,99,102,107,112,157,170,173,178,199,411,416,440,446,458,629,632,638,643,662,667,794,799,818,823,828,833,852,869],{"type":23,"tag":24,"props":25,"children":26},"element","p",{},[27,30,37,39,45,46,52],{"type":28,"value":29},"text","最近想整理一下自己在工作中用到的工具集，回頭看發現比較不熟的是 pm2 的初始設定，畢竟設定好之後也只會用到",{"type":23,"tag":31,"props":32,"children":34},"code",{"className":33},[],[35],{"type":28,"value":36},"pm2 status",{"type":28,"value":38},"、",{"type":23,"tag":31,"props":40,"children":42},{"className":41},[],[43],{"type":28,"value":44},"pm2 logs",{"type":28,"value":38},{"type":23,"tag":31,"props":47,"children":49},{"className":48},[],[50],{"type":28,"value":51},"pm2 monit",{"type":28,"value":53},"……這些維護用的指令而已，就決定先從 pm2 開始紀錄了。",{"type":23,"tag":24,"props":55,"children":56},{},[57,59,68],{"type":28,"value":58},"文章內容都是官方文件就有的東西，這邊是取自己比較常用的部份，可能會延遲更新，還請訪客以",{"type":23,"tag":60,"props":61,"children":65},"a",{"href":62,"rel":63},"https://pm2.keymetrics.io/docs/usage/quick-start/",[64],"nofollow",[66],{"type":28,"value":67},"官方文件",{"type":28,"value":69},"為準。",{"type":23,"tag":71,"props":72,"children":73},"hr",{},[],{"type":23,"tag":75,"props":76,"children":78},"h2",{"id":77},"什麼是-pm2",[79],{"type":28,"value":80},"什麼是 PM2",{"type":23,"tag":24,"props":82,"children":83},{},[84],{"type":28,"value":85},"需要使用即時 SSR 功能的 Nuxt 網站必須跑在 node 環境中成為一個 process，而 pm2 顧名思義就是拿來管理這個 process 的管理器（manager）。",{"type":23,"tag":24,"props":87,"children":88},{},[89,91,97],{"type":28,"value":90},"這個管理器有滿多功能，像是主機重開機時自動重新啟動網站、自動將網站的 process 叢集化以達到可用的最大效能、紀錄 log、監控即時的效能資源耗損……等等，比起直接讓網站",{"type":23,"tag":31,"props":92,"children":94},{"className":93},[],[95],{"type":28,"value":96},"npm run start",{"type":28,"value":98},"來說，會方便許多。",{"type":23,"tag":71,"props":100,"children":101},{},[],{"type":23,"tag":75,"props":103,"children":105},{"id":104},"安裝",[106],{"type":28,"value":104},{"type":23,"tag":24,"props":108,"children":109},{},[110],{"type":28,"value":111},"可以透過 npm 直接安裝：",{"type":23,"tag":113,"props":114,"children":119},"pre",{"className":115,"code":116,"language":117,"meta":118,"style":118},"language-bash shiki shiki-themes github-dark","sudo npm install pm2@latest -g\n","bash","",[120],{"type":23,"tag":31,"props":121,"children":122},{"__ignoreMap":118},[123],{"type":23,"tag":124,"props":125,"children":128},"span",{"class":126,"line":127},"line",1,[129,135,141,146,151],{"type":23,"tag":124,"props":130,"children":132},{"style":131},"--shiki-default:#B392F0",[133],{"type":28,"value":134},"sudo",{"type":23,"tag":124,"props":136,"children":138},{"style":137},"--shiki-default:#9ECBFF",[139],{"type":28,"value":140}," npm",{"type":23,"tag":124,"props":142,"children":143},{"style":137},[144],{"type":28,"value":145}," install",{"type":23,"tag":124,"props":147,"children":148},{"style":137},[149],{"type":28,"value":150}," pm2@latest",{"type":23,"tag":124,"props":152,"children":154},{"style":153},"--shiki-default:#79B8FF",[155],{"type":28,"value":156}," -g\n",{"type":23,"tag":158,"props":159,"children":160},"article-note",{},[161,163,168],{"type":28,"value":162},"\n這裡會有\n",{"type":23,"tag":31,"props":164,"children":166},{"className":165},[],[167],{"type":28,"value":134},{"type":28,"value":169},"\n是因為自己工作中是透過 linux 的軟體包管理器來安裝 nodejs，若要全域安裝會需要管理員權限。\n",{"type":23,"tag":71,"props":171,"children":172},{},[],{"type":23,"tag":75,"props":174,"children":176},{"id":175},"設定與執行",[177],{"type":28,"value":175},{"type":23,"tag":24,"props":179,"children":180},{},[181,183,189,191,197],{"type":28,"value":182},"透過建立",{"type":23,"tag":31,"props":184,"children":186},{"className":185},[],[187],{"type":28,"value":188},"ecosystem.config.js",{"type":28,"value":190},"檔案（Nuxt3 中為",{"type":23,"tag":31,"props":192,"children":194},{"className":193},[],[195],{"type":28,"value":196},"ecosystem.config.cjs",{"type":28,"value":198},"）可以控制 pm2 執行網站時的一些設定值，基本內容如下：",{"type":23,"tag":113,"props":200,"children":204},{"className":201,"code":202,"language":203,"meta":118,"style":118},"language-js shiki shiki-themes github-dark","module.exports = {\n  apps: [\n    {\n      name: 'NuxtAppName',\n      exec_mode: 'cluster',\n      instances: 'max',\n      /* Nuxt3 */\n      // port: '3000',\n      // script: './.output/server/index.mjs',\n      /* Nuxt2 */\n      script: './node_modules/nuxt/bin/nuxt.js',\n      args: 'start',\n    },\n  ],\n}\n","js",[205],{"type":23,"tag":31,"props":206,"children":207},{"__ignoreMap":118},[208,238,247,256,275,293,311,321,330,339,348,366,384,393,402],{"type":23,"tag":124,"props":209,"children":210},{"class":126,"line":127},[211,216,222,227,233],{"type":23,"tag":124,"props":212,"children":213},{"style":153},[214],{"type":28,"value":215},"module",{"type":23,"tag":124,"props":217,"children":219},{"style":218},"--shiki-default:#E1E4E8",[220],{"type":28,"value":221},".",{"type":23,"tag":124,"props":223,"children":224},{"style":153},[225],{"type":28,"value":226},"exports",{"type":23,"tag":124,"props":228,"children":230},{"style":229},"--shiki-default:#F97583",[231],{"type":28,"value":232}," =",{"type":23,"tag":124,"props":234,"children":235},{"style":218},[236],{"type":28,"value":237}," {\n",{"type":23,"tag":124,"props":239,"children":241},{"class":126,"line":240},2,[242],{"type":23,"tag":124,"props":243,"children":244},{"style":218},[245],{"type":28,"value":246},"  apps: [\n",{"type":23,"tag":124,"props":248,"children":250},{"class":126,"line":249},3,[251],{"type":23,"tag":124,"props":252,"children":253},{"style":218},[254],{"type":28,"value":255},"    {\n",{"type":23,"tag":124,"props":257,"children":259},{"class":126,"line":258},4,[260,265,270],{"type":23,"tag":124,"props":261,"children":262},{"style":218},[263],{"type":28,"value":264},"      name: ",{"type":23,"tag":124,"props":266,"children":267},{"style":137},[268],{"type":28,"value":269},"'NuxtAppName'",{"type":23,"tag":124,"props":271,"children":272},{"style":218},[273],{"type":28,"value":274},",\n",{"type":23,"tag":124,"props":276,"children":278},{"class":126,"line":277},5,[279,284,289],{"type":23,"tag":124,"props":280,"children":281},{"style":218},[282],{"type":28,"value":283},"      exec_mode: ",{"type":23,"tag":124,"props":285,"children":286},{"style":137},[287],{"type":28,"value":288},"'cluster'",{"type":23,"tag":124,"props":290,"children":291},{"style":218},[292],{"type":28,"value":274},{"type":23,"tag":124,"props":294,"children":296},{"class":126,"line":295},6,[297,302,307],{"type":23,"tag":124,"props":298,"children":299},{"style":218},[300],{"type":28,"value":301},"      instances: ",{"type":23,"tag":124,"props":303,"children":304},{"style":137},[305],{"type":28,"value":306},"'max'",{"type":23,"tag":124,"props":308,"children":309},{"style":218},[310],{"type":28,"value":274},{"type":23,"tag":124,"props":312,"children":314},{"class":126,"line":313},7,[315],{"type":23,"tag":124,"props":316,"children":318},{"style":317},"--shiki-default:#6A737D",[319],{"type":28,"value":320},"      /* Nuxt3 */\n",{"type":23,"tag":124,"props":322,"children":324},{"class":126,"line":323},8,[325],{"type":23,"tag":124,"props":326,"children":327},{"style":317},[328],{"type":28,"value":329},"      // port: '3000',\n",{"type":23,"tag":124,"props":331,"children":333},{"class":126,"line":332},9,[334],{"type":23,"tag":124,"props":335,"children":336},{"style":317},[337],{"type":28,"value":338},"      // script: './.output/server/index.mjs',\n",{"type":23,"tag":124,"props":340,"children":342},{"class":126,"line":341},10,[343],{"type":23,"tag":124,"props":344,"children":345},{"style":317},[346],{"type":28,"value":347},"      /* Nuxt2 */\n",{"type":23,"tag":124,"props":349,"children":351},{"class":126,"line":350},11,[352,357,362],{"type":23,"tag":124,"props":353,"children":354},{"style":218},[355],{"type":28,"value":356},"      script: ",{"type":23,"tag":124,"props":358,"children":359},{"style":137},[360],{"type":28,"value":361},"'./node_modules/nuxt/bin/nuxt.js'",{"type":23,"tag":124,"props":363,"children":364},{"style":218},[365],{"type":28,"value":274},{"type":23,"tag":124,"props":367,"children":369},{"class":126,"line":368},12,[370,375,380],{"type":23,"tag":124,"props":371,"children":372},{"style":218},[373],{"type":28,"value":374},"      args: ",{"type":23,"tag":124,"props":376,"children":377},{"style":137},[378],{"type":28,"value":379},"'start'",{"type":23,"tag":124,"props":381,"children":382},{"style":218},[383],{"type":28,"value":274},{"type":23,"tag":124,"props":385,"children":387},{"class":126,"line":386},13,[388],{"type":23,"tag":124,"props":389,"children":390},{"style":218},[391],{"type":28,"value":392},"    },\n",{"type":23,"tag":124,"props":394,"children":396},{"class":126,"line":395},14,[397],{"type":23,"tag":124,"props":398,"children":399},{"style":218},[400],{"type":28,"value":401},"  ],\n",{"type":23,"tag":124,"props":403,"children":405},{"class":126,"line":404},15,[406],{"type":23,"tag":124,"props":407,"children":408},{"style":218},[409],{"type":28,"value":410},"}\n",{"type":23,"tag":24,"props":412,"children":413},{},[414],{"type":28,"value":415},"接著在網站資料夾中執行下面這個指令，pm2 就會開始執行 Nuxt 網站了：",{"type":23,"tag":113,"props":417,"children":419},{"className":115,"code":418,"language":117,"meta":118,"style":118},"pm2 start ecosystem.config.js\n",[420],{"type":23,"tag":31,"props":421,"children":422},{"__ignoreMap":118},[423],{"type":23,"tag":124,"props":424,"children":425},{"class":126,"line":127},[426,430,435],{"type":23,"tag":124,"props":427,"children":428},{"style":131},[429],{"type":28,"value":17},{"type":23,"tag":124,"props":431,"children":432},{"style":137},[433],{"type":28,"value":434}," start",{"type":23,"tag":124,"props":436,"children":437},{"style":137},[438],{"type":28,"value":439}," ecosystem.config.js\n",{"type":23,"tag":441,"props":442,"children":444},"h3",{"id":443},"自己常用的其他設定",[445],{"type":28,"value":443},{"type":23,"tag":24,"props":447,"children":448},{},[449,451,456],{"type":28,"value":450},"當然",{"type":23,"tag":31,"props":452,"children":454},{"className":453},[],[455],{"type":28,"value":188},{"type":28,"value":457},"還可以設定更多的參數，自己常用的羅列如下：",{"type":23,"tag":113,"props":459,"children":461},{"className":201,"code":460,"language":203,"meta":118,"style":118},"module.exports = {\n  apps: [\n    {\n      // 設定不同環境時的參數，可以區分開發、測試以及正式環境。\n      // 不同環境可以透過pm2 start時以--env production傳入。\n      env_production: {\n        NODE_ENV: 'production',\n      },\n      env_development: {\n        NODE_ENV: 'development',\n      },\n      // 當網站實體佔用超過多少記憶體時便重啟\n      max_memory_restart: '3.75G',\n    },\n  ],\n}\n",[462],{"type":23,"tag":31,"props":463,"children":464},{"__ignoreMap":118},[465,488,495,502,510,518,526,543,551,559,575,582,590,607,614,621],{"type":23,"tag":124,"props":466,"children":467},{"class":126,"line":127},[468,472,476,480,484],{"type":23,"tag":124,"props":469,"children":470},{"style":153},[471],{"type":28,"value":215},{"type":23,"tag":124,"props":473,"children":474},{"style":218},[475],{"type":28,"value":221},{"type":23,"tag":124,"props":477,"children":478},{"style":153},[479],{"type":28,"value":226},{"type":23,"tag":124,"props":481,"children":482},{"style":229},[483],{"type":28,"value":232},{"type":23,"tag":124,"props":485,"children":486},{"style":218},[487],{"type":28,"value":237},{"type":23,"tag":124,"props":489,"children":490},{"class":126,"line":240},[491],{"type":23,"tag":124,"props":492,"children":493},{"style":218},[494],{"type":28,"value":246},{"type":23,"tag":124,"props":496,"children":497},{"class":126,"line":249},[498],{"type":23,"tag":124,"props":499,"children":500},{"style":218},[501],{"type":28,"value":255},{"type":23,"tag":124,"props":503,"children":504},{"class":126,"line":258},[505],{"type":23,"tag":124,"props":506,"children":507},{"style":317},[508],{"type":28,"value":509},"      // 設定不同環境時的參數，可以區分開發、測試以及正式環境。\n",{"type":23,"tag":124,"props":511,"children":512},{"class":126,"line":277},[513],{"type":23,"tag":124,"props":514,"children":515},{"style":317},[516],{"type":28,"value":517},"      // 不同環境可以透過pm2 start時以--env production傳入。\n",{"type":23,"tag":124,"props":519,"children":520},{"class":126,"line":295},[521],{"type":23,"tag":124,"props":522,"children":523},{"style":218},[524],{"type":28,"value":525},"      env_production: {\n",{"type":23,"tag":124,"props":527,"children":528},{"class":126,"line":313},[529,534,539],{"type":23,"tag":124,"props":530,"children":531},{"style":218},[532],{"type":28,"value":533},"        NODE_ENV: ",{"type":23,"tag":124,"props":535,"children":536},{"style":137},[537],{"type":28,"value":538},"'production'",{"type":23,"tag":124,"props":540,"children":541},{"style":218},[542],{"type":28,"value":274},{"type":23,"tag":124,"props":544,"children":545},{"class":126,"line":323},[546],{"type":23,"tag":124,"props":547,"children":548},{"style":218},[549],{"type":28,"value":550},"      },\n",{"type":23,"tag":124,"props":552,"children":553},{"class":126,"line":332},[554],{"type":23,"tag":124,"props":555,"children":556},{"style":218},[557],{"type":28,"value":558},"      env_development: {\n",{"type":23,"tag":124,"props":560,"children":561},{"class":126,"line":341},[562,566,571],{"type":23,"tag":124,"props":563,"children":564},{"style":218},[565],{"type":28,"value":533},{"type":23,"tag":124,"props":567,"children":568},{"style":137},[569],{"type":28,"value":570},"'development'",{"type":23,"tag":124,"props":572,"children":573},{"style":218},[574],{"type":28,"value":274},{"type":23,"tag":124,"props":576,"children":577},{"class":126,"line":350},[578],{"type":23,"tag":124,"props":579,"children":580},{"style":218},[581],{"type":28,"value":550},{"type":23,"tag":124,"props":583,"children":584},{"class":126,"line":368},[585],{"type":23,"tag":124,"props":586,"children":587},{"style":317},[588],{"type":28,"value":589},"      // 當網站實體佔用超過多少記憶體時便重啟\n",{"type":23,"tag":124,"props":591,"children":592},{"class":126,"line":386},[593,598,603],{"type":23,"tag":124,"props":594,"children":595},{"style":218},[596],{"type":28,"value":597},"      max_memory_restart: ",{"type":23,"tag":124,"props":599,"children":600},{"style":137},[601],{"type":28,"value":602},"'3.75G'",{"type":23,"tag":124,"props":604,"children":605},{"style":218},[606],{"type":28,"value":274},{"type":23,"tag":124,"props":608,"children":609},{"class":126,"line":395},[610],{"type":23,"tag":124,"props":611,"children":612},{"style":218},[613],{"type":28,"value":392},{"type":23,"tag":124,"props":615,"children":616},{"class":126,"line":404},[617],{"type":23,"tag":124,"props":618,"children":619},{"style":218},[620],{"type":28,"value":401},{"type":23,"tag":124,"props":622,"children":624},{"class":126,"line":623},16,[625],{"type":23,"tag":124,"props":626,"children":627},{"style":218},[628],{"type":28,"value":410},{"type":23,"tag":71,"props":630,"children":631},{},[],{"type":23,"tag":75,"props":633,"children":635},{"id":634},"設定開機時自動重新啟動-pm2",[636],{"type":28,"value":637},"設定開機時自動重新啟動 pm2",{"type":23,"tag":24,"props":639,"children":640},{},[641],{"type":28,"value":642},"若網站是部署在主機上，而非透過容器方式的話，設定主機重開機時自動重新啟動後，可以防止主機意外重新啟動後網站掛掉的問題。先輸入下列指令：",{"type":23,"tag":113,"props":644,"children":646},{"className":115,"code":645,"language":117,"meta":118,"style":118},"pm2 startup\n",[647],{"type":23,"tag":31,"props":648,"children":649},{"__ignoreMap":118},[650],{"type":23,"tag":124,"props":651,"children":652},{"class":126,"line":127},[653,657],{"type":23,"tag":124,"props":654,"children":655},{"style":131},[656],{"type":28,"value":17},{"type":23,"tag":124,"props":658,"children":659},{"style":137},[660],{"type":28,"value":661}," startup\n",{"type":23,"tag":24,"props":663,"children":664},{},[665],{"type":28,"value":666},"接著終端機會出現像這樣的提示，要你複製一段指令並執行：",{"type":23,"tag":113,"props":668,"children":670},{"className":115,"code":669,"language":117,"meta":118,"style":118},"[PM2] Init System found: systemd\n[PM2] To setup the Startup Script, copy/paste the following command:\nsudo env PATH=$PATH:/home/somuser/.nvm/versions/node/v20.14.0/bin /home/someuser/.nvm/versions/node/v20.14.0/lib/node_modules/pm2/bin/pm2 startup \u003Cdistribution> -u \u003Cuser> --hp \u003Chome-path>\n",[671],{"type":23,"tag":31,"props":672,"children":673},{"__ignoreMap":118},[674,682,690],{"type":23,"tag":124,"props":675,"children":676},{"class":126,"line":127},[677],{"type":23,"tag":124,"props":678,"children":679},{"style":218},[680],{"type":28,"value":681},"[PM2] Init System found: systemd\n",{"type":23,"tag":124,"props":683,"children":684},{"class":126,"line":240},[685],{"type":23,"tag":124,"props":686,"children":687},{"style":218},[688],{"type":28,"value":689},"[PM2] To setup the Startup Script, copy/paste the following command:\n",{"type":23,"tag":124,"props":691,"children":692},{"class":126,"line":249},[693,697,702,707,712,717,722,727,732,737,742,747,752,756,761,766,770,775,779,784,789],{"type":23,"tag":124,"props":694,"children":695},{"style":131},[696],{"type":28,"value":134},{"type":23,"tag":124,"props":698,"children":699},{"style":137},[700],{"type":28,"value":701}," env",{"type":23,"tag":124,"props":703,"children":704},{"style":137},[705],{"type":28,"value":706}," PATH=",{"type":23,"tag":124,"props":708,"children":709},{"style":218},[710],{"type":28,"value":711},"$PATH",{"type":23,"tag":124,"props":713,"children":714},{"style":137},[715],{"type":28,"value":716},":/home/somuser/.nvm/versions/node/v20.14.0/bin",{"type":23,"tag":124,"props":718,"children":719},{"style":137},[720],{"type":28,"value":721}," /home/someuser/.nvm/versions/node/v20.14.0/lib/node_modules/pm2/bin/pm2",{"type":23,"tag":124,"props":723,"children":724},{"style":137},[725],{"type":28,"value":726}," startup",{"type":23,"tag":124,"props":728,"children":729},{"style":229},[730],{"type":28,"value":731}," \u003C",{"type":23,"tag":124,"props":733,"children":734},{"style":137},[735],{"type":28,"value":736},"distributio",{"type":23,"tag":124,"props":738,"children":739},{"style":218},[740],{"type":28,"value":741},"n",{"type":23,"tag":124,"props":743,"children":744},{"style":229},[745],{"type":28,"value":746},">",{"type":23,"tag":124,"props":748,"children":749},{"style":153},[750],{"type":28,"value":751}," -u",{"type":23,"tag":124,"props":753,"children":754},{"style":229},[755],{"type":28,"value":731},{"type":23,"tag":124,"props":757,"children":758},{"style":137},[759],{"type":28,"value":760},"use",{"type":23,"tag":124,"props":762,"children":763},{"style":218},[764],{"type":28,"value":765},"r",{"type":23,"tag":124,"props":767,"children":768},{"style":229},[769],{"type":28,"value":746},{"type":23,"tag":124,"props":771,"children":772},{"style":153},[773],{"type":28,"value":774}," --hp",{"type":23,"tag":124,"props":776,"children":777},{"style":229},[778],{"type":28,"value":731},{"type":23,"tag":124,"props":780,"children":781},{"style":137},[782],{"type":28,"value":783},"home-pat",{"type":23,"tag":124,"props":785,"children":786},{"style":218},[787],{"type":28,"value":788},"h",{"type":23,"tag":124,"props":790,"children":791},{"style":229},[792],{"type":28,"value":793},">\n",{"type":23,"tag":24,"props":795,"children":796},{},[797],{"type":28,"value":798},"指令的內容會根據你目前所在的系統版本、使用的 nodejs 環境而有所不同，總之就複製後執行。最後透過 pm2 執行所有你在重開機時想要自動執行的網站後，再執行下列指令：",{"type":23,"tag":113,"props":800,"children":802},{"className":115,"code":801,"language":117,"meta":118,"style":118},"pm2 save\n",[803],{"type":23,"tag":31,"props":804,"children":805},{"__ignoreMap":118},[806],{"type":23,"tag":124,"props":807,"children":808},{"class":126,"line":127},[809,813],{"type":23,"tag":124,"props":810,"children":811},{"style":131},[812],{"type":28,"value":17},{"type":23,"tag":124,"props":814,"children":815},{"style":137},[816],{"type":28,"value":817}," save\n",{"type":23,"tag":24,"props":819,"children":820},{},[821],{"type":28,"value":822},"這樣就設定完成了。",{"type":23,"tag":441,"props":824,"children":826},{"id":825},"取消自動重新啟動",[827],{"type":28,"value":825},{"type":23,"tag":24,"props":829,"children":830},{},[831],{"type":28,"value":832},"若想要取消自動重新啟動的話，可以透過下列指令：",{"type":23,"tag":113,"props":834,"children":836},{"className":115,"code":835,"language":117,"meta":118,"style":118},"pm2 unstartup\n",[837],{"type":23,"tag":31,"props":838,"children":839},{"__ignoreMap":118},[840],{"type":23,"tag":124,"props":841,"children":842},{"class":126,"line":127},[843,847],{"type":23,"tag":124,"props":844,"children":845},{"style":131},[846],{"type":28,"value":17},{"type":23,"tag":124,"props":848,"children":849},{"style":137},[850],{"type":28,"value":851}," unstartup\n",{"type":23,"tag":24,"props":853,"children":854},{},[855],{"type":23,"tag":856,"props":857,"children":858},"strong",{},[859,861,867],{"type":28,"value":860},"在主機 node 環境有升級的時候，要記得先",{"type":23,"tag":31,"props":862,"children":864},{"className":863},[],[865],{"type":28,"value":866},"unstartup",{"type":28,"value":868},"，再重新設定。",{"type":23,"tag":870,"props":871,"children":872},"style",{},[873],{"type":28,"value":874},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":118,"searchDepth":240,"depth":240,"links":876},[877,878,879,882],{"id":77,"depth":240,"text":80},{"id":104,"depth":240,"text":104},{"id":175,"depth":240,"text":175,"children":880},[881],{"id":443,"depth":249,"text":443},{"id":634,"depth":240,"text":637,"children":883},[884],{"id":825,"depth":249,"text":825},[886,899,912],{"title":887,"description":888,"img":889,"tags":890,"readingTime":892,"createdAt":896,"updatedAt":897,"slug":898},"Nuxt2中的BootstrapVue TreeShaking","Bootstrap 是個很好用的 UI 框架，在 Vue 生態系中主要由 Bootstrap Vue 去作銜接，然而在專案中幾乎不會完全使用到 Bootstrap 的所有功能，這時如果把不必要的 css / js 編譯移除，可以降低編譯後專案的大小，這種行為也被稱為 Tree shaking。本篇紀錄了自己在 Nuxt2 中使用 Bootstrap Vue 時，Tree Shaking 的一些步驟。","924/Oqxy2g.jpg",[16,15,891],"bootstrap",{"text":8,"minutes":893,"time":894,"words":895},3.56,213600,712,"2023-01-02T08:03:25.000Z","2023-12-11T10:19:13.000Z","nuxt2_bootstrapvue_treeshaking",{"title":900,"description":901,"tags":902,"img":903,"readingTime":904,"createdAt":909,"updatedAt":910,"slug":911},"使用nuxt-content-git取得Nuxt2 Content中正確的檔案時間","建完這個部落格之後，發現好像不太對，怎麼前幾天發的文章，日期卻變成今天。後來發現是因為若從 A 電腦更新文章，在 B 電腦用 git 同步更新檔案之後，檔案的更新日期會變成當下的時間。",[16,15],"924/WCeWkF.jpg",{"text":905,"minutes":906,"time":907,"words":908},"2 min read",1.55,93000,310,"2023-01-06T13:35:19.000Z","2023-10-30T09:24:31.000Z","nuxt2_content_git",{"title":913,"description":914,"img":915,"tags":916,"readingTime":918,"createdAt":910,"updatedAt":910,"slug":922},"在Nuxt 2中建立動態routes的sitemap","Sitemap 雖然對網站來說非必要，但為了 SEO 考量通常都還是會建立。而在 Nuxt 2 中可以透過@nuxt/sitemap模組來簡單建立 sitemap。但若遇到動態頁面，這個模組無法自動新增，官方文件要求使用者必須自行新增，而官方建議的作法以及網路上查到的方式好像都滿麻煩的，所以自己搞了一個小撇步出來，覺得頗方便，所以就紀錄下來。","923/KaAGJw.png",[15,16,917],"sitemap",{"text":8,"minutes":919,"time":920,"words":921},3.37,202200,674,"nuxt2_dynamic_routes_sitemap",1740151898228]